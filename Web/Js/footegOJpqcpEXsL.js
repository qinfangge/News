!function(e){var t=window.jNews=window.jNews||{};var i=navigator.userAgent.toLowerCase();var n=t.isPad=/(android|ipad)/.test(i);t.msie=/msie/i.test(navigator.userAgent.toLowerCase());t.isie=/msie/.test(i);t.noapi=/qa|static/.test(location.host);var o=t.isie6=/msie 6/.test(i);var s=e(".mainnav")[0],r=document.getElementById("ep-close");var a=e("#mainnav-line");var l=e("#mainlinks");var c=l.find(".mainlnks-more");var u=c.find("ul")[0];var d=l.find(".active")[0];var h=e("body");var f=e(".topbar h1,.h1");var p;var m=e("#topbar");var v,g;var y;var w,b,T;t.$listarea=e(".commend-listwrap .mainarea");x();if(!n){l.bind("mouseover",function(e){e=e||window.event;var t=e.target||e.srcElement;if(v){clearTimeout(v);v=null}if(g){clearTimeout(g);g=null}var i=t.tagName.toLowerCase();if(i=="a"){a.show().css({width:t.offsetWidth,left:t.offsetLeft||t.parentNode.offsetLeft})}}).bind("mouseout",function(){v=setTimeout(x,60)})}var C;if(n){if(/os [345]/.test(i))h.addClass("ipad1");h.bind("touchstart",function(){c.removeClass("mainlnks-more-show")});c.find("span").bind("touchstart",function(e){e.stopPropagation&&e.stopPropagation();c.addClass("mainlnks-more-show")})}else{c.bind("mouseover",function(e){e.cancelBubble=true;e.stopPropagation&&e.stopPropagation();c.addClass("mainlnks-more-show");if(C){clearTimeout(C);C=null}}).bind("mouseout",function(e){e.cancelBubble=true;e.stopPropagation&&e.stopPropagation();C=setTimeout(function(){c.removeClass("mainlnks-more-show");C=null},200)})}e.adjustMenu=function(){if(m[0].offsetWidth==0)return;var t=l[0];var i=t.parentNode;var n=i.parentNode;var o=e(">li",t);var s=Math.max(0,185-i.offsetLeft);t.style.whiteSpace="normal";if(u){var r=t.offsetWidth,a;var d=Math.max(193,(r-900)/2);t.style.paddingLeft=d+"px";var h=r-d-132;var f=u.firstChild;for(var p=0,v=o.length;p<v;p++){var g=o[p];if(g==c[0])break;if(/more/.test(g.className))break;a=(parseInt(e.classList.getStyle(g,"marginLeft"))||0)+(parseInt(e.classList.getStyle(g,"marginRight"))||0);h-=o[p].offsetWidth+a;if(h<0){u.insertBefore(o[p],f)}}if(h>80){for(;h>0;){var y=u.children[0];if(y){t.insertBefore(y,c[0]);a=(parseInt(e.classList.getStyle(y,"marginLeft"))||0)+(parseInt(e.classList.getStyle(y,"marginRight"))||0);if(h>y.offsetWidth+a){h-=y.offsetWidth-a}else{u.appendChild(y);break}}else{break}}}if(u.children.length==1){var y=u.children[0];t.insertBefore(y,c[0]);if(y.offsetWidth>50){u.appendChild(y)}}c[0].style.visibility=u.children.length?"visible":"hidden";k()}else{t.style.paddingLeft=s?s+10+"px":0}t.style.whiteSpace="nowrap";t.style.overflow="visible"};function x(){if(!d)return;var t=e("a",d)[0];a.css({width:t.offsetWidth,left:t.offsetLeft||t.parentNode.offsetLeft});g=setTimeout(function(){a.hide()},500)}e.activeMenu=function(t){if(d){e.classList.remove(d,"active")}d=null;var i=l.find("a");for(var n=0,o=i.length;n<o;n++){if(i[n].getAttribute("channel")==t||(i[n].getAttribute("href")||"").indexOf("/"+t+"/")!=-1){d=i[n].parentNode;break}}if(d){e.classList.add(d,"active");x();k()}};function k(){if(d){if(!/mainlnks/.test(d.parentNode.className)){var e=c[0].previousSibling;while(e&&e.nodeType!=1)e=e.previousSibling;if(e){u.insertBefore(e,d);l[0].insertBefore(d,c[0])}}}}e.ready(function(){E()});e(window).bind("scroll",E);e.ie6fixtop=o?function(e){if(e){m.css({visibility:"hidden"})}else{_=null;m.css({visibility:"visible",top:document.body.scrollTop||document.documentElement.scrollTop})}}:null;var _;function E(){var t=document.body.scrollTop||document.documentElement.scrollTop,i=e.endpage,a;if(!i){if(!w){y=e(".ne-photoset-sidebar")[0];w=document.getElementById("epContentRight");b=w&&w.parentNode}}else if(i&&i.active){y=i.doms.photoviewside;w=i.doms.epRight;b=i.doms.fixedParent}if((!i||i.active)&&!n){if(w&&(!y||y.style.visibility!="hidden")){if(T){if(t<T){T=0;w.children[0].style.top=0;b.insertBefore(w,b.firstChild)}}else{if(y){a=e.dom.pos(w).y-75;if(a>0&&t>a){T=a}}else{a=e.dom.pos(w).y+w.offsetHeight-75;if(a>0&&t>a){T=a}}if(T){s.insertBefore(w,r);if(!y){e(w.children[0]).css({top:-600}).animate({top:0},600,"easein")}}}}}if(t>45){if(o){if(_)clearTimeout(_);else e.ie6fixtop(true);_=setTimeout(e.ie6fixtop,150)}if(!h.hasClass("fixed-top")){h.addClass("fixed-top");if(n||o){f.addClass("red_logo")}else{setTimeout(function(){f.addClass("h1-fadeout");setTimeout(function(){f.addClass("red_logo");f[0].offsetHeight;f.removeClass("h1-fadeout")},200)},50)}}}else{if(h.hasClass("fixed-top")){h.removeClass("fixed-top");if(n||o){m.css({top:0});f.removeClass("red_logo")}else{setTimeout(function(){f.addClass("h1-fadein");setTimeout(function(){f.removeClass("red_logo");f[0].offsetHeight;f.removeClass("h1-fadein")},350)},50)}}}}function I(){this.cache=[];this.visited={}}I.prototype={getUid:function(){this.uid="";var t;this.utype=0;if(e.cookie.get("S_INFO")){t=e.cookie.get("P_INFO");if(/(\S+?)\|/.test(t)){this.uid=RegExp.$1;this.utype=1}}else if(e.cookie.get("S_OINFO")){t=e.cookie.get("P_OINFO");if(/(\S+?)\|/.test(t)){this.uid=RegExp.$1;this.utype=2}}},save:function(e){this.visited[e]=1;if(this.LS){var t=this.cache.length;if(t){for(var i=0;i<t;i++){this.save(this.cache[i])}this.cache=[]}this.getUid();e+=this.uid?"|"+this.uid:"";this.LS.setItem(e,parseInt((new Date).getTime()/6e4))}else{this.cache.push(e)}},check:function(e){if(this.visited[e])return true;if(this.LS){this.getUid();var t=parseInt((new Date).getTime()/6e4);e+=this.uid?"|"+this.uid:"";var i=this.LS.getItem(e)||0;var n=t-i<1440;if(i&&!n)this.LS.removeItem(e);return n}else{return false}}};e.spam=new I;e.initSpam=function(t){try{document.domain="163.com";window.jnewsProxy=function(i){if(i){try{i.getItem("ff30");e.spam.LS=i}catch(n){e.spam.LS=window.localStorage}if(typeof t=="function"){t()}if(e.endpage&&e.endpage.active){if(e.spam.check(e.endpage.docid)){e.endpage.doms.$upcount.addClass("ep-tool-jian-disable")}}}};var i=document.createElement("iframe");i.className="iframe_hidden";i.src="http://news.163.com/special/f2e/commend_proxy.html";m[0].appendChild(i)}catch(n){}};var j="news sports ent lady money auto tech mobile digi v travel house home edu book game ";e.validChannel=function(e){if(!e||j.indexOf(e+" ")==-1)e="news";return e}}(NE);!function(e){var t=window.jNews=window.jNews||{};var i=t.isPad;if(!~location.host.indexOf("j.news"))return;var n=e(window);var o="http://123.126.62."+(i||Math.random()<.5?"136":"137");var s=o+(i?"/e.gif?":"/c.gif?");var r=document.referrer.replace(/^https?:\/\//,"");var a=location.hash.replace(/^#/,"");function l(){var t=this;this.timer={start:window.NE_TIMER||+new Date};this.timer.last=this.timer.start;this.pageType="i";this.logArr=[];this.cache={};var o;if(r.indexOf("j.news.163.com")>-1){o=/detail|docs/.test(document.referrer)?"d":"l"}else o=r.replace(/^www\./,"").replace(/\/.*/,"");n.bind("beforeunload",c);var l=navigator.userAgent.toLowerCase();if(!/compatible/.test(l)&&/firefox/.test(l))n.bind("unload",c);if(i)setTimeout(u,1e3*120);function c(){if(e["unload_s"])return;if(e.newstore)e.newstore.log();var i=e["unload_s"]=new Image;i.src=s+t.pageType+"="+t.logArr.join("")+"&r="+o+"&hash="+a}function u(){if(e.newstore)e.newstore.log();var i=e["inter_s"]=new Image;i.src=s+"z="+t.logArr.join("")}}l.prototype={setPage:function(e){this.pageType=e},counter:function(e,t){if(!this.cache[e])this.cache[e]=0;this.cache[e]+=t},log:function(e){var t=+new Date-this.timer.last;t=Math.round(t/100);var i=e+Array.prototype.slice.call(arguments,1).join(",")+","+t;for(var n in this.cache){i+=n+this.cache[n]}this.logArr.push(i);this.timer.last=+new Date;this.cache={}}};e.stat=new l}(NE);var sortedCities={"\u70ed\u95e8":[{"\u5317\u4eac":101010100},{"\u4e0a\u6d77":101020100},{"\u6606\u660e":101290101},{"\u676d\u5dde":101210101},{"\u5e7f\u5dde":101280101},{"\u6210\u90fd":101270101},{"\u897f\u5b89":101110101},{"\u5357\u4eac":101190101},{"\u6df1\u5733":101280601},{"\u91cd\u5e86":101040100},{"\u957f\u6c99":101250101},{"\u6c88\u9633":101070101},{"\u53a6\u95e8":101230201},{"\u6b66\u6c49":101200101},{"\u6d77\u53e3":101310101},{"\u4e4c\u9c81\u6728\u9f50":101130101},{"\u9752\u5c9b":101120201},{"\u5927\u8fde":101070201},{"\u54c8\u5c14\u6ee8":101050101},{"\u4e09\u4e9a":101310201},{"\u957f\u6625":101060101},{"\u5357\u5b81":101300101},{"\u8d35\u9633":101260101},{"\u798f\u5dde":101230101},{"\u90d1\u5dde":101180101},{"\u6d4e\u5357":101120101},{"\u6842\u6797":101300501},{"\u5929\u6d25":101030100},{"\u592a\u539f":101100101},{"\u5357\u660c":101240101},{"\u62c9\u8428":101140101},{"\u897f\u5b81":101150101},{"\u53f0\u5317":101340101}],F:[{"\u4e30\u53f0":101010900},{"\u623f\u5c71":101011200},{"\u5949\u8d24":101021e3},{"\u961c\u9633":101220801},{"\u6daa\u9675":101041400},{"\u5949\u8282":101041900},{"\u4e30\u90fd":101043e3},{"\u798f\u5dde":101230101},{"\u8386\u7530":101230401},{"\u4f5b\u5c71":101280800},{"\u9632\u57ce\u6e2f":101301401},{"\u629a\u5dde":101240401},{"\u629a\u987a":101070401},{"\u961c\u65b0":101070901}],S:[{"\u4e0a\u6d77":101020100},{"\u6df1\u5733":101280601},{"\u77f3\u5bb6\u5e84":101090101},{"\u4e09\u4e9a":101310201},{"\u82cf\u5dde":101190401},{"\u987a\u4e49":101010400},{"\u677e\u6c5f":101020900},{"\u5546\u4e18":101181001},{"\u4e09\u95e8\u5ce1":101181701},{"\u5bbf\u5dde":101220701},{"\u7ecd\u5174":101210501},{"\u77f3\u67f1":101042500},{"\u6c99\u576a\u575d":101043700},{"\u4e09\u660e":101230801},{"\u6c55\u5934":101280501},{"\u6c55\u5c3e":101282101},{"\u97f6\u5173":101280201},{"\u4e0a\u9976":101240301},{"\u5341\u5830":101201101},{"\u795e\u519c\u67b6":101201201},{"\u968f\u5dde":101201301},{"\u9042\u5b81":101270701},{"\u77f3\u5634\u5c71":101170201},{"\u5546\u6d1b":101110601},{"\u6714\u5dde":101100901},{"\u77f3\u6cb3\u5b50":101130301},{"\u5c71\u5357":101140301},{"\u90b5\u9633":101250901},{"\u5bbf\u8fc1":101191301},{"\u7ee5\u5316":101050501},{"\u53cc\u9e2d\u5c71":101051301},{"\u56db\u5e73":101060401},{"\u677e\u539f":101060801}],T:[{"\u5929\u6d25":101030100},{"\u592a\u539f":101100101},{"\u901a\u5dde":101010600},{"\u5858\u6cbd":101031100},{"\u5510\u5c71":101090501},{"\u6c64\u6cb3\u53e3":101011800},{"\u6f2f\u6cb3":101181501},{"\u94dc\u9675":101221301},{"\u53f0\u5dde":101210601},{"\u6f7c\u5357":101042100},{"\u94dc\u6881":101042800},{"\u5929\u6c34":101160901},{"\u94dc\u4ec1":101260601},{"\u901a\u8fbd":101080501},{"\u5929\u95e8":101201501},{"\u6cf0\u5b89":101120801},{"\u94dc\u5ddd":101111001},{"\u5410\u9c81\u756a":101130501},{"\u5854\u57ce":101131101},{"\u53f0\u5317\u53bf":101340101},{"\u53f0\u4e2d":101340401},{"\u5c6f\u660c":101310210},{"\u6cf0\u5dde":101191201},{"\u901a\u5316":101060501},{"\u94c1\u5cad":101071101}],N:[{"\u5357\u4eac":101190101},{"\u5357\u660c":101240101},{"\u5b81\u6ce2":101210401},{"\u5357\u5b81":101300101},{"\u5b81\u6cb3":101030700},{"\u5357\u6c47":101020600},{"\u5357\u9633":101180701},{"\u5357\u5ddd":101040400},{"\u5357\u5e73":101230901},{"\u5b81\u5fb7":101230301},{"\u5357\u5145":101270501},{"\u5357\u6c99\u5c9b":101310220},{"\u5357\u901a":101190501},{"\u6012\u6c5f":101291201},{"\u5185\u6c5f":101271201},{"\u90a3\u66f2":101140601}],K:[{"\u6606\u660e":101290101},{"\u5f00\u5c01":101180801},{"\u5f00\u53bf":101041500},{"\u51ef\u91cc":101260501},{"\u5e93\u5c14\u52d2":101130601},{"\u5580\u4ec0":101130901},{"\u514b\u62c9\u739b\u4f9d":101130201}],E:[{"\u9102\u5c14\u591a\u65af":101080701},{"\u6069\u65bd":101201001},{"\u9102\u5dde":101200301}],Y:[{"\u94f6\u5ddd":101170101},{"\u626c\u5dde":101190601},{"\u70df\u53f0":101120501},{"\u5ef6\u5b89":101110300},{"\u5ef6\u5e86":101010800},{"\u7389\u6797":101300901},{"\u6e1d\u5317":101040700},{"\u4e91\u9633":101041700},{"\u9149\u9633":101043400},{"\u6c38\u5ddd":101040200},{"\u4e91\u6d6e":101281401},{"\u9633\u6c5f":101281801},{"\u7389\u6eaa":101290701},{"\u5b9c\u6625":101240501},{"\u9e70\u6f6d":101241101},{"\u5b9c\u660c":101200901},{"\u5b9c\u5bbe":101271101},{"\u96c5\u5b89":101271701},{"\u7389\u6811":101150601},{"\u6986\u6797":101110401},{"\u8fd0\u57ce":101100801},{"\u9633\u6cc9":101100301},{"\u4f0a\u5b81":101131001},{"\u76ca\u9633":101250700},{"\u5cb3\u9633":101251001},{"\u6c38\u5dde":101251401},{"\u76d0\u57ce":101190701},{"\u4f0a\u6625":101050801},{"\u5ef6\u5409":101060301},{"\u8425\u53e3":101070801}],Z:[{"\u90d1\u5dde":101180101},{"\u73e0\u6d77":101280701},{"\u5f20\u5bb6\u754c":101251101},{"\u5f20\u5bb6\u53e3":101090301},{"\u658b\u5802":101012e3},{"\u5468\u53e3":101181401},{"\u9a7b\u9a6c\u5e97":101181601},{"\u821f\u5c71":101211101},{"\u5fe0\u53bf":101042400},{"\u6f33\u5dde":101230601},{"\u5f20\u6396":101160701},{"\u8087\u5e86":101280901},{"\u6e5b\u6c5f":101281001},{"\u4e2d\u5c71":101281701},{"\u9075\u4e49":101260201},{"\u662d\u901a":101291001},{"\u81ea\u8d21":101270301},{"\u8d44\u9633":101271301},{"\u4e2d\u536b":101170501},{"\u67a3\u5e84":101121401},{"\u6dc4\u535a":101120301},{"\u682a\u6d32":101250301},{"\u9547\u6c5f":101190301}],Q:[{"\u9752\u5c9b":101120201},{"\u79e6\u7687\u5c9b":101091101},{"\u9f50\u9f50\u54c8\u5c14":101050201},{"\u9752\u6d66":101020800},{"\u8862\u5dde":101211001},{"\u9ed4\u6c5f":101041100},{"\u7da6\u6c5f":101043300},{"\u6cc9\u5dde":101230501},{"\u5e86\u9633":101160401},{"\u6e05\u8fdc":101281301},{"\u94a6\u5dde":101301101},{"\u66f2\u9756":101290401},{"\u6f5c\u6c5f":101201701},{"\u743c\u4e2d":101310208},{"\u743c\u6d77":101310211},{"\u743c\u5c71":101310102},{"\u9ed4\u9633":101251301},{"\u4e03\u53f0\u6cb3":101051002}],M:[{"\u9a6c\u978d\u5c71":101220501},{"\u6885\u5dde":101280401},{"\u8302\u540d":101282001},{"\u7ef5\u9633":101270401},{"\u7709\u5c71":101271501},{"\u7261\u4e39\u6c5f":101050301}],C:[{"\u91cd\u5e86":101040100},{"\u6210\u90fd":101270101},{"\u957f\u6c99":101250101},{"\u957f\u6625":101060101},{"\u6c88\u9633":101070101},{"\u660c\u5e73":101010700},{"\u627f\u5fb7":101090402},{"\u5d07\u660e":101021100},{"\u6ca7\u5dde":101090701},{"\u6ec1\u5dde":101221101},{"\u5de2\u6e56":101221601},{"\u6c60\u5dde":101221701},{"\u957f\u5bff":101041e3},{"\u57ce\u53e3":101041600},{"\u6f6e\u5dde":101281501},{"\u5d07\u5de6":101300201},{"\u695a\u96c4":101290801},{"\u8d64\u5cf0":101080601},{"\u957f\u6cbb":101100501},{"\u660c\u5409":101130401},{"\u660c\u90fd":101140501},{"\u6f84\u8fc8":101310204},{"\u660c\u6c5f":101310206},{"\u90f4\u5dde":101250501},{"\u5e38\u5fb7":101250601},{"\u5e38\u5dde":101191101}],L:[{"\u62c9\u8428":101140101},{"\u5eca\u574a":101090601},{"\u6d1b\u9633":101180901},{"\u516d\u5b89":101221501},{"\u4e3d\u6c5f":101291401},{"\u4e3d\u6c34":101210801},{"\u6881\u5e73":101042300},{"\u9f99\u5ca9":101230701},{"\u5170\u5dde":101160101},{"\u4e34\u590f":101161101},{"\u67f3\u5dde":101300301},{"\u6765\u5bbe":101300401},{"\u516d\u76d8\u6c34":101260801},{"\u4e34\u6ca7":101291101},{"\u4e34\u6cb3":101080801},{"\u6cf8\u5dde":101271001},{"\u4e50\u5c71":101271401},{"\u51c9\u5c71":101271601},{"\u4e34\u6c82":101120901},{"\u83b1\u829c":101121601},{"\u804a\u57ce":101121701},{"\u4e34\u6c7e":101100701},{"\u5415\u6881":101101100},{"\u6797\u829d":101140401},{"\u4e34\u9ad8":101310203},{"\u9675\u6c34":101310216},{"\u4e50\u4e1c":101310221},{"\u5a04\u5e95":101250801},{"\u8fde\u4e91\u6e2f":101191001},{"\u8fbd\u6e90":101060701},{"\u8fbd\u9633":101071001}],A:[{"\u5b89\u9633":101180201},{"\u5b89\u5e86":101220601},{"\u5b89\u987a":101260301},{"\u963f\u62c9\u5584\u5de6\u65d7":101081201},{"\u963f\u575d":101271901},{"\u5b89\u5eb7":101110701},{"\u963f\u62c9\u5c14":101130701},{"\u963f\u514b\u82cf":101130801},{"\u963f\u52d2\u6cf0":101131401},{"\u963f\u56fe\u4ec0":101131501},{"\u963f\u91cc":101140701},{"\u978d\u5c71":101070301}],J:[{"\u6d4e\u5357":101120101},{"\u5409\u6797":101060201},{"\u6d4e\u5b81":101120701},{"\u4f73\u6728\u65af":101050401},{"\u84df\u53bf":101031400},{"\u9759\u6d77":101030900},{"\u6d25\u5357":101031e3},{"\u5609\u5b9a":101020500},{"\u91d1\u5c71":101020700},{"\u7126\u4f5c":101181101},{"\u6d4e\u6e90":101181801},{"\u5609\u5174":101210301},{"\u91d1\u534e":101210901},{"\u6c5f\u6d25":101040500},{"\u664b\u6c5f":101230509},{"\u91d1\u660c":101160601},{"\u5609\u5cea\u5173":101161401},{"\u9152\u6cc9":101160801},{"\u6c5f\u95e8":101281101},{"\u63ed\u9633":101281901},{"\u666f\u6d2a":101291601},{"\u96c6\u5b81":101080401},{"\u666f\u5fb7\u9547":101240801},{"\u4e5d\u6c5f":101240201},{"\u5409\u5b89":101240601},{"\u8346\u5dde":101200801},{"\u8346\u95e8":101201401},{"\u664b\u4e2d":101100401},{"\u664b\u57ce":101100601},{"\u5409\u9996":101251501},{"\u9e21\u897f":101051101},{"\u9526\u5dde":101070701}],W:[{"\u6b66\u6c49":101200101},{"\u4e4c\u9c81\u6728\u9f50":101130101},{"\u65e0\u9521":101190201},{"\u6e29\u5dde":101210701},{"\u6b66\u6e05":101030200},{"\u829c\u6e56":101220301},{"\u4e07\u76db":101040600},{"\u4e07\u5dde\u9f99\u5b9d":101041300},{"\u5deb\u6eaa":101041800},{"\u5deb\u5c71":101042e3},{"\u6b66\u9686":101043100},{"\u6b66\u5a01":101160501},{"\u6b66\u90fd":101161001},{"\u68a7\u5dde":101300601},{"\u6587\u5c71":101290601},{"\u4e4c\u6d77":101080301},{"\u4e4c\u5170\u6d69\u7279":101081101},{"\u5434\u5fe0":101170301},{"\u6f4d\u574a":101120601},{"\u5a01\u6d77":101121301},{"\u6e2d\u5357":101110501},{"\u6587\u660c":101310212},{"\u4e07\u5b81":101310215},{"\u4e94\u6307\u5c71":101310222}],X:[{"\u53a6\u95e8":101230201},{"\u897f\u5b81":101150101},{"\u897f\u5b89":101110101},{"\u971e\u4e91\u5cad":101012100},{"\u897f\u9752":101030500},{"\u90a2\u53f0":101090901},{"\u65b0\u4e61":101180301},{"\u8bb8\u660c":101180401},{"\u4fe1\u9633":101180601},{"\u5ba3\u57ce":101221401},{"\u79c0\u5c71":101043600},{"\u5174\u4e49":101260906},{"\u9999\u683c\u91cc\u62c9":101291301},{"\u9521\u6797\u6d69\u7279":101080901},{"\u65b0\u4f59":101241001},{"\u4ed9\u6843":101201601},{"\u8944\u6a0a":101200201},{"\u5b5d\u611f":101200401},{"\u54b8\u5b81":101200701},{"\u54b8\u9633":101110200},{"\u5ffb\u5dde":101101001},{"\u897f\u6c99":101310217},{"\u6e58\u6f6d":101250201},{"\u5f90\u5dde":101190801}],P:[{"\u5e73\u8c37":101011500},{"\u6d66\u4e1c":101021300},{"\u5e73\u9876\u5c71":101180501},{"\u6fee\u9633":101181301},{"\u5f6d\u6c34":101043200},{"\u5e73\u51c9":101160301},{"\u666e\u6d31":101290901},{"\u840d\u4e61":101240901},{"\u6500\u679d\u82b1":101270201},{"\u76d8\u9526":101071301}],B:[{"\u5317\u4eac":101010100},{"\u516b\u8fbe\u5cad":101011600},{"\u5b9d\u577b":101030300},{"\u5317\u8fb0":101030600},{"\u5b9d\u5c71":101020300},{"\u4fdd\u5b9a":101090201},{"\u4eb3\u5dde":101220901},{"\u868c\u57e0":101220201},{"\u5317\u789a":101040800},{"\u5df4\u5357":101040900},{"\u74a7\u5c71":101042900},{"\u767d\u94f6":101161301},{"\u767e\u8272":101301001},{"\u5317\u6d77":101301301},{"\u6bd5\u8282":101260701},{"\u4fdd\u5c71":101290501},{"\u5305\u5934":101080201},{"\u5df4\u4e2d":101270901},{"\u6ee8\u5dde":101121101},{"\u5b9d\u9e21":101110901},{"\u535a\u4e50":101131601},{"\u767d\u6c99":101310207},{"\u4fdd\u4ead":101310214},{"\u767d\u5c71":101060901},{"\u767d\u57ce":101060601},{"\u672c\u6eaa":101070501}],H:[{"\u54c8\u5c14\u6ee8":101050101},{"\u6d77\u53e3":101310101},{"\u547c\u548c\u6d69\u7279":101080101},{"\u547c\u4f26\u8d1d\u5c14":101081e3},{"\u6000\u67d4":101010500},{"\u6c49\u6cbd":101030800},{"\u8861\u6c34":101090801},{"\u90af\u90f8":101091001},{"\u9e64\u58c1":101181201},{"\u5408\u80a5":101220101},{"\u6dee\u5357":101220401},{"\u9ec4\u5c71":101221001},{"\u6dee\u5317":101221201},{"\u676d\u5dde":101210101},{"\u6e56\u5dde":101210201},{"\u5408\u5ddd":101040300},{"\u5408\u4f5c":101161201},{"\u60e0\u5dde":101280301},{"\u6cb3\u6e90":101281201},{"\u6cb3\u6c60":101301201},{"\u8d3a\u5dde":101300701},{"\u7ea2\u6cb3":101290301},{"\u9ec4\u5188":101200501},{"\u9ec4\u77f3":101200601},{"\u9ec4\u5357":101150301},{"\u6d77\u5317":101150801},{"\u6d77\u897f":101150701},{"\u6d77\u4e1c":101150201},{"\u6d77\u5357":101150401},{"\u83cf\u6cfd":101121001},{"\u6c49\u4e2d":101110801},{"\u54c8\u5bc6":101131201},{"\u548c\u7530":101131301},{"\u8861\u9633":101250401},{"\u6000\u5316":101251201},{"\u6dee\u5b89":101190901},{"\u9ed1\u6cb3":101050601},{"\u9e64\u5c97":101051201},{"\u846b\u82a6\u5c9b":101071401}],D:[{"\u5927\u8fde":101070201},{"\u5927\u5174":101011100},{"\u5927\u7406":101290201},{"\u5927\u540c":101100201},{"\u5927\u5e86":101050901},{"\u4e1c\u839e":101281601},{"\u4e1c\u4e3d":101030400},{"\u5927\u6e2f":101031200},{"\u57ab\u6c5f":101042200},{"\u5927\u8db3":101042600},{"\u5b9a\u897f":101160201},{"\u90fd\u5300":101260401},{"\u5fb7\u5b8f":101291501},{"\u8fbe\u5dde":101270601},{"\u5fb7\u9633":101272001},{"\u4e1c\u8425":101121201},{"\u5fb7\u5dde":101120401},{"\u4e1c\u65b9":101310202},{"\u510b\u5dde":101310205},{"\u5b9a\u5b89":101310209},{"\u5927\u5174\u5b89\u5cad":101050701},{"\u4e39\u4e1c":101070601}],R:[{"\u65e5\u7167":101121501},{"\u65e5\u5580\u5219":101140201},{"\u8363\u660c":101042700}],G:[{"\u5e7f\u5dde":101280101},{"\u5e7f\u5b89":101270801},{"\u5e7f\u5143":101272101},{"\u6842\u6797":101300501},{"\u8d35\u6e2f":101300801},{"\u8d35\u9633":101260101},{"\u8d63\u5dde":101240701},{"\u7518\u5b5c":101271801},{"\u56fa\u539f":101170401},{"\u679c\u6d1b":101150501},{"\u9ad8\u96c4":101340201}]};!function(e){var t=window.jNews=window.jNews||{};var i=t.isPad;var n=e("body");var o=e(".rightbar")[0];function s(e){e=e||new Date;var t=e.getFullYear();var i=e.getMonth()+1;var n=e.getDate();if(i<10){i="0"+i}if(n<10){n="0"+n}return i+"/"+n+"/"+t}function r(e){e.style.display="none";this.wrap=e;this.init()}r.prototype={init:function(){this.wrap.className="weather-citylist-wrap weather-citylist-wrap2";this.genAZ();var t=document.createElement("div");t.className="weather-citylist";this.wrap.appendChild(t);this.listDiv=t;this.genList("\u70ed\u95e8");e(t).bind("click",function(t){var i=t.target||t.srcElement;if(i.tagName.toLowerCase()=="a"){t.preventDefault&&t.preventDefault();var n=i.innerHTML;var o=i.getAttribute("code");c.query(n,o);e.cookie.set("weathercity",n,30)}})},genList:function(t){var i="";if(window.sortedCities){var n=sortedCities[t];if(e.isArray(n)){for(var o=0;o<n.length;o++){for(var s in n[o]){i+='<a href="javascript:" code="'+n[o][s]+'">'+s+"</a>"}}}}this.listDiv.innerHTML=i},genAZ:function(){var t=document.createElement("div");t.className="weather-cityaz";var i="ABCDEFGHJKLMNPQRSTWXYZ".split("");var n='<a href="javascript:" class="weather-az-active">\u70ed\u95e8</a>';for(var o=0;o<i.length;o++){n+='<a href="javascript:">'+i[o]+"</a>"}t.innerHTML=n;this.wrap.appendChild(t);var s=this;var r;e(t).bind("click",function(t){t.preventDefault&&t.preventDefault();var i=t.target||t.srcElement;if(i.tagName.toLowerCase()=="a"){if(r)e.classList.remove(r,"weather-az-active");s.genList(i.innerHTML);r=i;e.classList.add(r,"weather-az-active")}});r=e("a",t)[0]}};function a(t){this.wrap=t;this.$city=e("#weather .city");this.$bg=e(".weather-bg,.sunny",this.wrap);this.tpl={ipQuery:"http://ip.ws.126.net/ipquery",dataUrl:"http://www.163.com/inc/163new/weathercn/tq_id_{citycode}.html"}}a.prototype={toggleCityList:function(e){this.$city.hasClass("weather-city-on")?this.hideCityList(e):this.showCityList()},setFreeze:function(){this.freeze=true;var e=this;setTimeout(function(){e.freeze=false},300)},showCityList:function(){if(this.freeze)return;this.setFreeze();if(this.tmCity){clearTimeout(this.tmCity);this.tmCity=null}this.$citylist.show();this.$citylist[0].offsetTop;this.$city.addClass("weather-city-on");this.$citylist.removeClass("weather-citylist-wrap2")},hideCityList:function(e){if(this.freeze)return;this.setFreeze();this.$citylist.addClass("weather-citylist-wrap2");this.$city.removeClass("weather-city-on");if(e){var t=this;this.tmCity=setTimeout(function(){t.$citylist.hide();t.tmCity=null},300)}else{this.$citylist.hide()}},init:function(){if(this.inited)return;this.inited=true;var t=(new Date).getDay();var i=["\u661f\u671f\u5929","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"];e(".weather-day",this.wrap).html(i[t]);e(".weather-date",this.wrap).html(s());var n=document.createElement("div");var o=new r(n);this.wrap.appendChild(n);this.$citylist=e(n);var a=this;this.$city.bind("click",function(e){e.preventDefault&&e.preventDefault();a.toggleCityList(true)});e(document).bind("click",function(e){e=e||window.event;var t=e.target||e.srcElement;if(t!=a.$city[0]&&!l(t,a.$citylist[0])){a.hideCityList(true)}});var c=e.cookie.get("weathercity");if(c){var u=this.getCitycode(c);if(!u){c="\u5317\u4eac";u=101010100}this.query(c,u)}else{this.queryByIP()}},queryByIP:function(){var t=this;e.load.js(this.tpl.ipQuery,function(){var e;var i=window.lc.replace(/\u5e02/,"");e=t.getCitycode(i);if(!e){i=window.lo.replace(/\u5e02/,"");e=t.getCitycode(i);if(!e){i="\u5317\u4eac";e=101010100}}t.query(i,e)},"gbk")},getCitycode:function(e){var t=window.sortedCities;if(!t)return"";var i;for(var n in t){for(var o=0;o<t[n].length;o++){if(t[n][o][e]){i=t[n][o][e];break}if(i)break}}return i},query:function(t,i){var n=this;this.hideCityList();this.$bg[0].className="weather-bg weather-notrans";this.$city.html(t);var o=e(".weather-name",n.wrap);o.html("\u83b7\u53d6\u4e2d.");var s=e(".weather-deg",n.wrap);s.html("&nbsp;-");if(!i)return;e.load.js(e.template.replace(this.tpl.dataUrl,{citycode:i}),function(){if(!window.cityWeather)return;o.html(cityWeather.weatherinfo.weather);var e=parseInt(cityWeather.weatherinfo.temp1);var t=parseInt(cityWeather.weatherinfo.temp2);var i=Math.max(e,t);var r=Math.min(e,t);s.html(r+"~"+i+"<label>&#176;</label>").attr("title",r+"~"+i+"\u5ea6");var a={8:7,9:7,21:7,22:7,11:10,12:10,23:10,24:10,25:10,53:18,5:4,29:20,30:20,31:20,13:26,14:26,15:26,19:6,17:16,27:16,28:16};var l=cityWeather.weatherinfo.img1.replace(/[nd](\d+)\.gif/,"$1");l=a[l]||l;n.$bg.removeClass("weather-notrans").addClass("weather-"+l)},"gbk")}};function l(e,t){while(e&&e.tagName){if(e==t)return true;if(e.tagName.toLowerCase()=="body")break;e=e.parentNode}return false}var c=new a(document.getElementById("weather"));function u(){var t=document.documentElement.clientWidth||window.innerWidth;var o=t<=1250;o=t<760||(e.wf&&e.wf.state&&e.wf.state.compact||t>=950)&&t<=1250;e.hideside=o;n[o?"removeClass":"addClass"]("showside");if(!i){n[t<1250?"addClass":"removeClass"]("sub1200");n[t<1100?"addClass":"removeClass"]("hidetools");n[t<950?"addClass":"removeClass"]("sub1000");n[t<740?"addClass":"removeClass"]("sub740");setTimeout(function(){if(!o)c.init()},250)}setTimeout(function(){e.ie6fixtop&&e.ie6fixtop();if(e.adjustMenu)e.adjustMenu()},0)}var d;u();e(window).bind("resize",function(){if(d)return;d=setTimeout(function(){u();d=null},60)})}(NE);!function(e,t){var i=window.jNews=window.jNews||{};var n=i.msie;e.dom.pos=function(e){var t={x:0,y:0};if(!e)return t;t.x=e.offsetLeft;t.y=e.offsetTop;while(e.offsetParent){t.x+=e.offsetParent.offsetLeft;t.y+=e.offsetParent.offsetTop;e=e.offsetParent}return t};e.slide=function(t,i,n){n=n||{};var o=t.state={activecls:"current",scroll:"Left",cursor:0};var s,r,a;var l;t.show=function(i){i=i<0?0:i>=l?l-1:i;if(t.onShow){if(t.onShow(i)===false)return}var n="scroll"+o.scroll;var c=r[0].offsetWidth;if(s){var u=e(s[i]);s.removeClass(o.activecls);u&&u.addClass(o.activecls)}var d=c*i;if(r){var h={};h[n]=d;r.animate(h)}if(a)e.classList.remove(a,"active");e.classList.add(a=s[i],"active");o.cursor=i};t.pause=function(){if(t._playTimer){clearInterval(t._playTimer);delete t._playTimer;if(t.onStop){t.onStop(o.cursor)}}};r=i.find(".slide-body");if(!r[0])return;s=i.find(".slide-nav");l=o.total||s&&s.length;i.find(".slide-scroll").css({width:l*r[0].offsetWidth+10});if(!l)return;if(s&&s.length){s.each(function(i){e.event.add(this,n.event||"click",function(e){if(!o.noprevent)e.preventDefault();t.show(i)})})}t.show(o.cursor)};e.Route=function(t){var i=this;this.supportHtml5=!!window.history.pushState;this.state=t||{};this.rules=[];this.root="/";this.count=0;e(window).bind("hashchange",function(){if(i.hashing)return;i.history=true;i.redirect();i.history=false})};e.Route.prototype={define:function(e){for(var t in e){this.rules.push({reg:e[t],ctrl:t})}},redirect:function(t){t=(t||location.hash).replace(/^#/,"").replace(/[\?#].*/,"");var i;for(var n=0,o=this.rules.length;n<o;n++){var s=this.rules[n];var r=this[s.ctrl];if(e.isFunction(r)){if(i=s.reg.exec(t)){return r.apply(this,i.slice(1))}}}return this[this.rules[0].ctrl]()},save:function(t,i){var n=this,o=location.href;if(n.history){n.history=false;n.stat(o);return}n.hashing=true;if(n.inited)location.hash=t;setTimeout(function(){n.hashing=false},1e3);if(n.inited&&n.supportHtml5&&e.validHost&&/brief\/99\/card/.test(t)){window.history.replaceState({path:t},u.title,n.root)}n.inited=true;n.stat(o)},stat:function(e){if(++this.count==1)return;setTimeout(function(){if("undefined"!==typeof NTESLogger){NTESLogger.log({event:"jnews",cdata:JSON.stringify({ref:encodeURIComponent(e),url:encodeURIComponent(location.href)})})}},200);if(this.ep2list)return;setTimeout(function(){"function"===typeof vjEventTrack&&vjEventTrack();"function"===typeof neteaseTracker&&neteaseTracker()},150)}};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,30)};var s="",r,a,l,c={Webkit:"webkit",Moz:"",O:"o"},u=window.document,d=u.createElement("div"),h=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,f,p,m,v,g,y,w,b,T,C={};function x(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function k(e){return r?r+e:e.toLowerCase()}e.array.each(c,function(e,i){if(d.style[e+"TransitionProperty"]!==t){s="-"+e.toLowerCase()+"-";r=i;return false}});f=s+"transform";C[p=s+"transition-property"]=C[m=s+"transition-duration"]=C[g=s+"transition-delay"]=C[v=s+"transition-timing-function"]=C[y=s+"animation-name"]=C[w=s+"animation-duration"]=C[T=s+"animation-delay"]=C[b=s+"animation-timing-function"]="";e.fx={off:r===t&&d.style.transitionProperty===t,speeds:{_default:350,fast:200,slow:600},cssPrefix:s,transitionEnd:k("TransitionEnd"),animationEnd:k("AnimationEnd")};e.fn.stop=function(){this.startTime=0;return this};e.fn.animate=function(i,n,o,s,r){if(e.isFunction(n))s=n,o=t,n=t;if(e.isFunction(o))s=o,o=t;if(e.isPlainObject(n))o=n.easing,s=n.complete,r=n.delay,n=n.duration;if(n)n=(typeof n=="number"?n:e.fx.speeds[n]||e.fx.speeds._default)/1e3;if(r)r=parseFloat(r)/1e3;return this.anim(i,n,o,s,r)};e.fn.anim=function(i,n,s,r,a){if(!this[0])return this;var l,c={},u={},d,k="",S=this,N,L=e.fx.transitionEnd,M=false;var $=false,A=false;if(n===t)n=e.fx.speeds._default/1e3;if(a===t)a=0;if(typeof i=="string"){c[y]=i;c[w]=n+"s";c[T]=a+"s";c[b]=s||"linear";L=e.fx.animationEnd}else{d=[];for(l in i)if(h.test(l))k+=l+"("+i[l]+") ";else c[l]=i[l],d.push(x(l));if(k)c[f]=k,d.push(f);if(n>0&&typeof i==="object"){for(l in c){if(e.fx.off||l!=f&&!j(l)){$=true;u[l]=_(this[0],l)}else{A=true;c[p]=d.join(", ");c[m]=n+"s";c[g]=a+"s";c[v]=s||"linear"}}}}N=function(t){if(typeof t!=="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(L,N)}else e(this).unbind(L,N);M=true;e(this).css(C);r&&r.call(this)};if(n>0){this.bind(L,N);setTimeout(function(){if(M)return;N.call(S)},n*1e3+25)}if($){var D=this.startTime=new Date;var P=function(){if(S.startTime!=D)return;var e=new Date-D;var t=e/n/1e3;var i={};for(l in u){i[l]=I(u[l],c[l],t)}if(e<n*1e3){S.each(function(){E(this,i)});o(P)}else{S.each(function(){E(this,c)})}};P()}else{this[0].clientLeft;this.css(c)}return this};function _(t,i){i=e.string.camelCase(i);if(j(i)){if(t.currentStyle){return t.currentStyle[i]||""}else if(window.getComputedStyle){return window.getComputedStyle(t,null)[i]}return""}else{return t[i]}}function E(t,i){var o="";for(var s in i){var r=i[s];s=e.string.camelCase(s);if(h.test(s)){o+=s+"("+r+") ";continue}if(j(s)){if(n<=8&&s=="opacity"){var a=_(t,"filter")||"",l=/alpha\([^\)]*\)/;r="alpha(opacity="+Math.round(100*parseFloat(r))+")";t.style.filter=l.test(a)?a.replace(l,r):r;continue}if(typeof r==="number"&&!NE.classList.cssNumber[s]){r=r+"px"}t.style[s]=r}else{t[s]=r}}if(o){t.style[e.string.camelCase(f)]=o}}i.setStyle=E;function I(e,t,i){var n=e.toString().match(/[-\d]+/)||[],o=0;return t.toString().replace(/[-\d]+/g,function(e){var t=parseInt(n[o++])||0;return t*(1-i)+e*i})}e.fn.incnum=function(e){this.each(function(){var t=parseInt(this.innerHTML.replace(/,/g,""));this.innerHTML=t+(e||1)});return this};function j(e){return e=="opacity"||h.test(e)||typeof d.style[e]!="undefined"
}e.load.jsonp2=function(e,t){if(!e||!e.url)return;var i=e.url;var n=e.data||{};n=NE.json.encode(n);if(n){i+=(i.indexOf("?")>-1?"&":"?")+n}var o=u.body;var s="n"+String.fromCharCode(97+Math.floor(25*Math.random()))+S(e.url.replace(/.*?\/hy/,""));window[s]=t;var r=u.createElement("script");if(e.charset){r.charset=e.charset}r.src=i+(i.indexOf("?")>-1?"&":"?")+"callback="+s;o.appendChild(r);function a(){r.onreadystatechange=r.onload=r.onerror=null;o.removeChild(r)}r.onreadystatechange=r.onload=r.onerror=function(){if(!r.readyState||/loaded|complete/.test(r.readyState)){a()}}};function S(e){function t(e){return unescape(encodeURIComponent(e))}var i=function(e,t){return e<<t|e>>>32-t},n=function(e){var t="",i,n;for(i=7;i>=0;i--){n=e>>>i*4&15;t+=n.toString(16)}return t},o,s,r,a=[],l=1732584193,c=4023233417,u=2562383102,d=271733878,h=3285377520,f,p,m,v,g,y,w,b=[];e=t(e);w=e.length;for(s=0;s<w-3;s+=4){r=e.charCodeAt(s)<<24|e.charCodeAt(s+1)<<16|e.charCodeAt(s+2)<<8|e.charCodeAt(s+3);b.push(r)}switch(w&3){case 0:s=2147483648;break;case 1:s=e.charCodeAt(w-1)<<24|8388608;break;case 2:s=e.charCodeAt(w-2)<<24|e.charCodeAt(w-1)<<16|32768;break;case 3:s=e.charCodeAt(w-3)<<24|e.charCodeAt(w-2)<<16|e.charCodeAt(w-1)<<8|128;break}b.push(s);while((b.length&15)!==14){b.push(0)}b.push(w>>>29);b.push(w<<3&4294967295);for(o=0;o<b.length;o+=16){for(s=0;s<16;s++){a[s]=b[o+s]}for(s=16;s<=79;s++){a[s]=i(a[s-3]^a[s-8]^a[s-14]^a[s-16],1)}f=l;p=c;m=u;v=d;g=h;for(s=0;s<=19;s++){y=i(f,5)+(p&m|~p&v)+g+a[s]+1518500249&4294967295;g=v;v=m;m=i(p,30);p=f;f=y}for(s=20;s<=39;s++){y=i(f,5)+(p^m^v)+g+a[s]+1859775393&4294967295;g=v;v=m;m=i(p,30);p=f;f=y}for(s=40;s<=59;s++){y=i(f,5)+(p&m|p&v|m&v)+g+a[s]+2400959708&4294967295;g=v;v=m;m=i(p,30);p=f;f=y}for(s=60;s<=79;s++){y=i(f,5)+(p^m^v)+g+a[s]+3395469782&4294967295;g=v;v=m;m=i(p,30);p=f;f=y}l=l+f&4294967295;c=c+p&4294967295;u=u+m&4294967295;d=d+v&4294967295;h=h+g&4294967295}y=n(l)+n(c)+n(u)+n(d)+n(h);return y.toLowerCase().substr(0,15)}}(NE);!function(e){"use strict";if(location.host.indexOf("j.news")==-1)return;var t=e(".commend-listwrap .mainarea, .main-wrapper .mainarea");var i=e(".rightbar")[0];e.ready(function(){e.lastRec=new n});function n(){var t="recent-item-hover";var i=this;i.minH=0;i.scrollTimeout=false;i.$wrap=e(".recent-item-list-wrapper");i.tmpl=document.getElementById("recentitem").innerHTML;i.cache=[];i._lis=[];i.avaNum=0;i.interval=8e3;i.$wrap.bind("mouseover",function(n){i.stop();var s=o(n,this);if(s){e.classList.add(s,t)}}).bind("mouseout",function(n){i.start();var s=o(n,this);if(s){e.classList.remove(s,t)}});i.load();i._initWin()}n.prototype={load:function(){var t=this;if(t.inited||!t.visible||t.locked)return;if(e.hideside)return;if(e.endpage&&e.endpage.active)return;var i=t.$wrap[0];t.locked=true;e.load.ajax({url:"/lastRec.js",charset:"utf-8",dataType:"json"},function(n){var o=t.pushData(n);setTimeout(function(){t.locked=false;if(o){var s=i.children;i.innerHTML=e.template.replace(t.tmpl,n)+i.innerHTML;t.show(o)}else{t.start(t.inited)}},50)})},_initWin:function(){var t=this;function i(){var e=document.body.scrollTop||document.documentElement.scrollTop;var i=document.documentElement.clientHeight||window.innerHeight;t.onscroll(e,i)}i();e(window).bind("scroll",i)},show:function(e){this.avaNum=this.inited?e:2;var t=this.$wrap[0];var i=this.$wrap.find(".recent-item");var n=0;for(var o=0;o<this.avaNum;o++){n-=i[o].offsetHeight}t.style.top=n+"px";this.start();this.inited=true;this.setHeight()},step:function(){if(e.endpage&&e.endpage.active)return;var t=this.$wrap.find(".recent-item");var i=0;this._throttle--;if(this.avaNum==0){if(t.length==0||this._throttle<0){this.stop();this.load()}else{this.nullRotate();this.removeLast()}}else{this.avaNum--;for(var n=0;n<this.avaNum;n++){if(t[n]){i-=t[n].offsetHeight}}this.$wrap.animate({top:i},500);this.setHeight();this.removeLast()}},removeLast:function(){var t=this;var i=t.$wrap[0];if(i.children.length>5){var n=i.lastChild;while(n&&n.nodeType!=1){n=n.previousSibling}if(n){var o=n.style.opacity!==void 0;var s=o?{opacity:0}:{filter:"alpha(opacity=0)"};var r=o?{opacity:1}:{filter:"alpha(opacity=100)"};t._lis.push(n.cloneNode(true));e(n).css(r).animate(s,600,function(){try{i.removeChild(n)}catch(e){}})}}},nullRotate:function(){var e=this.$wrap[0];if(e.children.length>3){var t=e.lastChild;while(t&&t.nodeType!=1){t=t.previousSibling}if(t){e.insertBefore(this._lis.shift()||t.cloneNode(true),e.firstChild);this.$wrap.css({top:-t.offsetHeight}).animate({top:0},500)}}},setHeight:function(){if(i&&t[0]){var e=i.offsetHeight;if(e&&e>this.minH){this.minH=e;t.css({minHeight:e})}}},pushData:function(e){var t=e.length,i,n;if(t){var o=this.cache[0];if(o){for(i=0;i<t;i++){n=e[i];if(n.docid==o.docid&&n.passport==o.passport){e.splice(i);break}}}t=e.length}if(t){this.cache.splice(10);for(i=0;i<t;i++){n=e[i];n.url_163=n.url_163||"/#detail/99/"+n.docid}this.cache=e.concat(this.cache)}return t},start:function(e){var t=this;if(t.locked||t.scrollTimeout)return;t._throttle=5;var i=t.interval;t.scrollTimeout=setTimeout(n,e?0:i);function n(){t.scrollTimeout=setTimeout(n,i);t.step()}},stop:function(){if(this.scrollTimeout){clearTimeout(this.scrollTimeout);this.scrollTimeout=null}},onscroll:function(e,t){var i=this.$wrap[0];e+=60;var n=e+t;var o=i.parentNode.offsetTop;var s=o+i.offsetHeight;if(n>=o&&e<=s){this.visible=true;this.inited?this.start():this.load()}else{this.visible=false;this.stop()}}};function o(t,i){t=t||window.event;var n=t.target||t.srcElement;while(n&&n!=i){if(e.classList.contains(n,"recent-item")){return n}n=n.parentNode}return null}}(NE);!function(e){var t=navigator.userAgent.toLowerCase();if(/msie 6/.test(t)){if(!e.cookie.get("wiz")){e.stat&&e.stat.setPage("ic");e.cookie.set("wiz",1,1e4)}return}var i=document.body;var n=e(i);var o=function(e){if(/(32|33|34|35|36|37|38|39|40)/.test(e.keyCode)){s(e)}};var s=function(t){if(e.wizard.type=="sidetool"){d();return}if(window.event&&window.event.cancelBubble){window.event.cancelBubble=true}else if(t&&t.stopPropagation){t.stopPropagation()}t.preventDefault&&t.preventDefault()};var r=e.cookie.get("wiz").split("");if(r.length<3){r="000".split("")}var a=[];var l=document.createElement("div");l.className="wizard-mask";l.style.display="none";i.appendChild(l);var c=document.createElement("div");c.style.display="none";var u=document.createElement("a");c.appendChild(u);function d(){p();var t=a.pop();if(t){e.wizard.run(t)}}i.appendChild(c);function h(){e.cookie.set("wiz",r.join(""),1e4)}function f(t){e.wizard.active=true;n.bind("DOMMouseScroll",s);window.onmousewheel=s;n.bind("keydown",o);c.className="wizard "+t;c.style.display="block";l.style.display="block";n.bind("click",d);e.stat&&e.stat.setPage("i"+e.wizard.type)}function p(){c.style.display="none";l.style.display="none";e.stat&&e.stat.setPage("ic");e.wizard.active=false;n.unbind("click",d);n.unbind("DOMMouseScroll",s);window.onmousewheel=null;n.unbind("keydown",o);if(e.wizard.onEnd)e.wizard.onEnd();h()}e.wizard={run:function(t){this.type=t;if(typeof this[t]=="function"){if(e.wizard.active){a.push(t);return}this[t]()}},notlike:function(){if(r[0]!=1){if(e.endpage&&e.endpage.active)return;var t=e(".card")[0];if(t){f("wizard-notlike");e.classList.add(t,"hover");var i=e.dom.pos(e(".btn-close",t)[0]);c.style.left=i.x+"px";c.style.top=i.y+"px";this.onEnd=function(){r[0]=1;e.classList.remove(t,"hover")}}}},login:function(){if(r[1]!=1){if(!e.endpage)return;if(e.endpage.active){a.push("login");return}var t=e("#user-rightbar-login")[0];if(e.hideside||!t){t=e("#js_N_login_wrap")[0];if(t){t.style.display="block";var i=e.dom.pos(t);c.style.left=i.x+"px";c.style.top=i.y+"px";f("wizard-login");this.onEnd=function(){t.style.display="none";r[1]=1}}}else{var i=e.dom.pos(t);c.style.left=i.x+"px";c.style.top=i.y+"px";f("wizard-login");this.onEnd=function(){r[1]=1}}}},sidetool:function(){if(r[2]!=1){r[2]=1;var t=e(".ep-righttools")[0];if(t){var i=e.dom.pos(t);c.style.left=i.x+"px";c.style.top=i.y+"px";f("wizard-sidetool");this.onEnd=function(){r[2]=1}}}}}}(NE);!function(e){var t=window.jNews=window.jNews||{};var i=/(android|ipad|ipod|blackberry|mobile|phone)/i.test(navigator.userAgent),n;var o=e(".mainnav")[0],s;t.photoFilter=function(e){var t;for(var i=0;i<e.length;i++){var n=e[i];if(n.length<250||n.width<250){t=e.splice(i--,1)}}if(e.length==0)e.push(t[0])};var r,a;var l={pageSize:12,allowZoomIn:false,compactWidth:1050};var c,u,d;var h,f;var p=e("body");var m,v,g,y,w;var b,T,C,x,k,_,E,I,j,S,N;var L,M;var $,A;var D;var P=true;var H;var F={fade:function(e,t,i){t.css({zIndex:6}).animate({opacity:0});e.css({zIndex:7}).animate({opacity:1},i)},shift:function(e,i,n,o){var s=o*(C[0].offsetWidth+5);i.animate({translate3d:-s+"px,0,0"});t.setStyle(e[0],{translate3d:s+"px,0,0"});e.animate({translate3d:"0,0,0"},n)}};function O(t){_=e(".picinfo");g=_.find(".numerator");y=_.find(".progress");var i=_.find(".picinfo-text-wrap");j=i.find(".picinfo-text");if(!j[0]){var n=document.createElement("div");n.className="picinfo-text";n.innerHTML='<span class="photo-note"></span>';i[0].appendChild(n);j=e(n)}if(E[0]){S=j[0].children[0];_.bind("mouseover",function(){j.animate({height:Math.max(S.offsetHeight,40)},300)}).bind("mouseout",function(){j.animate({height:40})})}T=_.find(".photo-note")}function R(t,i,n){i=i||h.width;n=n||h.height;if(i&&n){var o=Math.min(l.maxWidth/i,l.maxHeight/n);if(o>1&&!l.allowZoomIn)o=1;var s=i*o,r=n*o;e.classList.setStyle(t,{width:s,height:r,marginLeft:-s/2,marginTop:-r/2})}else if(typeof i=="undefined"){var a=t.children[0];if(a&&(a.readyState=="complete"||a.complete)){if(a.width)R(t,a.width,a.height)}}}function B(t,n){var o=a[t];if(o){delete a[t];return o}var s=r.list[t];if(!s)return null;o=document.createElement("div");o.className="photo-wrap";!i&&e.classList.setStyle(o,{visibility:"hidden",opacity:0});var l=new Image,c,u;if(!h.width){l.onload=function(){l.onload=null;c=l.width;u=l.height;e.classList.setStyle(o,{visibility:"visible"});R(o,c,u)}}else{e.classList.setStyle(o,{visibility:"visible"})}o.appendChild(l);l.src=s.url;if(n)a[t]=o;return o}function U(){_.removeClass("picinfo-fold")}function z(){_.addClass("picinfo-fold")}var W;function q(t){if(M){if(W)W.removeClass("current");(W=e(M[t])).addClass("current")}}function V(t){if(typeof l.cursor!="undefined")X();if(l.cursor===t)return;var n=t>l.cursor?1:-1;if(L.state){var o=Math.floor(t/l.pageSize);if(o!=L.state.cursor){L.show(o)}q(t)}h={width:r.list[t].width,height:r.list[t].height||r.list[t].length};var s=B(t);g.html(t+1);if(T[0])T[0].innerHTML=r.list[t].note||r.title||"";C[0].replaceChild(s,k[0]);R(s);k=x;x=e(s);y.css({marginLeft:Math.max(12,g[0].offsetWidth-10)});F[i?"shift":"fade"](x,k,function(){if(E[0]){if(s.offsetWidth<400){d=Math.max((C[0].offsetHeight-s.offsetHeight)/2-_[0].offsetHeight,0);_.css({marginBottom:d});C[0].appendChild(_[0])}else{if(d){d=0;_.css({marginBottom:0})}s.appendChild(_[0])}}},n);B(t>=r.list.length-1?0:t+1,true);var a=location.hash.replace(/^#/,""),c="p="+r.list[t].id;if(!a)location.hash=c;else if(/(^|\?)p=/.test(a))location.hash=a.replace(/(^|\?)p=.*|$/,"$1"+c);else location.hash=a+"?"+c;if(typeof l.cursor!="undefined")setTimeout(ot,50);if(E[0]&&typeof l.cursor!="undefined"){var u=document.body.scrollTop||document.documentElement.scrollTop;var f=document.documentElement.clientHeight||window.innerHeight;var p=e.dom.pos(m).y+m.offsetHeight-u-f;if(p>20){u=Math.min(u+p-20,e.dom.pos(m).y-70);document.body.scrollTop=u;document.documentElement.scrollTop=u}}l.cursor=t}function Y(){if(i)G(0);if(!$){$=true;if(P){var t=document.createElement("div");t.innerHTML='<div class="photoset-mask"></div>';t.appendChild(I.find(".photo-backcover-top")[0]);C[0].appendChild(t);I=e(t)}I.find(".goback").bind("click",X);I.find(".replay").bind("click",function(){V(0);return false})}if(!P){v.hide()}I.show();_.hide();Z()}function X(){if(!P){v.show()}I.hide();_.show();Q();return false}function Z(){var t=e.endpage;if(i||!E[0]||t&&!t.active)return;var n=document.getElementById("epContentRight");if(!n)return;s=n.parentNode;if(D){if(n){E.css({visibility:"hidden"});o.insertBefore(n,o.lastChild)}}}function Q(){var t=e.endpage;if(i||!E[0]||t&&!t.active)return;var n=document.getElementById("epContentRight");if(!n)return;if(t){s=t.doms.fixedParent}if(s){s.insertBefore(n,s.firstChild);E.css({visibility:"visible"})}}function G(e){t.setStyle(x[0],{translate3d:e+"px,0,0"})}function K(){if(l.cursor>=r.list.length-1){if(I[0]){Y();return}}V(l.cursor>=r.list.length-1?0:l.cursor+1)}function J(){V(l.cursor==0?r.list.length-1:l.cursor-1)}var et;function tt(e){if(et)return;et=true;setTimeout(function(){et=false},300);var t=e.clientX;i||t>=H?K():J()}function it(t){if(!x)return;var i=document.body.offsetWidth;var n=document.documentElement.clientHeight||window.innerHeight;if(typeof t!="function"&&i==c&&n==u)return;c=i;u=n;var o="photoview-wide";if(i>1250)p.addClass(o);else p.removeClass(o);D=i>l.compactWidth;if(!D)Q();l.maxWidth=m.offsetWidth-(D?278:0);E[D?"show":"hide"]();l.maxHeight=Math.max(n-80,400);v.css({width:l.maxWidth});N&&N.css({width:l.maxWidth-3});setTimeout(function(){H=e.dom.pos(C[0]).x+C[0].offsetWidth*.4;if(document.documentElement&&document.documentElement.offsetWidth)H+=(document.documentElement.offsetWidth-document.body.offsetWidth)/2;if(typeof t=="function")t();else R(x[0])},50);nt()}function nt(){var t=l.maxHeight;if(t){var i,n=l.maxWidth*.6;for(var o=0,s=r.list.length;o<s;o++){var a=r.list[o];if(!l.allowZoomIn&&l.maxWidth>a.width){i=a.length}else{i=l.maxWidth*a.length/a.width}if(i>n)n=i}if(n){t=Math.min(t,n)}v.css({height:t});E.css({height:t});b.css({height:t-330});if(e.ie6fix)e.ie6fix()}}function ot(){"function"===typeof vjEventTrack&&vjEventTrack();"function"===typeof neteaseTracker&&neteaseTracker()}function st(){var e;if(/(^|&|\?)p=(\S+?)(&|$)/.test(location.href.replace(/.*?(#|$)/,""))){var t=RegExp.$2;for(var i=0,n=r.list.length;i<n;i++){if(r.list[i].id==t){e=i;break}}}return e}t.photoview=function(t,n){delete l.cursor;N=e(".ep-source");f="";$=false;a={};r={};L={};m=t[0].parentNode;r.list=n.photoset;r.title=n.content||n.title||"";r.relates={photoset:n.relateRecom};v=t.find(".photoarea");E=t.find(".ne-photoset-sidebar");O(t);b=t.find(".viewport");C=t.find(".photoarea");if(!i){C.bind("mousemove",function(e){var t=e.clientX;if(t>=H&&f!="next"){f="next";C.addClass("cursor-right").removeClass("cursor-left")}else if(t<H&&f!="prev"){f="prev";C.addClass("cursor-left").removeClass("cursor-right")}})}x=t.find(".photo-a");k=t.find(".photo-b");I=e(".photo-backcover");M=t.find(".tiny_item");it(function(){V(st()||0)});q(l.cursor);var o=function(t){var i=this;var n=t.target,o=e(n);if(o.hasClass("fold")){_.addClass("picinfo-fold")}else if(o.hasClass("unfold")){_.removeClass("picinfo-fold")}else{while(n&&n!=i){if(e.classList.contains(n,"photo-backcover-top"))break;if(e.classList.contains(n,"photoset-mask"))break;if(e.classList.contains(n,"picinfo"))break;if(e.classList.contains(n,"photoarea")){tt(t);return false;break}if(e.classList.contains(n,"tiny_item")){var s=parseInt(n.getAttribute("_id"))||0;V(s);return false;break}n=n.parentNode}}};e(window).bind("resize",it).bind("hashchange",at);t.bind("click",o);if(i){C.bind("touchstart",rt)}var s=t.find(".tiny_views"),c;if(s[0]){e.slide(L,s);s.bind("mouseover",function(){if(c)clearTimeout(c),c=null;s.addClass("tiny_views_hover")}).bind("mouseout",function(){c=setTimeout(function(){s.removeClass("tiny_views_hover")},100)})}return function(){s.unbind("mouseover").unbind("mouseout");e(window).unbind("resize",it).unbind("hashchange",at);t.unbind("click",o);if(i){C.unbind("touchstart",rt)}}};if(i){e(document).bind("touchmove",function(e){if(n){var t=e.changedTouches[0];var i=t.clientX,o=t.clientY;var s=i-n.x,r=o-n.y;if(Math.abs(r)>Math.abs(s)+2){G(0);n=null}else{G(s);e.preventDefault()}}});e(document).bind("touchend",function(t){if(n){var i=t.changedTouches[0];var o=i.clientX,s=i.clientY;var r=o-n.x,a=s-n.y;n=null;var l=t.target;while(l){if(l.tagName&&l.tagName.toLowerCase()=="div")break;l=l.parentNode}if(l&&e.classList.contains(l,"picinfo-text")){t.preventDefault();return}if(Math.abs(r)>Math.abs(a)&&Math.abs(r)>10){r>0?J():K();t.preventDefault()}else if(Math.abs(r)<3&&Math.abs(a)<3){tt({clientX:o});t.preventDefault()}else{G(0)}}})}function rt(t){if(!t.changedTouches)return;var i=t.changedTouches[0];var o=t.target,s=this;while(o&&o!=s){if(e.classList.contains(o,"photo-backcover-top"))return;if(e.classList.contains(o,"photoset-mask"))return;if(e.classList.contains(o,"picinfo"))return;o=o.parentNode}n={x:i.clientX,y:i.clientY}}function at(){var e=st();if(typeof e!="undefined"&&e!=l.cursor){V(e)}}}(NE);!function(e,t,i){var n="yxb5a65281d3114313b34e400bdba41dd3";var o={};var s=(new Date).valueOf();var r={format:function(e){var t=e;for(var i=1;i<arguments.length;i+=1){var n=new RegExp("\\{"+(i-1)+"\\}","gi");t=t.replace(n,arguments[i])}return t},loadJs:function(e,i,n){var o=t.createElement("script");o.type="text/javascript";o.charset=n||"utf-8";o.onload=function(){i&&i();try{t.body.removeChild(o)}catch(e){}};o.src=e;t.body.appendChild(o)},addEvent:function(e,n,o){var s=function(e,t){try{var i=e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&16)}catch(n){}return i?i:false};var r=function(e){if(!e.preventDefault){e.preventDefault=function(){e.returnValue=false}}if(!e.stopPropagation){e.stopPropagation=function(){e.cancelBubble=true}}if(!e.target){e.target=e.srcElement||t}if(e.target.nodeType===3){e.target=e.target.parentNode}if(!e.relatedTarget&&e.fromElement){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}if(e.pageX==null&&e.clientX!=null){var i=e.target.ownerDocument||t;var n=i.documentElement;var o=i.body;e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0);e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}if(e.type=="DOMMouseScroll"||e.type=="mousewheel"){e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}return e};var a=function(e){var t=e.currentTarget,i=e.relatedTarget;if(!s(t,i)&&t!=i){o.call(t,r(e))}};if(e.addEventListener){if(n=="mouseenter"){e.addEventListener("mouseover",a,false)}else if(n=="mouseleave"){e.addEventListener("mouseout",a,false)}else if(n==="mousewheel"&&t["mozHidden"]!==i){e.addEventListener("DOMMouseScroll",a,false)}else{e.addEventListener(n,o,false)}}else{e.attachEvent("on"+n,function(t){o.call(e,r(t))})}},isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},isNodeList:function(e){return Object.prototype.toString.call(e)=="[object NodeList]"},toArray:function(e){return Array.prototype.slice.call(e)},each:function(e,t,i){if(e==null)return;if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach){e.forEach(t,i)}else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++){if(t.call(i,e[n],n,e)==={})return}}else{for(var s in e){if(e.hasOwnProperty(s)){if(t.call(i,e[s],s,e)==={})return}}}},getElementsByClassName:function(e,i,n){var o,s=[];if(t.getElementsByClassName){var r=(i||t).getElementsByClassName(e);for(o=0;i=r[o++];){if(n!=="*"&&i.tagName===n.toUpperCase()){s.push(i)}}return s}else{i=i||t;n=n||"*";var a=e.split(" "),l=n==="*"&&i.all?i.all:i.getElementsByTagName(n),c=[],u,d;o=a.length;while(--o>=0){c.push(new RegExp("(^|\\s)"+a[o]+"(\\s|$)"))}var h=l.length;while(--h>=0){u=l[h];d=false;for(var f=0,p=c.length;f<p;f++){d=c[f].test(u.className);if(!d)break}if(d)s.push(u)}return s}},getScrollOffset:function(){var i=t.documentElement,n=t.body;return e.pageYOffset?[e.pageXOffset,e.pageYOffset]:i&&i.scrollTop?[i.scrollLeft,i.scrollTop]:[n.scrollLeft,n.scrollTop]},getUUID:function(){return++s}};var a={};a.intro='<div class="yx-intro">'+'    <div class="yx-intro-inner">'+'        <div class="yx-intro-text">'+"            <h3>\u5b8c\u6210\u4ee5\u4e0b\u4efb\u52a1\uff0c\u5c31\u53ef\u4ee5\u8f6c\u53d1\u6613\u4fe1\u5566\uff01</h3>"+"            <ol>"+'                <li class="{0}"><a href="http://e.mail.163.com/mobilemail/home.do?from=yixinshare" target="_blank">\u5f00\u901a\u7f51\u6613\u624b\u673a\u53f7\u7801\u90ae\u7bb1</a></li>'+'                <li class="{1}"><a href="http://yixin.im/#f=www" target="_blank">\u624b\u673a\u53f7\u7801\u5f00\u901a\u6613\u4fe1</a></li>'+"            </ol>"+"        </div>"+'        <div class="yx-intro-qr">'+'            <div class="yx-intro-qr-tip" title="\u4e8c\u7ef4\u7801\u5206\u4eab"></div>'+"            <h3>\u626b\u63cf\u4e8c\u7ef4\u7801\u5206\u4eab</h3>"+'            <div class="yx-intro-qr-img">'+'                <img src="about:blank" data-src="http://yixin.news.163.com/yixin/share/qrcode.b?w=180&h=180&content={2}" width="180" height="180" />'+"            </div>"+"        </div>"+"    </div>"+"</div>";a.share='<div class="yx-share">'+"    <h3>{0}</h3>"+'    <div class="yx-summary">'+'        <div class="yx-pic" style=\'background-image: url("http://timge8.126.net/image?h=90&w=90&fill=0&gif=0&quality=80&url={2}")\'></div>'+"        <p>{1}</p>"+"    </div>"+'    <div class="yx-remark">'+'        <input type="text" class="yx-remark-input" maxlength="300" placeholder="\u8bf4\u70b9\u4ec0\u4e48...">'+"    </div>"+'    <div class="yx-bottom cf">'+'        <div class="yx-mobile">'+"            <span>\u7ed1\u5b9a\u7684\u624b\u673a\u5c3e\u6570\u662f\uff1a<b>{3}</b></span>"+'            <a href="https://reg.163.com/mobilealias/index.do" target="_blank">\u6211\u8981\u4fee\u6539</a>'+"        </div>"+'        <a class="yx-sbtn">\u5206\u4eab\u5230\u6613\u4fe1\u670b\u53cb\u5708</a>'+"    </div>"+"</div>";a.msg='<div class="yx-msg">{0}</div>';a.pub='<a href="javascript:void(0);" class="yx-close" target="_self">\xd7</a>';var l=/P_INFO=([^;=]+);/;var c=function(){return l.test(t["cookie"])};var u=function(){var e=t["cookie"].match(l);return e?e.pop().split("|"):null};var d=function(){var e=u();return e&&!!/^\d{6}&[0|1]$/.test(e[6])?e[6].substr(0,6):null};var h=function(){var e=u();return e?e[0]:null};var f=function(t){var i="http://yixin.news.163.com/yixin/share/sign.b?m={0}&c={1}";var n="yixin_cb_"+r.getUUID();e[n]=function(e){t&&t(e.result)};r.loadJs(r.format(i,h(),n))};var p={};o._node=t.createElement("div");o._node.className="yx-box";var m={};m._opened=false;m._shareOpened=false;m._init=function(){o._node.innerHTML=""};m._show=function(){!this._opened&&t.body.appendChild(o._node);this._opened=true};m._hide=function(){this._opened&&t.body.removeChild(o._node);this._opened=false};m._hideTimer=null;m.hide=function(e){e=e||0;m._hideTimer=setTimeout(function(){m._hide()},e*1e3)};"intro share msg".replace(/[^, ]+/g,function(e){m[e]=function(){this._init();o._node.className="yx-box yx-status-"+e;var t=a[e]+a.pub,i=r.toArray(arguments);i.unshift(t);o._node.innerHTML=r.format.apply(null,i);this._hideTimer&&clearTimeout(this._hideTimer);this._hide();this._show();if(/MSIE 6/gi.test(navigator.userAgent)){o._node.style.top=r.getScrollOffset()[1]+200+"px";o._node.className=o._node.className}if("share"===e){r.getElementsByClassName("yx-remark-input",o._node,"input")[0].focus();this._shareOpened=true}}});r.addEvent(o._node,"click",function(e){var t=e.target||e.srcElement;if(t.className.indexOf("yx-close")>=0)m._hide();if(t.className.indexOf("yx-sbtn")>=0)v()});r.addEvent(o._node,"mousemove",function(e){var t=e.target||e.srcElement;var i="yx-intro-qr-tip";if(t.className.indexOf(i)>=0){var n=r.getElementsByClassName("yx-intro",o._node,"div")[0];var s=r.getElementsByClassName(i,n,"div")[0];var a=setTimeout(function(){n.className="yx-intro yx-intro-status-qr"},300);var l=function(){a&&clearTimeout(a)};r.addEvent(s,"mouseleave",l);r.addEvent(n,"mouseleave",function(){l();n.className="yx-intro"})}});r.addEvent(t,"keyup",function(e){if(e.keyCode===27&&m._opened)m._hide();if(e.keyCode===13&&m._shareOpened)v()});var v=function(){var t={};r.each(p,function(e,i){t[i]="function"===typeof e?e():e});var i={title:t.title||"",desc:t.desc,image:"http://timge8.126.net/image?h=500&w=500&fill=0&gif=0&quality=80&url="+t.image,url:t.url,source:t.source,ps:r.getElementsByClassName("yx-remark-input",o._node,"input")[0].value,m:h(),c:"yixin_cb_"+r.getUUID()};var n=[];r.each(i,function(e,t){n.push(t+"="+encodeURIComponent(e))});e[i.c]=function(e){if(e.result==true){m.msg("\u5206\u4eab\u6210\u529f!")}else{m.msg("\u5206\u4eab\u5931\u8d25, \u8bf7\u7a0d\u5019\u91cd\u8bd5.")}if("number"===typeof t.closeAfterShare&&t.closeAfterShare>=0){m.hide(t.closeAfterShare)}else if("undefined"===typeof t.closeAfterShare){m.hide(2)}};r.loadJs("http://yixin.news.163.com/yixin/share/addfdfeed.b?"+n.join("&"))};var g=function(t){var i={};r.each(t,function(e,t){var n="function"===typeof e?e():e;i[t]=encodeURIComponent(n)});var o="https://open.yixin.im/share?appkey="+n+"&type=webpage"+"&title="+i.title+"&desc="+i.desc+"&pic="+i.image+"&url="+i.url;try{e.open(o,"_blank","width=650,height=500")}catch(s){m.msg("\u5206\u4eab\u5931\u8d25(\u5185\u90e8\u9519\u8bef)");m.hide(2)}};var y=function(e){var t={title:"",desc:"",image:"http://img1.cache.netease.com/f2e/news/commend/images/appicon.png",url:"http://j.news.163.com?f=YixinShare",source:"\u8350\u65b0\u95fb"};r.each(t,function(i,n){if(!e[n]){e[n]=t[n]}});return e};var w=function(t){t=y(t);var i=null;if(!c()||!d()){g(t)}else{i=setTimeout(function(){m.msg("\u52a0\u8f7d\u4e2d...")},500);f(function(e){i&&clearTimeout(i);if(!e){g(t)}else{m.share(t.title,t.desc,t.image,d().substr(3,3));p=t}})}var n=t.url.replace("http://","http//snstj.")+"?snstj_yixin";e["neteaseTracker"]&&e["neteaseTracker"](true,n)};o.open=w;e.YixinShare=o}(window,document);!function(){var e="0123456789abcdef";function t(t){str="";for(j=0;j<=3;j++){str+=e.charAt(t>>j*8+4&15)+e.charAt(t>>j*8&15)}return str}function n(e){nblk=(e.length+8>>6)+1;blks=new Array(nblk*16);for(i=0;i<nblk*16;i++){blks[i]=0}for(i=0;i<e.length;i++){blks[i>>2]|=e.charCodeAt(i)<<i%4*8}blks[i>>2]|=128<<i%4*8;blks[nblk*16-2]=e.length*8;return blks}function o(e,t){var i=(e&65535)+(t&65535);var n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535}function s(e,t){return e<<t|e>>>32-t}function r(e,t,i,n,r,a){return o(s(o(o(t,e),o(n,a)),r),i)}function l(e,t,i,n,o,s,a){return r(t&i|~t&n,e,t,o,s,a)}function u(e,t,i,n,o,s,a){return r(t&n|i&~n,e,t,o,s,a)}function h(e,t,i,n,o,s,a){return r(t^i^n,e,t,o,s,a)}function f(e,t,i,n,o,s,a){return r(i^(t|~n),e,t,o,s,a)}function p(e){x=n(e);a=1732584193;b=-271733879;c=-1732584194;d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=l(a,b,c,d,x[i+0],7,-680876936);d=l(d,a,b,c,x[i+1],12,-389564586);c=l(c,d,a,b,x[i+2],17,606105819);b=l(b,c,d,a,x[i+3],22,-1044525330);a=l(a,b,c,d,x[i+4],7,-176418897);d=l(d,a,b,c,x[i+5],12,1200080426);c=l(c,d,a,b,x[i+6],17,-1473231341);b=l(b,c,d,a,x[i+7],22,-45705983);a=l(a,b,c,d,x[i+8],7,1770035416);d=l(d,a,b,c,x[i+9],12,-1958414417);c=l(c,d,a,b,x[i+10],17,-42063);b=l(b,c,d,a,x[i+11],22,-1990404162);a=l(a,b,c,d,x[i+12],7,1804603682);d=l(d,a,b,c,x[i+13],12,-40341101);c=l(c,d,a,b,x[i+14],17,-1502002290);b=l(b,c,d,a,x[i+15],22,1236535329);a=u(a,b,c,d,x[i+1],5,-165796510);d=u(d,a,b,c,x[i+6],9,-1069501632);c=u(c,d,a,b,x[i+11],14,643717713);b=u(b,c,d,a,x[i+0],20,-373897302);a=u(a,b,c,d,x[i+5],5,-701558691);d=u(d,a,b,c,x[i+10],9,38016083);c=u(c,d,a,b,x[i+15],14,-660478335);b=u(b,c,d,a,x[i+4],20,-405537848);a=u(a,b,c,d,x[i+9],5,568446438);d=u(d,a,b,c,x[i+14],9,-1019803690);c=u(c,d,a,b,x[i+3],14,-187363961);b=u(b,c,d,a,x[i+8],20,1163531501);a=u(a,b,c,d,x[i+13],5,-1444681467);d=u(d,a,b,c,x[i+2],9,-51403784);c=u(c,d,a,b,x[i+7],14,1735328473);b=u(b,c,d,a,x[i+12],20,-1926607734);a=h(a,b,c,d,x[i+5],4,-378558);d=h(d,a,b,c,x[i+8],11,-2022574463);c=h(c,d,a,b,x[i+11],16,1839030562);b=h(b,c,d,a,x[i+14],23,-35309556);a=h(a,b,c,d,x[i+1],4,-1530992060);d=h(d,a,b,c,x[i+4],11,1272893353);c=h(c,d,a,b,x[i+7],16,-155497632);b=h(b,c,d,a,x[i+10],23,-1094730640);a=h(a,b,c,d,x[i+13],4,681279174);d=h(d,a,b,c,x[i+0],11,-358537222);c=h(c,d,a,b,x[i+3],16,-722521979);b=h(b,c,d,a,x[i+6],23,76029189);a=h(a,b,c,d,x[i+9],4,-640364487);d=h(d,a,b,c,x[i+12],11,-421815835);c=h(c,d,a,b,x[i+15],16,530742520);b=h(b,c,d,a,x[i+2],23,-995338651);a=f(a,b,c,d,x[i+0],6,-198630844);d=f(d,a,b,c,x[i+7],10,1126891415);c=f(c,d,a,b,x[i+14],15,-1416354905);b=f(b,c,d,a,x[i+5],21,-57434055);a=f(a,b,c,d,x[i+12],6,1700485571);d=f(d,a,b,c,x[i+3],10,-1894986606);c=f(c,d,a,b,x[i+10],15,-1051523);b=f(b,c,d,a,x[i+1],21,-2054922799);a=f(a,b,c,d,x[i+8],6,1873313359);d=f(d,a,b,c,x[i+15],10,-30611744);c=f(c,d,a,b,x[i+6],15,-1560198380);b=f(b,c,d,a,x[i+13],21,1309151649);a=f(a,b,c,d,x[i+4],6,-145523070);d=f(d,a,b,c,x[i+11],10,-1120210379);c=f(c,d,a,b,x[i+2],15,718787259);b=f(b,c,d,a,x[i+9],21,-343485551);a=o(a,olda);b=o(b,oldb);c=o(c,oldc);d=o(d,oldd)}return t(a)+t(b)+t(c)+t(d)}var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function v(e){var t,i,n;var o,s,r;n=e.length;i=0;t="";while(i<n){o=e.charCodeAt(i++)&255;if(i==n){t+=m.charAt(o>>2);t+=m.charAt((o&3)<<4);t+="==";break}s=e.charCodeAt(i++);if(i==n){t+=m.charAt(o>>2);t+=m.charAt((o&3)<<4|(s&240)>>4);t+=m.charAt((s&15)<<2);t+="=";break}r=e.charCodeAt(i++);t+=m.charAt(o>>2);t+=m.charAt((o&3)<<4|(s&240)>>4);t+=m.charAt((s&15)<<2|(r&192)>>6);t+=m.charAt(r&63)}return t}function g(e){var t,i,n,o;t="";n=e.length;for(i=0;i<n;i++){o=e.charCodeAt(i);if(o>=1&&o<=127){t+=e.charAt(i)}else{if(o>2047){t+=String.fromCharCode(224|o>>12&15);t+=String.fromCharCode(128|o>>6&63);t+=String.fromCharCode(128|o>>0&63)}else{t+=String.fromCharCode(192|o>>6&31);t+=String.fromCharCode(128|o>>0&63)}}}return t}function o(e,t){return(e&2147483647)+(t&2147483647)^e&2147483648^t&2147483648}function y(e){var t="0123456789abcdef";var i="";for(var n=7;n>=0;n--){i+=t.charAt(e>>n*4&15)}return i}function w(e){var t=(e.length+8>>6)+1,i=new Array(t*16);for(var n=0;n<t*16;n++){i[n]=0}for(n=0;n<e.length;n++){i[n>>2]|=e.charCodeAt(n)<<24-(n&3)*8}i[n>>2]|=128<<24-(n&3)*8;i[t*16-1]=e.length*8;return i}function s(e,t){return e<<t|e>>>32-t}function T(e,t,i,n){if(e<20){return t&i|~t&n}if(e<40){return t^i^n}if(e<60){return t&i|t&n|i&n}return t^i^n}function C(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function k(e){var t=w(e);var i=new Array(80);var n=1732584193;var r=-271733879;var a=-1732584194;var l=271733878;var c=-1009589776;for(var u=0;u<t.length;u+=16){var d=n;var h=r;var f=a;var p=l;var m=c;for(var v=0;v<80;v++){if(v<16){i[v]=t[u+v]}else{i[v]=s(i[v-3]^i[v-8]^i[v-14]^i[v-16],1)}$t=o(o(s(n,5),T(v,r,a,l)),o(o(c,i[v]),C(v)));c=l;l=a;a=s(r,30);r=n;n=$t}n=o(n,d);r=o(r,h);a=o(a,f);l=o(l,p);c=o(c,m)}SHA1Value=y(n)+y(r)+y(a)+y(l)+y(c);return SHA1Value}var _;var E=0xdeadbeefcafe;var I=(E&16777215)==15715070;function S(e,t,i){if(e!=null){if("number"==typeof e){this.fromNumber(e,t,i)}else{if(t==null&&"string"!=typeof e){this.fromString(e,256)}else{this.fromString(e,t)}}}}function N(){return new S(null)}function L(e,t,i,n,o,s){while(--s>=0){var r=t*this[e++]+i[n]+o;o=Math.floor(r/67108864);i[n++]=r&67108863}return o}function M(e,t,i,n,o,s){var r=t&32767,a=t>>15;while(--s>=0){var l=this[e]&32767;var c=this[e++]>>15;var u=a*l+c*r;l=r*l+((u&32767)<<15)+i[n]+(o&1073741823);o=(l>>>30)+(u>>>15)+a*c+(o>>>30);i[n++]=l&1073741823}return o}function $(e,t,i,n,o,s){var r=t&16383,a=t>>14;while(--s>=0){var l=this[e]&16383;var c=this[e++]>>14;var u=a*l+c*r;l=r*l+((u&16383)<<14)+i[n]+o;o=(l>>28)+(u>>14)+a*c;i[n++]=l&268435455}return o}if(I&&navigator.appName=="Microsoft Internet Explorer"){S.prototype.am=M;_=30}else{if(I&&navigator.appName!="Netscape"){S.prototype.am=L;_=26}else{S.prototype.am=$;_=28}}S.prototype.DB=_;S.prototype.DM=(1<<_)-1;S.prototype.DV=1<<_;var A=52;S.prototype.FV=Math.pow(2,A);S.prototype.F1=A-_;S.prototype.F2=2*_-A;var D="0123456789abcdefghijklmnopqrstuvwxyz";var P=new Array;var H,F;H="0".charCodeAt(0);for(F=0;F<=9;++F){P[H++]=F}H="a".charCodeAt(0);for(F=10;F<36;++F){P[H++]=F}H="A".charCodeAt(0);for(F=10;F<36;++F){P[H++]=F}function O(e){return D.charAt(e)}function R(e,t){var i=P[e.charCodeAt(t)];return i==null?-1:i}function B(e){for(var t=this.t-1;t>=0;--t){e[t]=this[t]}e.t=this.t;e.s=this.s}function U(e){this.t=1;this.s=e<0?-1:0;if(e>0){this[0]=e
}else{if(e<-1){this[0]=e+DV}else{this.t=0}}}function z(e){var t=N();t.fromInt(e);return t}function W(e,t){var i;if(t==16){i=4}else{if(t==8){i=3}else{if(t==256){i=8}else{if(t==2){i=1}else{if(t==32){i=5}else{if(t==4){i=2}else{this.fromRadix(e,t);return}}}}}}this.t=0;this.s=0;var n=e.length,o=false,s=0;while(--n>=0){var r=i==8?e[n]&255:R(e,n);if(r<0){if(e.charAt(n)=="-"){o=true}continue}o=false;if(s==0){this[this.t++]=r}else{if(s+i>this.DB){this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s;this[this.t++]=r>>this.DB-s}else{this[this.t-1]|=r<<s}}s+=i;if(s>=this.DB){s-=this.DB}}if(i==8&&(e[0]&128)!=0){this.s=-1;if(s>0){this[this.t-1]|=(1<<this.DB-s)-1<<s}}this.clamp();if(o){S.ZERO.subTo(this,this)}}function q(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e){--this.t}}function V(e){if(this.s<0){return"-"+this.negate().toString(e)}var t;if(e==16){t=4}else{if(e==8){t=3}else{if(e==2){t=1}else{if(e==32){t=5}else{if(e==4){t=2}else{return this.toRadix(e)}}}}}var i=(1<<t)-1,n,o=false,s="",r=this.t;var a=this.DB-r*this.DB%t;if(r-->0){if(a<this.DB&&(n=this[r]>>a)>0){o=true;s=O(n)}while(r>=0){if(a<t){n=(this[r]&(1<<a)-1)<<t-a;n|=this[--r]>>(a+=this.DB-t)}else{n=this[r]>>(a-=t)&i;if(a<=0){a+=this.DB;--r}}if(n>0){o=true}if(o){s+=O(n)}}}return o?s:"0"}function Y(){var e=N();S.ZERO.subTo(this,e);return e}function X(){return this.s<0?this.negate():this}function Z(e){var t=this.s-e.s;if(t!=0){return t}var i=this.t;t=i-e.t;if(t!=0){return this.s<0?-t:t}while(--i>=0){if((t=this[i]-e[i])!=0){return t}}return 0}function Q(e){var t=1,i;if((i=e>>>16)!=0){e=i;t+=16}if((i=e>>8)!=0){e=i;t+=8}if((i=e>>4)!=0){e=i;t+=4}if((i=e>>2)!=0){e=i;t+=2}if((i=e>>1)!=0){e=i;t+=1}return t}function G(){if(this.t<=0){return 0}return this.DB*(this.t-1)+Q(this[this.t-1]^this.s&this.DM)}function K(e,t){var i;for(i=this.t-1;i>=0;--i){t[i+e]=this[i]}for(i=e-1;i>=0;--i){t[i]=0}t.t=this.t+e;t.s=this.s}function J(e,t){for(var i=e;i<this.t;++i){t[i-e]=this[i]}t.t=Math.max(this.t-e,0);t.s=this.s}function et(e,t){var i=e%this.DB;var n=this.DB-i;var o=(1<<n)-1;var s=Math.floor(e/this.DB),r=this.s<<i&this.DM,a;for(a=this.t-1;a>=0;--a){t[a+s+1]=this[a]>>n|r;r=(this[a]&o)<<i}for(a=s-1;a>=0;--a){t[a]=0}t[s]=r;t.t=this.t+s+1;t.s=this.s;t.clamp()}function tt(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t){t.t=0;return}var n=e%this.DB;var o=this.DB-n;var s=(1<<n)-1;t[0]=this[i]>>n;for(var r=i+1;r<this.t;++r){t[r-i-1]|=(this[r]&s)<<o;t[r-i]=this[r]>>n}if(n>0){t[this.t-i-1]|=(this.s&s)<<o}t.t=this.t-i;t.clamp()}function it(e,t){var i=0,n=0,o=Math.min(e.t,this.t);while(i<o){n+=this[i]-e[i];t[i++]=n&this.DM;n>>=this.DB}if(e.t<this.t){n-=e.s;while(i<this.t){n+=this[i];t[i++]=n&this.DM;n>>=this.DB}n+=this.s}else{n+=this.s;while(i<e.t){n-=e[i];t[i++]=n&this.DM;n>>=this.DB}n-=e.s}t.s=n<0?-1:0;if(n<-1){t[i++]=this.DV+n}else{if(n>0){t[i++]=n}}t.t=i;t.clamp()}function nt(e,t){var i=this.abs(),n=e.abs();var o=i.t;t.t=o+n.t;while(--o>=0){t[o]=0}for(o=0;o<n.t;++o){t[o+i.t]=i.am(0,n[o],t,o,0,i.t)}t.s=0;t.clamp();if(this.s!=e.s){S.ZERO.subTo(t,t)}}function ot(e){var t=this.abs();var i=e.t=2*t.t;while(--i>=0){e[i]=0}for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);if((e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV){e[i+t.t]-=t.DV;e[i+t.t+1]=1}}if(e.t>0){e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)}e.s=0;e.clamp()}function st(e,t,i){var n=e.abs();if(n.t<=0){return}var o=this.abs();if(o.t<n.t){if(t!=null){t.fromInt(0)}if(i!=null){this.copyTo(i)}return}if(i==null){i=N()}var s=N(),r=this.s,a=e.s;var l=this.DB-Q(n[n.t-1]);if(l>0){n.lShiftTo(l,s);o.lShiftTo(l,i)}else{n.copyTo(s);o.copyTo(i)}var c=s.t;var u=s[c-1];if(u==0){return}var d=u*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0);var h=this.FV/d,f=(1<<this.F1)/d,p=1<<this.F2;var m=i.t,v=m-c,g=t==null?N():t;s.dlShiftTo(v,g);if(i.compareTo(g)>=0){i[i.t++]=1;i.subTo(g,i)}S.ONE.dlShiftTo(c,g);g.subTo(s,s);while(s.t<c){s[s.t++]=0}while(--v>=0){var y=i[--m]==u?this.DM:Math.floor(i[m]*h+(i[m-1]+p)*f);if((i[m]+=s.am(0,y,i,v,0,c))<y){s.dlShiftTo(v,g);i.subTo(g,i);while(i[m]<--y){i.subTo(g,i)}}}if(t!=null){i.drShiftTo(c,t);if(r!=a){S.ZERO.subTo(t,t)}}i.t=c;i.clamp();if(l>0){i.rShiftTo(l,i)}if(r<0){S.ZERO.subTo(i,i)}}function rt(e){var t=N();this.abs().divRemTo(e,null,t);if(this.s<0&&t.compareTo(S.ZERO)>0){e.subTo(t,t)}return t}function at(e){this.m=e}function lt(e){if(e.s<0||e.compareTo(this.m)>=0){return e.mod(this.m)}else{return e}}function ct(e){return e}function ut(e){e.divRemTo(this.m,null,e)}function dt(e,t,i){e.multiplyTo(t,i);this.reduce(i)}function ht(e,t){e.squareTo(t);this.reduce(t)}at.prototype.convert=lt;at.prototype.revert=ct;at.prototype.reduce=ut;at.prototype.mulTo=dt;at.prototype.sqrTo=ht;function ft(){if(this.t<1){return 0}var e=this[0];if((e&1)==0){return 0}var t=e&3;t=t*(2-(e&15)*t)&15;t=t*(2-(e&255)*t)&255;t=t*(2-((e&65535)*t&65535))&65535;t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function pt(e){this.m=e;this.mp=e.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<e.DB-15)-1;this.mt2=2*e.t}function mt(e){var t=N();e.abs().dlShiftTo(this.m.t,t);t.divRemTo(this.m,null,t);if(e.s<0&&t.compareTo(S.ZERO)>0){this.m.subTo(t,t)}return t}function vt(e){var t=N();e.copyTo(t);this.reduce(t);return t}function gt(e){while(e.t<=this.mt2){e[e.t++]=0}for(var t=0;t<this.m.t;++t){var i=e[t]&32767;var n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;i=t+this.m.t;e[i]+=this.m.am(0,n,e,t,0,this.m.t);while(e[i]>=e.DV){e[i]-=e.DV;e[++i]++}}e.clamp();e.drShiftTo(this.m.t,e);if(e.compareTo(this.m)>=0){e.subTo(this.m,e)}}function yt(e,t){e.squareTo(t);this.reduce(t)}function wt(e,t,i){e.multiplyTo(t,i);this.reduce(i)}pt.prototype.convert=mt;pt.prototype.revert=vt;pt.prototype.reduce=gt;pt.prototype.mulTo=wt;pt.prototype.sqrTo=yt;function bt(){return(this.t>0?this[0]&1:this.s)==0}function Tt(e,t){if(e>4294967295||e<1){return S.ONE}var i=N(),n=N(),o=t.convert(this),s=Q(e)-1;o.copyTo(i);while(--s>=0){t.sqrTo(i,n);if((e&1<<s)>0){t.mulTo(n,o,i)}else{var r=i;i=n;n=r}}return t.revert(i)}function Ct(e,t){var i;if(e<256||t.isEven()){i=new at(t)}else{i=new pt(t)}return this.exp(e,i)}S.prototype.copyTo=B;S.prototype.fromInt=U;S.prototype.fromString=W;S.prototype.clamp=q;S.prototype.dlShiftTo=K;S.prototype.drShiftTo=J;S.prototype.lShiftTo=et;S.prototype.rShiftTo=tt;S.prototype.subTo=it;S.prototype.multiplyTo=nt;S.prototype.squareTo=ot;S.prototype.divRemTo=st;S.prototype.invDigit=ft;S.prototype.isEven=bt;S.prototype.exp=Tt;S.prototype.toString=V;S.prototype.negate=Y;S.prototype.abs=X;S.prototype.compareTo=Z;S.prototype.bitLength=G;S.prototype.mod=rt;S.prototype.modPowInt=Ct;S.ZERO=z(0);S.ONE=z(1);function xt(){this.i=0;this.j=0;this.S=new Array}function kt(e){var t,i,n;for(t=0;t<256;++t){this.S[t]=t}i=0;for(t=0;t<256;++t){i=i+this.S[t]+e[t%e.length]&255;n=this.S[t];this.S[t]=this.S[i];this.S[i]=n}this.i=0;this.j=0}function _t(){var e;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;e=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=e;return this.S[e+this.S[this.i]&255]}xt.prototype.init=kt;xt.prototype.next=_t;function Et(){return new xt}var It=256;var jt;var St;var Nt;function Lt(e){St[Nt++]^=e&255;St[Nt++]^=e>>8&255;St[Nt++]^=e>>16&255;St[Nt++]^=e>>24&255;if(Nt>=It){Nt-=It}}function Mt(){Lt((new Date).getTime())}if(St==null){St=new Array;Nt=0;var $t;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var At=window.crypto.random(32);for($t=0;$t<At.length;++$t){St[Nt++]=At.charCodeAt($t)&255}}while(Nt<It){$t=Math.floor(65536*Math.random());St[Nt++]=$t>>>8;St[Nt++]=$t&255}Nt=0;Mt()}function Dt(){if(jt==null){Mt();jt=Et();jt.init(St);for(Nt=0;Nt<St.length;++Nt){St[Nt]=0}Nt=0}return jt.next()}function Pt(e){var t;for(t=0;t<e.length;++t){e[t]=Dt()}}function Ht(){}Ht.prototype.nextBytes=Pt;function Ft(e,t){return new S(e,t)}function Ot(e,t){var i="";var n=0;while(n+t<e.length){i+=e.substring(n,n+t)+"\n";n+=t}return i+e.substring(n,e.length)}function Rt(e){if(e<16){return"0"+e.toString(16)}else{return e.toString(16)}}function Bt(e,t){if(t<e.length+11){alert("Message too long for RSA");return null}var i=new Array;var n=e.length-1;while(n>=0&&t>0){var o=e.charCodeAt(n--);if(o<128){i[--t]=o}else{if(o>127&&o<2048){i[--t]=o&63|128;i[--t]=o>>6|192}else{i[--t]=o&63|128;i[--t]=o>>6&63|128;i[--t]=o>>12|224}}}i[--t]=0;var s=new Ht;var r=new Array;while(t>2){r[0]=0;while(r[0]==0){s.nextBytes(r)}i[--t]=r[0]}i[--t]=2;i[--t]=0;return new S(i)}function Ut(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function zt(e,t){if(e!=null&&t!=null&&e.length>0&&t.length>0){this.n=Ft(e,16);this.e=parseInt(t,16)}else{alert("Invalid RSA public key")}}function Wt(e){return e.modPowInt(this.e,this.n)}function qt(e){var t=Bt(e,this.n.bitLength()+7>>3);if(t==null){return null}var i=this.doPublic(t);if(i==null){return null}var n=i.toString(16);if((n.length&1)==0){return n}else{return"0"+n}}Ut.prototype.doPublic=Wt;Ut.prototype.setPublic=zt;Ut.prototype.encrypt=qt;function Vt(e,t){var i=document.getElementsByTagName("head")[0];var n=document.createElement("script");n.language="javascript";n.type="text/javascript";n.charset="UTF-8";n.onload=n.onreadystatechange=function(){if(!n.readyState||"loaded"==n.readyState||"complete"==n.readyState){this.onload=this.onreadystatechange=null;t()}};n.src=e;i.appendChild(n)}function Yt(e){if(typeof e=="undefined"){return""}if(typeof e!="object"){throw new Error("data sended to the server must be 'object'")}var t=[];for(var i in e){t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}return t.join("&").replace(/%20/g,"+")}function Xt(e){Vt(e.url+"?"+Yt(e.param),function(){e.callBack()})}window.setLoginStatus=function(e){window.loginStatus=e};var Zt="http://reg.163.com/services/httpLoginExchgKeyNew",Qt="http://reg.163.com/httpLoginVerifyNew.jsp";function Gt(e){var t={userNameVal:"",password:"",showMessage:function(e){},showProccessing:function(){},success:function(){},saveLogin:true,product:"t"};for(var i in e){t[i]=e[i]}if(t.userNameVal==""){t.showMessage("\u5e10\u53f7\u4e0d\u80fd\u4e3a\u7a7a");return}if(t.password==""){t.showMessage("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a");return}t.showProccessing();var n=v(t.userNameVal),o=t.saveLogin;var s={url:Zt,param:{rnd:n,jsonp:"setLoginStatus"},callBack:function(){if(typeof loginStatus=="undefined"){return}var e=loginStatus.split("\n"),i=e[0];if(i=="200"){var n=e[1],s=e[2];var r=new Ut;r.setPublic(s,n);var a=r.encrypt(p(t.password));var l={url:Qt,param:{rcode:a,product:t.product,jsonp:"setLoginStatus",savelogin:o,username:t.userNameVal},callBack:function(){if(typeof loginStatus=="undefined"){return}switch(loginStatus){case"200":t.success();break;case"420":t.showMessage("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");break;case"460":t.showMessage("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");break;case"412":t.showMessage("\u767b\u5f55\u9519\u8bef\u6b21\u6570\u592a\u591a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case"414":t.showMessage("IP\u767b\u5f55\u5931\u8d25\u6b21\u6570\u8fc7\u591a,\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case"415":t.showMessage("\u4eca\u5929\u767b\u5f55\u9519\u8bef\u6b21\u6570\u592a\u591a,\u8bf7\u660e\u5929\u518d\u8bd5");break;case"416":t.showMessage("IP\u4eca\u5929\u767b\u5f55\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case"417":t.showMessage("IP\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u660e\u5929\u518d\u8bd5");break;case"418":t.showMessage("\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a,\u8bf7\u660e\u5929\u518d\u8bd5");break;case"419":t.showMessage("\u767b\u5f55\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5");break;case"420":t.showMessage("\u7528\u6237\u540d\u4e0d\u5b58\u5728");break;case"422":t.showMessage("\u5e10\u53f7\u88ab\u9501\u5b9a\uff0c\u8bf7\u60a8\u89e3\u9501\u540e\u518d\u767b\u5f55\uff01");break;case"424":t.showMessage("\u8be5\u9753\u53f7\u670d\u52a1\u5df2\u5230\u671f\uff0c\u8bf7\u60a8\u7eed\u8d39\uff01");break;case"425":t.showMessage("\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5728\u6fc0\u6d3b\u6709\u6548\u671f\u4ee5\u5185");break;case"426":t.showMessage("\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5df2\u7ecf\u8fc7\u4e86\u6fc0\u6d3b\u6709\u6548\u671f\u9650");break;case"427":t.showMessage("\u8d85\u65f6\uff0c\u5df2\u8d85\u8fc75\u5206\u949f\u6709\u6548\u671f");break;case"500":t.showMessage("\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5\uff01");break;case"503":t.showMessage("\u7cfb\u7edf\u7ef4\u62a4\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5\uff01");break;case"428":window.location.href=Qt+"?rcode="+a+"&product="+t.product+"&url="+window.location.href+"&savelogin="+o+"&username="+t.userNameVal;break;default:t.showMessage("\u8d26\u53f7\u5f02\u5e38\uff01")}}};Xt(l)}else{t.showMessage("\u767b\u5f55\u5931\u8d25")}}};Xt(s)}window.ursLogin=Gt}();!function(e){function t(t,i,n){var o=t["offset"+i],n=n||"";e.each("Width"==i?["Left","Right"]:["Top","Bottom"],function(i,s){-1==n.indexOf("padding")&&(o-=parseFloat(e.style.getCurrentStyle(t,"padding"+s))||0);-1==n.indexOf("border")&&(o-=parseFloat(e.style.getCurrentStyle(t,"border"+s+"Width"))||0);n.indexOf("margin")!=-1&&(o+=parseFloat(e.style.getCurrentStyle(t,"margin"+s))||0)});return o}function i(e){return a.test(e)?parseFloat(e)||0:e.toLowerCase()}function n(t,n){var o=[],s;for(s in n)n[s]=i(n[s]),t.each(function(t){!o[t]&&(o[t]={});o[t][s]=l.test(s)?e(this)[s]():i(e.style.getCurrentStyle(this,s))});return o}var o={};e.element.width=function(e){return"number"==typeof e?this.addCss({width:e+"px"}):t(this.get(0),"Width",e)};e.element.height=function(e){return"number"==typeof e?this.addCss({height:e+"px"}):t(this.get(0),"Height",e)};var s=/opacity=([^,)]*)/,r=/alpha\([^\)]*\)/;e.element.opacity=function(t){if("number"==typeof t)return this.each(function(){if(this.style.opacity===void 0){var i=e.style.getCurrentStyle(this,"filter")||"",n="alpha(opacity="+t*100+")";this.style.filter=r.test(i)?i.replace(r,n):n}else this.style.opacity=t});else{var i=this.get(0);i.style.opacity===void 0?i=s.test(e.style.getCurrentStyle(i,"filter")||"")?i=parseFloat(RegExp.$1)/100:"":(i=this.style.opacity||e.style.getCurrentStyle(i,"opacity"),i!==""&&(i=parseFloat(i)));return""===i?1:i}};var a=/^\-{0,1}\d+(?:\.\d+)?[^\s]*$/,l=/^(?:width|height|opacity)$/i,c=/^(?:zIndex|fontWeight|opacity|zoom|lineHeight)$/;e.element.animate=function(t,i,s,r){typeof s!=="function"&&(s=u[s]);var a=Math.abs(100-i*100);a>=100&&(a=5);i*=1e3;var t=e.style.parse(t),d=this;d.stop();d.isPause=!1;var h=n(d,t);"visible"==t.visibility&&d.addCss({visibility:"visible"});"block"==t.display&&d.addCss({display:"block"});var f=0,p=setInterval(function(){if(!d.isPause){f+=a;var e=f/i,n,u,m,v,g,y=h.length;for(v in t)for(g=-1;++g<y;)if(n=h[g][v],u=t[v],"number"==typeof n&&n!=u)if(m=n+(u-n)*s(0,1,e),(u>n&&m>u||u<n&&m<u)&&(m=u),l.test(v))d.$(g)[v](m);else d.get(g).style[v]=c.test(v)?m:m+"px";f>=i&&!o[p]&&(clearInterval(p),"hidden"==t.visibility&&d.addCss({visibility:"hidden"}),"none"==t.display&&d.addCss({display:"none"}),r&&r(),o[p]=!0)}},13);return this.attr("NTESAnimateId",new Number(p))};e.element.stop=function(){return this.each(function(){var e=this.NTESAnimateId;if(e!=null){o[e]||(clearInterval(e),o[e]=!0);try{delete this.NTESAnimateId}catch(t){}}})};e.element.pauseAnimate=function(){this.isPause=!0};e.element.resumeAnimate=function(){this.isPause=!1};var u={linear:function(e,t,i){return e+t*i}}}(NTES);!function(e){function t(e,t){e.addEvent("keydown",function(e){e=e||window.event;e.keyCode==13&&(e.preventDefault(),t())})}function i(e){var t={text:"",start:0,end:0};e.focus();if(e.setSelectionRange)t.start=e.selectionStart,t.end=e.selectionEnd;else if(document.selection){var i,n=document.selection.createRange(),o=document.body.createTextRange();o.moveToElementText(e);t.text=n.text;t.bookmark=n.getBookmark();for(i=0;o.compareEndPoints("StartToStart",n)<0&&n.moveStart("character",-1)!==0;i++)e.value.charAt(i)=="\n"&&i++;t.start=i;t.end=t.text.length+t.start}return t.end}function n(e){return e.getAttribute("href").replace("javascript://","")}function o(e){if(typeof e=="undefined")return"";if(typeof e!="object")throw Error("data sended to the server must be 'object'");var t=[],i;for(i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&").replace(/%20/g,"+")}function s(e){j.ajax.importJs(e.url+"?"+o(e.param),function(){e.callBack()},"UTF-8")}function r(e){replyData=null;if(e.url)j.ajax.importJs(e.url,function(){e.callBack()},"gb2312")}function a(e,t){t.replaceNode?t.replaceNode(e):t.parentNode.replaceChild&&t.parentNode.replaceChild(e,t);return e}function l(e,t){var i="",n=e.length%t,o=e.length,s=o/t;if(n==0)for(n=0;n<s;n++)i+=n==s-1?e.substring(n*t,n*t+t):e.substring(n*t,n*t+t)+",";else o<=t?i=e:(s=e.substring(0,n),n=l(e.replace(s,""),t),i=i+s+","+n);return i}function c(e,t){function i(){}i.prototype=e.prototype;t.prototype=new i;t.prototype.constructor=t;t.superclass=e.prototype;if(e.prototype.constructor==Object.prototype.constructor)e.prototype.constructor=e}function u(e,t){if(arguments.length!=2)throw Error("the number of the args must be 2");this.name=e;this.attribute=t}function d(e){var t={type:"type",time:(new Date).getTime()},i;for(i in e)t[i]=e[i];s({url:S.log,param:t,callBack:function(){}})}function h(){return self.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function f(e,t,i){document.createRange?e.setSelectionRange(t,i):(e=e.createTextRange(),e.collapse(1),e.moveStart("character",t),e.moveEnd("character",i-t),e.select())}function p(e,t){if(document.selection){var i=document.selection.createRange();if(i.text)i.text=t}else{var n=e.value;if(e.selectionStart<e.selectionEnd)i=n.substring(0,e.selectionStart),n=n.substring(e.selectionEnd),e.value=i+t+n}}function m(e,t,i){if(document.selection)document.selection.createRange().text=t;else{var n=e.value,o=n.length;e.value=n.substring(0,i)+t+n.substring(i,o);t=(n.substring(0,i)+t).length;f(e,t,t)}}function v(e,t,i){var n=e.value,o=n.length;e.value=n.substring(0,i)+t+n.substring(i,o);t=(n.substring(0,i)+t).length;f(e,t,t)}function g(e){if(typeof e.selectionStart=="number")return{start:e.selectionStart,end:e.selectionEnd};else{var t=0,i=0;if(document.selection){var n=document.selection.createRange();if(n.parentElement()==e){var o=document.body.createTextRange();o.moveToElementText(e);for(t=0;o.compareEndPoints("StartToStart",n)<0;t++)o.moveStart("character",1);for(o=0;o<=t;o++)e.value.charAt(o)=="\n"&&t++;o=document.body.createTextRange();o.moveToElementText(e);for(i=0;o.compareEndPoints("StartToEnd",n)<0;i++)o.moveStart("character",1);for(o=0;o<=i;o++)e.value.charAt(o)=="\n"&&i++}}return{start:t,end:i}}}function y(e){this.elem=e}function w(e,t){function i(t){var i={x:Math.max(0,Math.min($.scrollWidth-e.offsetWidth,t.pageX-s.x)),y:Math.max(0,Math.min($.scrollHeight-e.offsetHeight,t.pageY-s.y))};e.style.left=i.x+"px";e.style.top=i.y+"px";t.cancelBubble=!0}function n(){e.releaseCapture?e.releaseCapture():window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP);A.removeEvent("mousemove",i);A.removeEvent("mouseup",n)}function o(t){e.setCapture?e.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);s={x:t.pageX-e.offsetLeft,y:t.pageY-e.offsetTop};A.addEvent("mousemove",i);A.addEvent("mouseup",n);t.preventDefault()}j.style.getCurrentStyle(e,"position").toLowerCase();var s;this.init=function(){j.event.addEvent(t,"mousedown",o)}}function b(e){if(arguments.length){var t=this;t._wrapper=e;t._isShowed=j.style.getCurrentStyle(e,"visibility").toLowerCase()!="hidden";t._isFixed=j.style.getCurrentStyle(e,"position").toLowerCase()=="fixed";new w(e,e.$(".tie-dialog-titlebar")).init();e.$(".tie-dialog-close").addEvent("click",function(){t.hide();return!1}).addEvent("drag",function(){return!1})}}var T;function C(e){this.option={wraper:document,threadId:"",boardId:"",host:"news",isShowComment:!1,isStrict:!1,tId:""};for(var t in e)this.option[t]=e[t];this.startTime=(new Date).getTime();this.postCount=0;this.interval=12e4;this.quoteId="";this.hasReply=!1;this.floorDataCache={};this.isSpecial=/^(SPEC|ACTI|PROD)/.test(this.option.threadId);this.showNode=this.option.wraper.$(".js-tie-show").$(0);this.dataNode=this.option.wraper.$(".js-tie-data").$(0);this.tieArea=this.option.wraper;this.actCountNode=this.option.wraper.$(".js-actCount").$(0);this.joinCountNode=this.option.wraper.$(".js-joinCount").$(0);this.bjoinCountNode=this.option.wraper.$(".js-bjoinCount").$(0);this.bactCountNode=this.option.wraper.$(".js-bactCount").$(0);this.regNode=this.option.wraper.$(".js-reg").$(0);this.tiePostAreaNode=this.option.wraper.$(".js-post-area").$(0);S.reloadCookie=j.util.simpleParse(S.reloadCookie,{host:this.option.host});this.init()}var x;function k(e,t){this.direction=e||"bottom";if(!x){x=document.createElement("div");x.className="tinyTipsWin";document.body.appendChild(x)}x.innerHTML=j.util.simpleParse(P.tinyTipsTemp,{message:t});this._wrapper=j(x);this.direction=="bottom"?j("span.arrow",this._wrapper).removeCss("arrowTop"):j("span.icon-success",this._wrapper).addCss("display:none")}function _(e){this.winObj=new b(j(e))}function E(e){this.data=e;this.length=0;this.nickname=this.author="";this.relatedPost=null;this.ip="unknown";for(this.docId="";e[++this.length];);this.length--;if(this.length){e=e[this.length];if(e.p)this.id=e.p,this.id=this.id.indexOf("_")>=0?this.id.split("_")[1]:this.id;else throw"invalid tie id";this.postTime=e.t;this.againstCount=e.a||0;this.supportCount=e.v||0;var t=e.timg||S.defaultIcon;this.screenName=e.tsn||"";this.photo=M({width:35,height:35,url:t});this.url=S.url.watering;this.isShrink=e.l!=null?e.l==1:this.length>=4;this.author=(this.isMobi=W.test(e.u))?RegExp.$1:e.u;U.test(e.f)?this.nickname=RegExp.$1==this.author?"":RegExp.$1:(t=e.f.indexOf("]"),t>=0&&(this.from=e.f.substr(0,t+1)),this.nickname=e.n||"");if(e.ip)this.ip=e.ip.replace(/(?:\.\d+){2}$/,".*.*");else if(z.test(e.f))this.ip=RegExp.$1;!this.from&&B.test(e.f)&&(this.from=RegExp.lastMatch);if(e.s&&e.k)this.relatedPost={href:e.k,title:e.s},q.test(e.k)&&(this.threadId=RegExp.$1);if(this.nickname=="")this.nickname=this.ip;this.nickname=this.nickname.split("@")[0]}else throw"Empty reply data"}function I(e){I.superclass.constructor.call(this,e,"1");e=e[1];this.boardId=e.bi;this.threadId=e.p.split("_")[0]}var j=e,S={_url:'{		"hotTieSrc" : "http://<#=host#>.163.com/comment/<#=channel#>/<#=boardId#>/<#=dir#>/v<#=threadId#>.html",		"hotSpecialTieSrc" : "http://<#=host#>.163.com/gt/comment/<#=channel#>/<#=boardId#>/<#=dir#>/v<#=threadId#>.html",		"login" : "http://comment.<#=host#>.163.com/reply/check.jsp?url=<#=url#>",		"logout" : "http://reg.163.com/Logout.jsp?username=<#=userId#>&url=<#=url#>",		"sendToMicroBlog" : "http://comment.<#=host#>.163.com/reply/transfer.jsp?title=<#=commentTitle#>&url=<#=commentUrl#>",		"support" : "http://comment.<#=host#>.163.com/reply/upvote/<#=boardId#>/<#=threadId#>_<#=id#>",		"against" : "http://comment.<#=host#>.163.com/reply/against/<#=boardId#>/<#=threadId#>_<#=id#>",		"post" : "http://comment.<#=host#>.163.com/reply/dopost.jsp",		"repost" : "http://comment.<#=host#>.163.com/<#=boardId#>/<#=threadId#>/<#=id#>.html",		"watering" : "http://tie.163.com/reply/myaction.jsp?action=reply2me&username=<#=userId#>",		"commentPage" : "http://comment.<#=host#>.163.com/<#=boardId#>/<#=threadId#>.html#articlejiannewscomment",		"commentPageDy" :\u3000"http://comment.<#=host#>.163.com/<#=host#>/<#=boardId#>/<#=tId#>/<#=threadId#>.html",		"current" : "<#=url#>", "newReplyNum" : "http://tie.163.com/reply/mynewnotice.jsp?userid=<#=userID#>",		"newStutasNum" : "http://t.163.com/service/newMessage/<#=userID#>/1/0/0/0/1",		"reg" : "http://reg.163.com/reg0.shtml?product=tie&url=<#=url#>#tie-reply",		"dopost" : "http://comment.<#=host#>.163.com/reply/dopost.jsp"	}',reloadCookie:"http://comment.<#=host#>.163.com/reply/check.jsp",log:"http://comment.news.163.com/statistics.jsp",cookie:{postTime:"my_posttime_<#=threadId#>",nickname:"NTES_REPLY_NICKNAME",sInfo:"S_INFO",pInfo:"P_INFO",toMain:"toMain",toReply:"toReply",global:".163.com",checkedTie:"current_tie_<#=threadId#>",domain:".<#=host#>.163.com",notFinishComment:"notFinishComment",notFinishQuote:"notFinishQuote"},mod:{synToTinyBlog:!0},criticalLayer:10,repostTitle:"\u300a<#=title#>\u300b\u7684\u7f51\u6613\u8ddf\u8d34",maxFloor:70,defaultIcon:"http://mimg.126.net/p/butter/1008031648/img/face_big.gif"};S.url=S._url;j.style.getAbsPosition=function(e){var t={};e.getBoundingClientRect?(e=e.getBoundingClientRect(),t.y=e.top+(document.body.scrollTop||document.documentElement.scrollTop),t.x=e.left+(document.body.scrollLeft||document.documentElement.scrollLeft)):(t.y=e.offsetTop,t.x=e.offsetLeft);return t};u.ensureInherit=function(){try{if(arguments.length<2)throw Error("the length of the args must be longer than 1");for(var e=arguments[0],t=1;t<arguments.length;t++){if(arguments[t].constructor!==u)throw Error("must be 'InterFace'");for(var i=0;i<arguments[t].attribute.length;i++)if(!e[arguments[t].attribute[i]])throw Error("the methods is not conducted properly")}}catch(n){alert(n)}};y.prototype.replaceSelectedText=function(e){var t=this.elem,e=e||"";this._isSelected?(f(t,this._startCursorPos,this._endCursorPos),p(t,e,this._startCursorPos,this._endCursorPos)):m(t,e,this._startCursorPos)};y.prototype.appendTextOnCursor=function(e,t){var i=this._startCursorPos,i=t||i;this.elem.focus();f(this.elem,i,i);m(this.elem,e,i);this.triggerEvent()};y.prototype.triggerEvent=function(){try{var e=e(this.elem),t=g(this.elem);this._startCursorPos=t.start;e===""?this._isSelected=!1:(this._isSelected=!0,this._endCursorPos=t.end)}catch(i){}};var N=function(){return document.all?function(e,t){j(e).addEvent("mouseenter",function(){t()})}:function(e,t){j(e).addEvent("mouseover",function(e){for(var i=e.relatedTarget;i!=this&&i;)try{i=i.parentNode}catch(n){break}i!=this&&t(e)})}}(),L=function(){return document.all?function(e,t){j(e).addEvent("mouseleave",function(){t()})}:function(e,t){j(e).addEvent("mouseout",function(e){for(var i=e.relatedTarget;i!=this&&i;)try{i=i.parentNode}catch(n){break}i!=this&&t(e)})}}(),M=function(){var e={},t=["timge1","timge2","timge3","timge4","timge5","timge6","timge7","timge8","timge9"];return function(i){var n={url:"",gif:1},o;for(o in i)n[o]=i[o];if(n.url.indexOf("timge")!=-1)return n.url;if(n.url.indexOf("ydstatic")!=-1)return n.url;i=n.gif+n.width+"|"+n.height+n.url;e[i]||(o=n.url.substr(n.url.length-1,1).charCodeAt()%9,e[i]="http://"+t[o]+".126.net/image?"+(typeof n.width==="number"?"w="+n.width:"")+(typeof n.height==="number"?"&h="+n.height:"")+"&url="+n.url+"&gif="+n.gif+"&quality=85");return e[i]}}(),$=document.documentElement,A=j(document.body);b.prototype={show:function(e,t){this.basicShow(e,t)},hide:function(){this.basicHide()},basicShow:function(e,t){if(!this._isShow){var i=this._wrapper;if(j.browser.msie&&j.browser.version<7)this._tempTop=$.scrollTop,this._tempScroll=this._scroll.bind(this),window.addEvent("scroll",this._tempScroll);var n,o;n=$.scrollLeft||window.pageXOffset||A.scrollLeft;o=$.scrollTop||window.pageYOffset||A.scrollTop;this._isFixed?(n=isNaN(e)?parseInt(($.clientWidth-i.offsetWidth)/2):e-n,o=isNaN(t)?parseInt(($.clientHeight-i.offsetHeight)/2.3):t-o):(n=isNaN(e)?parseInt(($.clientWidth-i.offsetWidth)/2+n):e,o=isNaN(t)?parseInt(($.clientHeight-i.offsetHeight)/2.3+o):t);i.style.left=n+"px";i.style.top=o+"px";i.style.visibility="visible";this.onShow&&this.onShow();this._isShowed=!0}},basicHide:function(){if(this._isShowed)j.style.addCss(this._wrapper,"visibility: hidden; left: 0; top: 0;"),this._tempScroll&&window.removeEvent("scroll",this._tempScroll),this.onHide&&this.onHide(),this._isShowed=!1},_scroll:function(){this._wrapper.style.top=parseInt(this._wrapper.style.top)+$.scrollTop-this._tempTop;this._tempTop=$.scrollTop}};j.util.simpleParse=function(e,t){return t?String(e).replace(/<#=(\w+)#>/g,function(e,i){return t[i]!=null?t[i]:e}):e};var D=j.browser.msie&&j.browser.version<7?!0:!1,P={hottitle:'<div class="tie-hot-title">\u70ed\u95e8\u8ddf\u8d34</div>',recTemp:'<div class="tie-reply js-tie-reply" id="rec<#=id#>">        <div class="tie-photo"><a target="_self" class="js-digicon tie-digicon" href="javascript://<#=id#>"><span></span></a> <div class="rec-digcount js-rec-digcount"><#=supportCount#></div></div>        <div class="tie-inner js-tie-inner">            <span class="tie-sum-author">               <span class="tie-from layerUserName">                <#if(screenName==""){#>                   <#=nickname#>                 <#}else{#>                   <a href="http://t.163.com/<#=screenName#>" target="_blank"><#=nickname#></a>                 <#}#>               </span>               <span class="tie-ip">[<#=from#>]</span>            </span>            <span class="tie-postTime"><#=postTime#></span>            <div class="tie-body js-body">                 <#=body#>            </div>            <ul class="tie-operations">                <#if (relatedPost) { #>                <li class="tie-relatedPost">\u6765\u81ea\uff1a<a href="<#=relatedPost.href#>" target="_blank"><#=relatedPost.title#></a></li>                <#}#>                 <li class="support"><a rel="nofollow"  target="_self" href="javascript://<#=id#>" class="js-ding">\u9876<em class="js-ding-em">[<#=supportCount#>]</em></a></li>                <li><a rel="nofollow" target="_self"  class="js-reply" href="javascript://<#=id#>" nodeId="rec<#=id#>">\u56de\u590d</a></li>                <li><a rel="nofollow" target="_self"  href="javascript://<#=id#>"  class="js-copy">\u590d\u5236</a></li>            </ul>        </div>    </div>',newtitle:'<div class="tie-new-title">\u6700\u65b0\u8ddf\u8d34</div>',floorTemp:'<div class="tie-reply js-tie-reply <#if(isLast){#>tie-last<#}#>" id="tie<#=id#>">        <div class="tie-photo">            <#if(screenName==""){#>                <img src="<#=photo#>" alt="<#=nickname#>" width="35" height="35">             <#}else{#>                <a href="http://t.163.com/<#=screenName#>" target="_blank"><img src="<#=photo#>" alt="<#=nickname#>" title="<#=nickname#>" width="35" height="35"></a>            <#}#>        </div>        <div class="tie-inner js-tie-inner">            <span class="tie-sum-author">               <span class="tie-from layerUserName">                <#if(screenName==""){#>                   <#=nickname#>                 <#}else{#>                   <a href="http://t.163.com/<#=screenName#>" target="_blank"><#=nickname#></a>                 <#}#>               </span>               <span class="tie-ip">[<#=from#>]</span>            </span>            <span class="tie-postTime"><#=postTime#></span>            <div class="tie-body js-body">                 <#=body#>            </div>            <ul class="tie-operations">                <#if (relatedPost) { #>                <li class="tie-relatedPost">\u6765\u81ea\uff1a<a href="<#=relatedPost.href#>" target="_blank"><#=relatedPost.title#></a></li>                <#}#>                 <li class="support"><a rel="nofollow"  target="_self" href="javascript://<#=id#>" class="js-ding">\u9876<em class="js-ding-em">[<#=supportCount#>]</em></a></li>                <li><a rel="nofollow" target="_self"  class="js-reply" href="javascript://<#=id#>" nodeId="tie<#=id#>">\u56de\u590d</a></li>                <li><a rel="nofollow" target="_self"  href="javascript://<#=id#>"  class="js-copy">\u590d\u5236</a></li>            </ul>        </div>    </div>',tiemore:'<a class="js-tiemore tie-more" href="<#=url#>" target="_blank">\u67e5\u770b\u5168\u90e8\u8ddf\u8d34<em>>></em></a>',oneLayerTieTemp:'<div class="tie-oneLayer layerFontColor"><#=b#></div>',oneLayerRecTieTemp:'<div class="tie-oneLayer layerFontColor js-body"><#=b#></div>',frontOfFloorTemp:'<div class="tie-frontOfFloor layerBgcolor">            <#=innerFloor#>            <div class="tie-floorInner">                <span class="tie-floor-author layerUserName"><#=author#></span>                <span class="tie-floor-index"><#=seq#></span>            </div>            <p class="tie-floor-content layerFontColor"><#=content#></p>     </div>',midOfFloorTemp:'<div class="tie-midOfFloor layerBgcolor">            <div class="tie-floorInner">                <span class="tie-floor-author layerUserName"><#=author#></span>                <span class="tie-floor-index"><#=seq#></span>            </div>            <p class="tie-floor-content layerFontColor"><#=content#></p>        </div>',endOfFloorTemp:'<div class="tie-endOfFloor layerBgcolor">            <#=innerFloor#>            <div class="tie-floorInner">                <span class="tie-floor-author layerUserName"><#=author#></span>                <span class="tie-floor-index"><#=seq#></span>            </div>            <p class="tie-floor-content layerFontColor"><#=content#></p>        </div>',lastFloorTemp:'<#=wholeFloor#><p class="tie-floor-content layerFontColor"><#=content#></p>',summaryFloorTemp:'<div class="tie-commentBox layerBgcolor">            <div class="tie-commentBox layerBgcolor">                <div class="tie-commentInfo">                    <span class="tie-sum-author layerUserName"><#=author#></span>                    <span class="tie-floorCount">1</span>                </div>                <p class="tie-content layerFontColor"><#=content#></p>            </div>            <p class="js-expand hideTips" autoId="<#=id#>" nodeId="tie<#=id#>" title="\u70b9\u51fb\u5c55\u5f00">\u5df2\u7ecf\u9690\u85cf\u91cd\u590d\u76d6\u697c <span class="js-expand-span">[\u70b9\u51fb\u5c55\u5f00]</span></p>        </div>        <p class="tie-content layerFontColor"><#=lastContent#></p>',replyModuleTemp:'<div class="tie-postform">      <form target="_blank" method="post" class="js-postForm" accept-charset="gbk">        <div class="module-wraper js-postinput">            <div class="moduleInput-wraper">               <textarea class="tie-textarea js-postBox" cols="80" rows="8" name="body"></textarea>            </div>            <div class="area-input-tips js-tie-tips"> \u6587\u660e\u4e0a\u7f51\uff0c\u767b\u5f55\u53d1\u8d34</div>            <div class="area-input-leftline"></div>            <div class="area-input-topline"></div>            <span class="tie-sprite replyModule-arrow js-arrow"></span>        </div>        <input type="hidden" name="username"/>        <input type="hidden" name="board"/>        <input type="hidden" name="threadid"/>        <input type="hidden" name="url"/>        <input type="hidden" name="quote"/>        <input type="hidden" name="isTinyBlogSyn" value="1"/>       </form>       <div class="js-unlogin" style="display:none">         <div class="tie-author-logno js-loginInput">            <div class="author-name">                <em class="tie-sprite"></em>                <input type="text"  class="tie-textbox js-username" />                <div class="author-tips js-nametips"> \u8d26\u53f7</div>            </div>            <div class="author-pwd">                <em class="tie-sprite"></em>                <input type="password"  class="tie-textbox js-password" />                <div class="author-tips js-pwdtips">\u5bc6\u7801</div>            </div>          </div>          <div class="tie-author-login">            <label class="js-syn"><input type="checkbox" checked="checked" /><em class="tie-sprite"></em></label>            <a href="javascript:void(0);" target="_self" class="tie-sprite post-btn js-loginPostBtn">\u767b\u5f55\u5e76\u53d1\u8868</a>          </div>      </div>      <div class="js-login" style="display:none">          <div class="tie-author-logon">                <a rel="nofollow" target="_blank" class="tie-myposts js-tie-myhome" ><strong class="tie-username js-tie-username"></strong></a>&nbsp;                 <a rel="nofollow" class="tie-myposts js-tie-myposts" target="_blank"> \u6211\u7684\u8ddf\u8d34</a> |                 <a rel="nofollow" class="tie-myTinyBlog" target="_blank" href="http://t.163.com/">\u6211\u7684\u5fae\u535a</a> |                 <a rel="nofollow" class="tie-logout js-tie-logout"  target="_self">\u9000\u51fa</a>          </div>          <div class="tie-author-login">                <label class="js-syn"><input type="checkbox" checked="checked" /><em class="tie-sprite"></em></label>                <a href="javascript:void(0);" target="_self" class="tie-sprite post-btn js-postBtn">\u9a6c\u4e0a\u53d1\u8868</a>         </div>       </div>     </div>',tinyTipsTemp:'<p>                    <span class="icon-success success" style="display:none"></span>                    <span class="message"><#=message#></span>                </p>                <span class="arrow arrowTop"></span>',copyTieTemp:'<div class="tie-dialog-titlebar">                    <span class="tie-dialog-title">\u590d\u5236\u6536\u85cf</span>                     <a class="tie-dialog-close" target="_self" href="#"></a>                </div>                <div class="tie-dialog-body">                    <p class="tie-repostdialog-tips">                        <span class="failed"><span class="icon-failed"></span>\u6d4f\u89c8\u5668\u9650\u5236\uff0c\u8bf7\u590d\u5236\u94fe\u63a5\u548c\u6807\u9898\u7ed9\u597d\u53cb\u3001\u8bba\u575b\u6216\u535a\u5ba2\u3002</span>                    </p>                    <p class="tie-repostdialog-content" style="display:block;">                        <span class="tie-repostdialog-title js-copytitle"></span>                        <br>                        <a class="tie-repostdialog-url js-copyurl" href=""></a>                    </p>                    <div style="text-align: center;">                        <a class="bigbtn tie-dialog-close" href="javascript:void(0);">\u786e \u5b9a</a>                        <input type="button" value="" class="hiddenbtn">                    </div>                </div>                <span class="c1"></span>                <span class="c2"></span>                <span class="c3"></span>                <span class="c4"></span>                <span class="c6"></span>                <span class="c7"></span>                <span class="c8"></span>                <span class="c9"></span>'};
C.prototype.init=function(){this.urlParm={host:this.option.host,boardId:this.option.boardId,threadId:this.option.threadId,channel:this.isSpecial?this.option.threadId.substring(4,8):this.option.threadId.substr(8,4),dir:this.isSpecial?this.option.threadId.substring(14,16):this.option.threadId.substr(6,2),userId:this.userid,url:window.location.href.replace(/[&#].*$/,"").split("?")[0],userID:this.account,tId:this.option.tId};this.urlParm.dir=this.urlParm.dir.toUpperCase();S.cookie.currentTie=j.util.simpleParse(S.cookie.checkedTie,this.urlParm);S.cookie.postTime=j.util.simpleParse(S.cookie.postTime,this.urlParm);S.cookie.domain=j.util.simpleParse(S.cookie.domain,this.urlParm);window.eval("var tieurl = "+j.util.simpleParse(S._url,this.urlParm));S.url=tieurl;for(var e in S.url)S.url[e]=S.url[e].replace("comment.yuedu","comment.book");this.initUser();this.showTitleBar();this.initListEvent()};C.prototype.initUser=function(e){var t=this;this.logined=!1;this.avatar=this.account=this.userid="";var i=j.cookie.get(S.cookie.pInfo),n=j.cookie.get(S.cookie.nickname);if(i!=""&&(i=i.split("|"),t.account=i[0],t.userid=t.account.split("@")[0],j.cookie.get(S.cookie.sInfo)))t.logined=!0;if(!t.logined){var o=NE.auroraLogin;o.getUid();var s=o.info;t.logined=s.thirdparty;if(t.logined){NE(".js-tie-myposts").hide();t.thirdparty=true;n=s.uid+"|"+s.userName+"||"+(s.avatar||"")+"||";i=[s.uid];t.nickname=s.nickname;t.logout="/oauth/logout/";t.userid=s.userName}}if(t.logined){if(n!=""){var r=n.split("|"),a=i[0]==r[0]?true:false;a||t.reloadCookie();setTimeout(function(){a||(n=j.cookie.get(S.cookie.nickname),r=n.split("|"));if(t.logined&&r.length>=5){if(!t.nickname)t.nickname=r[1].replace(/@[^@]+\.com$/i,"");t.avatar=r[4]||s.avatar||"";if(r.length==8)r[6]&&r[6]!="0"&&r[6]!="null"&&(t.isTinyBlogSyn=parseInt(r[6])||1)}else if(1==r.length&&!t.nickname)t.nickname=r[0];!t.nickname&&(t.nickname=t.userid);t.showPostArea(t.tiePostAreaNode,!1);t.option.isShowComment&&setTimeout(function(){t.getData();if(typeof e=="function")e()},0)},100)}else t.logined&&(t.reloadCookie(),setTimeout(function(){t.initUser()},100))}else{t.showPostArea(t.tiePostAreaNode,!1);t.option.isShowComment&&setTimeout(function(){t.getData()},0)}};var H;C.prototype.getData=function(){var e=this;H=e.option.threadId;r({url:e.option.host=="tie"?S.url.hotSpecialTieSrc:S.url.hotTieSrc,callBack:function(){if(window.replyData){var t=window.replyData;if(t.thread&&H==t.thread.docid){e.showTieList(t);e.threadTitle=t.thread.title}}}})};C.prototype.showTieList=function(e){if(!e)return;var t="",i="";e.hotVotePost&&(i=P.newtitle+this.buildTieFloor(e.hotVotePost));e.topHotPost&&(t=P.hottitle+this.buildRecFloor(e.topHotPost));var n;if(t!=""||i!="")this.showNode.style.display="block",this.tiePostAreaNode.addCss("tie-post-list"),n=j.util.parseTpl(P.tiemore,{url:S.url.commentPage}),this.dataNode.innerHTML=t+i+n,this.markFloor();if(this.option.callback)this.option.callback(e)};C.prototype.markFloor=function(){if(j.cookie.get(S.cookie.notFinishQuote,!0)){var e=j.cookie.get(S.cookie.notFinishQuote,!0).split("|")[0];j("#"+e)&&this.reply(j("#"+e).$(".js-reply").$(0))}};C.prototype.reloadCookie=function(){(new Image).src=S.reloadCookie+"?time="+(new Date).getTime()};C.prototype.buildRecFloor=function(e){if(e&&e.length){for(var t=e.length,i,n=[],o=0;o<t;o++)i=new I(e[o]),this.floorDataCache[i.id]=i,i.body=i.toFloor(),n[o]=j.util.parseTpl(P.recTemp,i);return n.join("")}else return""};C.prototype.buildTieFloor=function(e,t){if(e&&e.length){var i=-1,n=e.length,o,s=[];for(null!=t&&(n=Math.min(n,t));++i<n;)o=new E(e[i]),this.floorDataCache[o.id]=o,o.body=o.toFloor(),o.isLast=i==n-1?!0:!1,s[i]=j.util.parseTpl(P.floorTemp,o);return s.join("")}else return""};C.prototype.checkInput=function(e,t){var i=e.value.trim().replace(/[^\u0000-\u007f]/g,"aa").length;if(i==0)return alert("\u8bf7\u586b\u5199\u5185\u5bb9"),e.focus(),!1;else if(i<4)return alert("\u5185\u5bb9\u592a\u77ed\uff0c\u81f3\u5c112\u4e2a\u6587\u5b57"),e.focus(),!1;else if(i>2e3)return alert("\u5185\u5bb9\u592a\u957f\uff0c\u4e0d\u80fd\u8d85\u8fc71000\u4e2a\u6c49\u5b57"),!1;else{var i=g(e),n=e.value.length,i=i.end==n&&i.start==0&&n!=0?!0:!1;if(i)return alert("\u8bf7\u8f93\u5165\u66f4\u591a\u89c2\u70b9"),e.focus(),!1}if(t&&(i=this.floorDataCache[t].length,i>=S.maxFloor))return alert("\u60a8\u7684\u56de\u590d\u8d85\u51fa\u5185\u5bb9\u9650\u5236"),!1;i=(new Date).getTime();return i-this.startTime>this.interval?(this.startTime=i,this.postCount=0,!0):this.postCount>4?(alert("\u6c34\u4e0d\u662f\u8fd9\u4e48\u704c\u6ef4\uff0c\u559d\u53e3\u8336\u6b47\u4e00\u5206\u949f\u5427\uff01"),!1):!0};C.prototype.showPostArea=function(e,i,n){var o=this,i=i||!1,s=e.$(".js-unlogin").$(0),r=e.$(".js-login").$(0),a=e.$(".js-postForm").$(0),l=e.$(".js-postBox").$(0),c=e.$(".js-postBtn").$(0);var u=this.option.boardId;var f=this.option.threadId;if(o.logined){r.style.display="block";s.style.display="none";e.$(".js-tie-myhome").$(0).attr("href",S.url.watering);e.$(".js-tie-myposts").$(0).attr("href",S.url.watering);e.$(".js-tie-logout").$(0).attr("href",o.logout||S.url.logout);e.$(".js-tie-username").$(0).innerHTML=o.nickname;if(!i){var s=e.$(".js-area-photo").$(0),p=e.$(".js-larea-photo").$(0),r=e.$(".js-ularea-photo").$(0);if(o.avatar==""||o.avatar.indexOf("face_big")!=-1){s.style.display="block";p.style.display="none"}else{s.style.display="none";p.style.display="block";p.$("img").$(0).attr("src",M({width:65,height:65,url:o.avatar}));N(p,function(){if(!T)T=new k("top","\u70b9\u51fb\u8bbe\u7f6e\u5934\u50cf");o.iconTips=T;o.iconTips.show();var e=j.style.getAbsPosition(p);o.iconTips.setPosition(e.x-(o.iconTips.width()-p.offsetWidth)/2,e.y+p.offsetHeight-10)});L(p,function(){o.iconTips.hide()})}r.style.display="none"}n=n||null;c.addEvent("click",function(){if(o.checkInput(l,n)){o.postCount+=1;j.cookie.set(S.cookie.toMain,1,.6,S.cookie.domain,"/");F&&(F.style.display="none")&&o.dataNode.$(".tie-replyed").removeCss("tie-replyed")&&(o.hasReply=!0);if(o.thirdparty){NE.load.ajax({method:"post",url:"/api/comment/insert",charset:"utf-8",dataType:"json",data:{board:u,threadid:f,quote:a.quote?a.quote.value:"",body:l.value}},function(e){a.submit()})}else{if(j.browser.msie)document.charset="gbk";a.submit();if(j.browser.msie)document.charset="utf-8"}l.value="",i?d({type:"tieNewsReply1"}):d({type:"tieNewsReply2"})}return!1})}else{r.style.display="none";s.style.display="block";var c=e.$(".js-loginPostBtn").$(0),m=e.$(".js-username").$(0),v=e.$(".js-password").$(0),g=!0;i||(g=e.$(".js-save")[0].checked?!0:!1);var y=function(){ursLogin({userNameVal:m.value,password:v.value,showMessage:function(e){alert(e)},success:function(){o.initUser(function(){a.submit()})},saveLogin:g})};c.addEvent("click",function(){y();return!1});var w=e.$(".js-nametips").$(0),b=e.$(".js-pwdtips").$(0);w.addEvent("click",function(){j(this).style.display="none";m.focus()});b.addEvent("click",function(){j(this).style.display="none";v.focus()});var C=e.$(".js-loginInput");m.addEvent("focus",function(){w.style.display="none";C.addCss("textbox-hover")});v.addEvent("focus",function(){b.style.display="none";C.addCss("textbox-hover")});m.addEvent("blur",function(){if(this.value.trim()=="")w.style.display="block";C.removeCss("textbox-hover")});v.addEvent("blur",function(){if(this.value.trim()=="")b.style.display="block";C.removeCss("textbox-hover")});t(m,function(){v.focus()});t(v,function(){y()});if(this.userid!="")m.attr("value",this.userid),w.style.display="none"}var x=e.$(".js-postinput").$(0),_=e.$(".js-tie-tips").$(0);_.addEvent("click",function(){j(this).style.display="none";l.focus()});l.addEvent("focus",function(){_.style.display="none";x.addCss("post-area-hover")});l.addEvent("blur",function(){if(this.value.trim()=="")_.style.display="block";x.removeCss("post-area-hover")});a.$("input[name=board]").attr("value",o.option.boardId);a.$("input[name=threadid]").attr("value",o.option.threadId);o.option.host=="dy"?o.option.tId?a.$("input[name=url]").attr("value",S.url.commentPageDy):alert("\u8bf7\u8f93\u5165tId\uff01"):a.$("input[name=url]").attr("value",S.url.commentPage);i?(a.$("input[name=quote]").attr("value",o.option.threadId+"_"+n),a.attr("action",S.url.post),window.addEvent("unload",function(){o.hasReply?j.cookie.del(S.cookie.notFinishQuote,location.host,"/"):j.cookie.set(S.cookie.notFinishQuote,o.quoteId+"|"+l.value,10,location.host,"/")}),j.cookie.get(S.cookie.notFinishQuote,!0)&&(c=j.cookie.get(S.cookie.notFinishQuote,!0).split("|"),l.attr("value",c[1]))):(a.attr("action",S.url.dopost),function(e,t){window.addEvent("unload",function(){j.cookie.set(S.cookie.notFinishComment,"temp|"+e.value,10,location.host,"/")});setTimeout(function(){if(j.cookie.get(S.cookie.notFinishComment,!0)){var i=j.cookie.get(S.cookie.notFinishComment,!0).split("|");i[1].toString()=="undefined"&&(i[1]="");e.attr("value",i[1]||"");j.cookie.del(S.cookie.notFinishComment,location.host,"/")}if(e.value.trim()!="")t.style.display="none"},1e3)}(l,_),j(".js-tieachor").addEvent("click",function(){!function(e){setTimeout(function(){e.focus();var t=h();window.scrollTo(0,t-200)},10)}(l);d({type:"newsIconReply"})}));var E=a.$("input[name=isTinyBlogSyn]").$(0),e=e.$(".js-syn");S.mod.synToTinyBlog?(e.addEvent("click",function(){j(this).$("input").$(0).checked?E.attr("value","1"):E.attr("value","-1")}),e.each(function(e,t){N(t,function(){if(!o.weiboTips)o.weiboTips=new k("top","\u52fe\u9009\u540e\uff0c\u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u5f00\u901a\u5fae\u535a\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u4e3a\u60a8\u6fc0\u6d3b\u3002");o.weiboTips.show();var e=j.style.getAbsPosition(t);o.weiboTips.setPosition(e.x-(o.weiboTips.width()-t.offsetWidth)/2,e.y+t.offsetHeight+10)});L(t,function(){o.weiboTips.hide()})})):(e.style.display="none",E.attr("value","-1"))};C.prototype.showTitleBar=function(){this.option.host=="dy"?this.option.tId?(this.bactCountNode.attr("href",S.url.commentPageDy),this.bjoinCountNode.attr("href",S.url.commentPageDy),this.joinCountNode.attr("href",S.url.commentPageDy)):alert("\u8bf7\u8f93\u5165tId\uff01"):(this.bactCountNode.attr("href",S.url.commentPage),this.bjoinCountNode.attr("href",S.url.commentPage),this.joinCountNode.attr("href",S.url.commentPage));this.regNode.attr("href",S.url.reg)};C.prototype.initListEvent=function(){var e=this;e.tieArea.addEvent("click",function(t){t=t.target||t.srcElement;switch(t.className.split(" ")[0]){case"js-ding":e.ding(t);break;case"js-ding-em":e.ding(t.parentNode);break;case"js-digicon":e.iconding(t);break;case"js-reply":e.reply(t);break;case"js-copy":e.copy(t);break;case"js-expand":e.expand(t);break;case"js-expand-span":e.expand(t.parentNode);break;case"js-actCount":d({type:"tiePageLink2"});break;case"js-joinCount":d({type:"tiePageLink2"});break;case"js-tiemore":d({type:"tiePageLink3"});break;case"js-bactCount":d({type:"tiePageLink4"});break;case"js-bjoinCount":d({type:"tiePageLink4"})}});j(".js-tielink").addEvent("click",function(){d({type:"tiePageLink1"})})};C.prototype.expand=function(e){var t=e.getAttribute("autoId"),e=e.getAttribute("nodeId"),e=j("#"+e);e.$(".js-body").$(0).attr("innerHTML",this.floorDataCache[t].toWholeFloor());if(D)try{e.$(".js-postBox").$(0)&&e.$(".js-postBox").$(0).focus()}catch(i){}};C.prototype.ding=function(e,t){var t=t||!1,i=n(e);r({url:j.util.simpleParse(S.url.support,{id:i}),callBack:function(){}});j("#rec"+i)&&!t&&j("#rec"+i).$(".js-digicon").$(0)&&(this.iconding(j("#rec"+i).$(".js-digicon").$(0),!0),d({type:"tieNewsVotelink"}));a(j(document.createElement("span")).attr("innerHTML",e.innerHTML.replace(/\d+/,function(e){return parseInt(e)+1})).addCss("visited"),e);return!1};C.prototype.iconding=function(e,t){var t=t||!1,i=n(e);r({url:j.util.simpleParse(S.url.support,{id:i}),callBack:function(){}});var o=j(e).$("span").$(0),s=j(e.parentNode).$(".js-rec-digcount").$(0),a=parseInt(s.innerHTML);o.style.display="block";s.innerHTML=a+1;j(e).removeCss("js-digicon").addCss("tie-digicon-click");t||(this.ding(j("#rec"+i).$(".js-ding").$(0),!0),d({type:"tieNewsVoteIcon"}));o.animate({opacity:1,top:-18},.6,"linear",function(){o.animate({opacity:0},.6,"linear",function(){o.style.display="none"})});return!1};var F=null;C.prototype.reply=function(e){var t=n(e),i=e.getAttribute("nodeId"),o=j("#"+i),s=o.$(".js-tie-inner").$(0);this.floorDataCache[t].length>1&&(o=s);F?(o.appendChild(F),j(F).$(".js-postBox").$(0).attr("value",""),j(F).$("input[name=quote]").attr("value",this.option.threadId+"_"+t)):(s=document.createElement("div"),s.className="tie-replyModule",s.innerHTML=P.replyModuleTemp,o.appendChild(s),this.showPostArea(j(s),!0,t),F=s,this.pos=j.style.getAbsPosition(e),this.arrow=j(s).$(".js-arrow").$(0));this.quoteId=i;this.hasReply=!1;t=e.className.split(" ")[1]=="tie-replyed";this.dataNode.$(".tie-replyed").removeCss("tie-replyed");t?(F.style.display="none",this.hasReply=!0):(F.style.display="block",j(F).$(".js-postBox").$(0).focus(),j(e).addCss("tie-replyed"));this.arrow.style.left=this.pos.x-j.style.getAbsPosition(F).x+"px"};k.prototype={width:function(){return this._wrapper.clientWidth},height:function(){return this._wrapper.clientHeight},autoShow:function(){var e=this;e._wrapper.addCss("display:block");e.clearTid&&clearTimeout(e.clearTid);e.clearTid=setTimeout(function(){e.hide()},1e3)},show:function(){this._wrapper.addCss("display:block")},hide:function(){this._wrapper.addCss("display:none")},setPosition:function(e,t){this._wrapper.addCss("display:block").addCss("left:"+e+"px").addCss("top:"+t+"px")},setData:function(e,t){window.clipboardData.clearData();window.clipboardData.setData("Text",t)}};_.prototype.setData=function(e,t){j.one(".js-copyurl",this._wrapper).attr("href",t).attr("innerHTML",t);j.one(".js-copytitle",this._wrapper).innerHTML=e};_.prototype.show=function(){this.winObj.show()};var O=null,R=null;C.prototype.copy=function(e){var t=j.style.getAbsPosition(e),i=n(e),o=j.util.simpleParse(S.repostTitle,{title:this.threadTitle}),i=j.util.simpleParse(S.url.repost,{id:i});if(window.clipboardData)R||(R=new k("bottom","\u590d\u5236\u6210\u529f\uff0c\u6309CTRL+V\u53d1\u9001\u7ed9\u597d\u53cb\u3001\u8bba\u575b\u6216\u535a\u5ba2\u3002")),R.setData(o,i),R.autoShow(),R.setPosition(t.x-(R.width()-e.offsetWidth)/2,t.y-R.height()-e.offsetHeight);else{if(!O)e=document.createElement("div"),e.className="tie-dialog tie-repostdialog borderShade",e.innerHTML=P.copyTieTemp,document.body.appendChild(e),O=new _(j(e));O.setData(o,i);O.show()}};var B=/^[^\s&;<>]+/i,U=/<a[^<>]*>(.*?)<\/a>/i,z=/ip[:\uff1a]([\d\.\*]+)/i,W=/^TELE_(.*?)_\{\}$/,q=/(\w{16})\.html/i;E.prototype.toFloor=function(e){null==e&&(e=this.isShrink);return 1==this.length?j.util.parseTpl(P.oneLayerTieTemp,this.data["1"]):e&&this.length>2?this.toSummaryFloor():this.toWholeFloor()};E.prototype.toWholeFloor=function(){var e="",t,i=this.length,n=1,o;for(o=Math.min(i,S.criticalLayer);n<o;n++)e=j.util.parseTpl(P.frontOfFloorTemp,{content:this.data[n].b,seq:n,author:this.data[n].f,innerFloor:e});o=i-S.criticalLayer;if(o>0){for(t=[];n<o;n++)t.push(j.util.parseTpl(P.midOfFloorTemp,{content:this.data[n].b,seq:n,author:this.data[n].f}));e+=t.join("")}for(;n<i;n++)e=j.util.parseTpl(P.endOfFloorTemp,{content:this.data[n].b,innerFloor:e,seq:n,author:this.data[n].f});return j.util.parseTpl(P.lastFloorTemp,{seq:n,content:this.data[i].b,author:this.author,from:this.from,ip:this.ip,wholeFloor:e})};E.prototype.toSummaryFloor=function(){return j.util.parseTpl(P.summaryFloorTemp,{from:this.from,ip:this.ip,author:this.data["1"].f,content:this.data["1"].b,lastContent:this.data[this.length].b,id:this.id})};c(E,I);I.prototype.toFloor=function(e){null==e&&(e=this.isShrink);return 1==this.length?j.util.parseTpl(P.oneLayerRecTieTemp,this.data["1"]):e&&this.length>2?this.toSummaryFloor():this.toWholeFloor()};F=null;window.TieAnywhere={Tie:C,template:P,Floor:E,config:S,extend:c,crossDomainRequest:s,crossjsDomainRequest:r,cutString:function(e,t,i){i*=2;if(!e||!i)return"";for(var n=0,o="",s=t;s<e.length;s++){e.charCodeAt(s)>255?n+=2:n++;if(n>i)return o;o+=e.charAt(s)}return e},oimage:M,formatNumber:l}}(NTES);function tryEval(str){var obj=null;try{obj=eval("("+str+")")}catch(e){}return obj}!function(e){var t=window.jNews=window.jNews||{};var i=t.isPad;var n=e("#topbar"),o=0;e.snsShare=function(e){this.info={docid:e.docid,host:location.host,title:encodeURIComponent(e.title),summary:encodeURIComponent(e.summary),url:encodeURIComponent(e.url),source:encodeURIComponent("\u8350\u65b0\u95fb"),pic:e.pic};this.yxInfo={title:e.title,desc:e.summary,image:e.pic||"http://img1.cache.netease.com/f2e/news/commend/images/appicon.png",url:e.url,source:"\u8350\u65b0\u95fb"}};e.snsShare.prototype={pop:function(e,t){if(e){window.open(e)}},yixin:function(){window.YixinShare&&YixinShare.open(this.yxInfo);this.pop(null,"yixin")},163:function(){var t=e.template.replace("http://t.163.com/article/user/checkLogin.do?link=http://{host}/&source={source}&info={title} {url}&images={pic}&togImg=true",this.info);this.pop(t,"ne")},renren:function(){var t=e.template.replace("http://widget.renren.com/dialog/share?resourceUrl={url}%3Fsns_renren&pic={pic}&title={title}&description=",this.info);this.pop(t,"renren")},qzone:function(){var t=e.template.replace("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}%3Fsns_qzone&desc=&summary={summary}&title={title}&site={source}&pics={pic}",this.info);this.pop(t,"qzone")},youdao:function(){var t=e.template.replace("http://note.youdao.com/memory/?url={url}%3Fsns_youdao&title={title}&summary={summary}&product={source}",this.info);this.pop(t,"youdao")},sina:function(){var t=e.template.replace("http://service.weibo.com/share/share.php?title={title}&url={url}%3Fsns_weibo&pic={pic}&searchPic=false&appkey=3255838965&ralateUid=3854367404",this.info);this.pop(t,"sina")}};var s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var r=/\\|'|\r|\n|\t|\u2028|\u2029/g;e.template.parse=function(e,t){var i;var n=/<%[-=]([\s\S]+?)%>|<%([\s\S]+?)%>|$/g;var o=0;var a="__p+='";e.replace(n,function(t,i,n,l){a+=e.slice(o,l).replace(r,function(e){return"\\"+s[e]});if(i){a+="'+\n(typeof "+i+"=='undefined'?'':(__t=("+i+"))==null?'':__t)+\n'"}if(n){a+="';\n"+n+"\n__p+='"}o=l+t.length;return t});a+="';\n";a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function("obj",a)}catch(l){l.source=a;throw l}if(t)return i(t);var c=function(e){return i.call(this,e)};c.source="function(obj){\n"+a+"}";return c};var a=e(".mainwrap");var l;var c;var u=e("#epMask");var d=e(".js-upcount");var h;var f=navigator.userAgent.toLowerCase();var p={ie6:/msie 6/.test(f)};if(p.ie6){e.ie6fix=function(){setTimeout(function(){u.css({height:a[0].offsetHeight})},50)}}var m='<div class="tie-reply js-tie-reply"><div class="tie-inner js-tie-inner">            <span class="tie-sum-author">    <span class="tie-from layerUserName">  {userName}  </span>          </span>            <span class="tie-postTime">{commentTime}</span>            <div class="tie-body js-body">   <div class="tie-oneLayer layerFontColor">{content}</div>     </div> </div></div>';var v=e.template.parse('<ul class="commend-nav">    <%for(var i=0,len=segs.length;i<len;i++){%>      <%for(var j=segs[i][0];j<=segs[i][1];j++){%>          <%if(j==curPage){%><li class="nav-page nav-active"><%=j%></li><%}else{%>            <li class="nav-page"><a><%=j%></a></li>         <%}%>      <%}%>        <%if(i<len-1){%><li class="nav-page">\u2026</li><%}%>    <%}%></ul>');function g(){var t=e(".feedback-form",l);var i=e(".ep-content-side-inner",l)[0];if(t[0]){var o=t.find("textarea");var s=t.find(".feedback-email");var r=e.cookie.get("P_INFO");if(r&&s[0]){s[0].value=r.replace(/\|.*/,"")}e(".feedback-title",l).bind("click",function(){t.show();c()});e(".feedback-cancel",l).bind("click",u);var a=t[0].reason;e(".feedback-confirm",l).bind("click",function(i){i.preventDefault&&i.preventDefault();var n=t[0];var o=null;for(var s=0,r=a.length;s<r;s++){if(a[s].checked){o=a[s].value;break}}var l=n.email.value.replace(/(^\s+|\s+$)/g,"");if(l&&!/^[\w\-\.]+\@[\w\-]+\.[\w\-\.]+$/.test(l)){alert("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740");n.email.focus();return}var c=n.reason_text.value.replace(/^\s+/,"");if(!o&&!c){alert("\u8bf7\u9009\u62e9\u6216\u586b\u5199\u4e3e\u62a5\u7406\u7531");return}n.url.value=location.href;if(e.browser.msie){document.charset="gbk";n.submit();document.charset="utf-8"}else{n.submit()}n.reason_text.value="";alert("\u8c22\u8c22\u60a8\u7684\u53cd\u9988\u3002");u()});t.bind("click",function(e){var i=e.target;if(i.tagName&&i.tagName.toLowerCase()=="input"){if(i.name=="reason"){t[i.value?"removeClass":"addClass"]("feedback-active");c()}}});if(a[a.length-1].checked)t.addClass("feedback-active")}function c(){var e=l.parentNode;var t=l.offsetHeight;var o=document.documentElement.clientHeight||window.innerHeight;var s=n[0].offsetTop;var r=o-t-s-126;if(r>0)r=0;i.style.top=r+"px";if(!/mainnav/.test(e.className)){if(e.offsetHeight<t){e.style[p.ie6?"height":"minHeight"]=t+20+"px"}}}function u(){t.hide();t[0].reason_text.value="";c()}}e.ugcInfo=function(t,n){if(!l){l=e("#epContentRight")[0];if(!l)return;g()}var o=e("ul.mod-f12list",l);var s='<li><a href="/#detail/'+(n||99)+'/{docID}?101" title="{title}" docid="{docID}" srctype="101" target="_self">{title}</a></li>';o[0].innerHTML=t.relateRecom?e.template.replace(s,t.relateRecom):"";s=s.replace(/([\?"])101"/g,"$1"+'102"');o[1].innerHTML=t.guessLike?e.template.replace(s,t.guessLike.slice(0,5)):"";if(o[2]){s=s.replace(/([\?"])102"/g,"$1"+'109"');var r=Math.max(0,t.guessLike?t.guessLike.length-3:0);o[2].innerHTML=t.guessLike?e.template.replace(s,t.guessLike.slice(r)):""}d.html(t.up_times||0);var a=e(".j-tie-header");if(t.ugc){var u=t.ugc.split(/,/);b({boardId:u[0],threadId:u[1],channel:(u[2]||"").replace(/\..*/,"")})}else{e(".js-tielink,.ep-icon-tie").hide();e.classList.add(a[0],"active");a[1].style.display="none"}if(t.weibo){c.apply(a[0]);e(".js-weiboCount").html(t.weibo);h=tryEval(t.weiboinfo);if(h.length){for(var f=0,p=h.length;f<p;f++){h[f].commentTime=new Date(h[f].commentTime).format("yyyy-MM-dd HH:mm:ss")}w(1)}}if(t.doc_url){var m=e(".ep-source")[0];if(m){var v=m.parentNode;if(t.doc_url.indexOf("love.163.com")>-1){var T=document.createElement("p");T.className="huatianlink";T.innerHTML='<a href="'+t.doc_url+'?vendor=163.jnews.top" class="btn-red">\u8bbf\u95eeTa\u7684\u82b1\u7530\u4e3b\u9875</a>';v.insertBefore(T,m);e("a",m).each(function(){var e=this.getAttribute("href")+"?vendor=163.jnews.top";this.setAttribute("href",e)});var C=e(".ep-info a")[0];if(C)C.setAttribute("href",C.getAttribute("href")+"?vendor=163.jnews.top")}else if(t.doc_url.indexOf("yuehui.163.com")>-1){var T=m.previousSibling;while(T){if(T.tagName&&T.tagName.toLowerCase()=="p")break;T=T.previousSibling}if(T){T.className="huatianlink";e("a",T).each(function(){this.setAttribute("href",this.getAttribute("href").replace(/web:gethtmlclick;/,"")+"#yuehui.jnews");this.className="btn-red"})}e("a",m).each(function(){var e=this.getAttribute("href")+"#yuehui.jnews";this.setAttribute("href",e)});var C=e(".ep-info a")[0];if(C)C.setAttribute("href",C.getAttribute("href")+"#yuehui.jnews")}}}if(!i)y(t.docID)};function y(t){o++;var i="http://imgsize.ph.126.net/?imgurl=http://j.news.163.com/hy/qrpic/"+t+"_140x180.jpg";var n=new Image;n.qrid=o;var s=e(".sharecommend-wrap")[0];n.onload=function(){n.onload=null;if(n.qrid==o){var e=document.createElement("div");e.className="qr-wrap";e.innerHTML='<span>\u626b\u4e00\u626b\u5728\u624b\u673a\u6253\u5f00\u5f53\u524d\u9875</span>          <div class="qr-wrap-img" style="background-image:url('+i+')"></div>';if(s)s.appendChild(e)}n=null};n.src=i}function w(t){var i=20;var n=Math.floor((h.length-1)/i)+1;var o=i*(t-1);var s=o+i;var r=e.template.replace(m,h.slice(o,s));if(n>1){var a=[];var l=[1,3];var c=[t-1,t+1];var u=[n-2,n];if(c[0]<=l[1]){c[0]=1;l=null}if(c[1]>=u[0]){c[1]=n;u=null}if(l)a.push(l);a.push(c);if(u)a.push(u);r+=v({curPage:t,segs:a})}e(".js-weibo-data").html(r);e.ie6fix&&e.ie6fix()}function b(t){var i=e(".j-tie-header");var n=e(".j-tie-body");c=function(t){var o=this;i.each(function(i){var s=this==o;var r=s?"add":"remove";e.classList[r](this,"active");e.classList[r](n[i],"active");t&&s&&"function"===typeof neteaseTracker&&neteaseTracker(false,"http://"+location.host+"/"+(i?"articletabcom":"articletabweibo"))});e.epScroll&&e.epScroll.refresh()};i.bind("click",c);var o=t.threadId;var s=true,r=e.validChannel(t.channel),l=true;var d=t.boardId,h=r,f=f,m=window.replyData;e(".js-tielink").attr("href","http://comment."+h+".163.com/"+d+"/"+o+".html#articlejiannewscomment").attr("target","_blank");var v=function(e){return TieAnywhere.formatNumber(e.toString(),3)};new TieAnywhere.Tie({wraper:NTES("#tieArea"),threadId:o,boardId:d,host:h,isShowComment:s,isStrict:l,tId:f,callback:function(t){if(p.ie6){u.css({height:a[0].offsetHeight})}var n;var o=t.thread.rcount||0;if(typeof t.joincount=="undefined"){o=n=0}else{n=t.joincount}e(".js-replycount,.js-totalcount").html(n);e(".js-tiecount").html(o);e(".js-joinCount").html(v(n));e(".js-bjoinCount").html(v(n));e(".js-actCount").html(v(o));e(".js-bactCount").html(v(o));if(o){c.apply(i[1])}}})}e("#epContent").bind("click",function(e){var t=e.target||e.srcElement;if(t.tagName.toLowerCase()=="a"&&t.parentNode&&t.parentNode.className=="nav-page"){var i=parseInt(t.innerHTML);if(i){w(i)}}});var T=e(".ep-tool-share"),C;T.bind(i?"touchstart":"mouseover",function(e){e.stopPropagation&&e.stopPropagation();if(C){clearTimeout(C);C=null}T.addClass("ep-tool-share-hover")});if(i){e("body").bind("touchstart",function(){T.removeClass("ep-tool-share-hover")})}else{T.bind("mouseout",function(){C=setTimeout(function(){C=null;T.removeClass("ep-tool-share-hover")},150)})}}(NE);!function(e){var t=window.jNews=window.jNews||{};var i=e.apihost="/hy";var n,o;var s={};var r=e(".mainnav");var a=e(".js-tiecount");var l=e(".mainwrap");var c=e(".commend-listwrap");var u=e("#recNum");var d=e("#shareNum");var h=t.isie;var f=t.isie6;var p=t.isPad;function m(t){var i=e.endpage.active?e.endpage.docInfo:n&&n.getInfoById?n.getInfoById(t):{};var o="";var s=n&&n.info?n.info.channel:"99";if(/(http:\/.*?)("|'|$)/.test(i.pic_ourl||i.pic_url))o=RegExp.$1;var r=i.doc_durl||"#detail/"+s+"/"+i.docID;if(r.indexOf("http")!=0){r="http://"+location.host+"/touch/"+r}var a={docid:t,title:i.title,url:r,pic:o,summary:i.summary};return new e.snsShare(a)}function v(t,i,s){var r="";if(o.state.channel=="99"){var a=e.endpage.docInfo||(n&&n.getInfoById?n.getInfoById(t):{});if(a["recom_type"]){r=a["recom_type"]}}if(i=="not_like"){if(location.href.indexOf("/home")!=-1){u.incnum(-1)}else if(n&&n._notLikes){n._notLikes[t]=1}}var l={not_like:"notlike",ding:"recommend"};e.load.jsonp2({url:"/api/user/"+(l[i]||i),data:{src:e.endpage.active?"detail":"brief",docid:t,recom_type:r}},function(e){s&&s(e)})}function g(){var t=this;if(!e(".commend-epwrap")[0]){var i=document.createElement("div");i.className="commend-epwrap";i.innerHTML='<div class="mainarea clearfix">            <div class="commend-epbody">                <div class="commend-epbody-inner" id="epContent"></div>            </div>  <div class="epmask" id="epMask"></div>        </div>';l[0].appendChild(i)}var n=e("#photoview");t.tmpl={tie:e("#tie").html(),article:e("#article").html(),photoview:n[0]?e.template.parse(n.html()):null};t.$body=e("body");t.doms={rightbar:e(".rightbar")[0],$content:e("#epContent"),$upcount:e(".js-upcount"),$epbody:e(".commend-epbody"),$epclose:e("#ep-close"),$epprev:e("#ep-prev"),$epnext:e("#ep-next"),$epmask:e("#epMask")};if(p){e(".ep-nav-pc").removeClass("ep-nav-pc")}t.count=0;t.cursor=null;if(f){var o=e(".ep-tool-share"),s;o.bind("mouseover",function(){if(s){clearTimeout(s);s=null}o.addClass("ep-tool-share-hover")}).bind("mouseout",function(){s=setTimeout(function(){s=null;o.removeClass("ep-tool-share-hover")},150)})}}g.prototype={actions:{exec:function(e,t,i){if(this.actions[t]){this.actions[t].call(this,e,i)}else{v(e,t)}},not_like:function(t,i){if(e.wf&&i){e.wf.removeCard(i.parentNode.parentNode,t);if(e.bannerHint){e.bannerHint.show("\u5c06\u51cf\u5c11\u63a8\u8350\u6b64\u7c7b\u5185\u5bb9")}}v(t,"not_like")},navleft:function(e){this.prev()},navright:function(e){this.next()},share:function(e,t){if(/share-(\S+)/.test(t.className.replace(/ep-share-icon/,""))){var i=RegExp.$1;if(!s[e])s[e]=m(e);if(typeof s[e][i]=="function"){s[e][i]();v(e,"share",function(e){if(location.href.indexOf("/profile")==-1){d.incnum(1)}})}}},tieanchor:function(t){var i=e("#tieArea")[0];if(i){var n=e.dom.pos(i).y+40;document.body.scrollTop=n;document.documentElement.scrollTop=n;"function"===typeof neteaseTracker&&neteaseTracker(false,"http://"+location.host+"/tiePostBox")}},ding:function(t,i){v(t,"ding",function(e){if(!e.hasRec){if(typeof i=="function"){if(location.href.indexOf("/profile")==-1){u.incnum(1)}i(e)}}});e.spam.save(t)},remove:function(t){if(this.active){v(t,"not_like");o.brief();var i=y(t);if(i){if(e.wf&&e.wf.removeCard){e.wf.removeCard(i,t)}}}}},init:function(t,i){var s=this;n=i;o=t;function a(e){if(!s.addCards)o.ep2list=1;e.preventDefault&&e.preventDefault();if(s.active)o.brief();o.ep2list=0}s.doms.$epbody.bind("click",function(e){if(this==e.target)a(e)});s.doms.$epmask.bind("click",a);s.doms.$epclose.bind(p?"touchstart":"click",a);r.bind("click",function(e){var t=e.target||e.srcElement;if(t.tagName.toLowerCase()=="a"){var i=t.getAttribute("docid");if(i){e.preventDefault&&e.preventDefault();o.detail(i,null,t.getAttribute("srctype"));return}}});this.doms.$content.bind("click",c);e(".ep-sidetools").bind("click",c);function c(t){var i=l.hasClass("commend-eploaded");var n=t.target||t.srcElement;if(n.tagName.toLowerCase()=="a"){var r=n.getAttribute("docid");if(r){t.preventDefault&&t.preventDefault();o.detail(r,null,n.getAttribute("srctype"));return}}var a=n;while(a&&a!=this){var c=a.getAttribute("data-action");if(c&&!/-disable/.test(a.className)){if(!i&&!/^nav/.test(c))return;t.preventDefault&&t.preventDefault();s.actions.exec.call(s,s.docid,c,n);if(c=="ding"){var u=y(s.docid);if(u){e(".btn-commend",u).addClass("btn-disable");e(".btn-count",u).incnum()}e.classList.add(a,"ep-tool-zoomin");var d=parseInt(a.innerHTML)+1;a.innerHTML=d;setTimeout(function(){e.classList.remove(a,"ep-tool-zoomin");e.classList.add(a,"ep-tool-jian-disable")},800)}break}a=a.parentNode}}return this},unload:function(){var e=this;if(e.photoviewDestroy){e.photoviewDestroy();e.photoviewDestroy=null}e.$body[0].appendChild(e.doms.epRight);e.doms.photoviewside=null},open:function(s,u,d){if(!s)return;var f=this;f.ready=false;if(f.count)f.unload();f.log();f.timer=+new Date;f._loadTime=0;if(e.lastRec)e.lastRec.stop();a.html(0);f.doms.$upcount.html(0).removeClass("ep-tool-jian-disable");f.doms.endText=null;f.docInfo=null;f.docid=s;var m=n?n.getCursorById(s):null;if(m!==null)f.cursor=m;l.removeClass("commend-eploaded");if(u){r[u.indexOf("/66/")==-1?"addClass":"removeClass"]("article-nav")}if(!f.active){f.doms.$epclose.css({visibility:"hidden"});f.doms.$epclose.attr("href","#brief/"+o.state.channel+"/"+o.state.type);f.active=true;f.sTop=document.body.scrollTop||document.documentElement.scrollTop;var v=-f.sTop+e.dom.pos(c[0]).y+(parseInt(c.css("paddingTop"))||0);c.css({top:v});f.$body.addClass("commend-showep");if(f.doms.rightbar)f.doms.rightbar.style.top=v+"px";var g=document.body.offsetWidth;if(u&&u.indexOf("/66/")>-1&&g>1250)f.$body.addClass("photoview-wide");if(!p&&!h&&o.inited){f.sliding=+new Date;f.doms.$epbody.css({top:-Math.max(f.doms.$epbody[0].offsetHeight,1e3)-400});l.addClass("commend-eploaded");setTimeout(function(){f.doms.$epbody.animate({top:0},500,function(){f.sliding=0;if(!f.ready)l.removeClass("commend-eploaded")})},0)}}f.doms.$content.html("");var y=document.body.scrollTop||document.documentElement.scrollTop;var w=y>45?46:0;document.body.scrollTop=w;document.documentElement.scrollTop=w;e.ie6fixtop&&e.ie6fixtop();var b=i+"/doc.s?deviceid="+e.cookie.get("_ntes_nuid");
e.spam.getUid();if(e.spam.uid){b+="&urs="+e.spam.uid}b+="&type="+(d||o.state.channel);if(!f.count&&location.hash.indexOf("detail/")>-1){b+="&hash="+location.href.replace(/.*?detail.*?(#|$|\?)/,"")+"&refer="+escape(document.referrer)}f.count++;b+="&docid="+s;function T(t){if(!f.active||f.docid!=s)return;f.ready=true;var i=+new Date;f._loadTime=Math.round((i-f.timer)/100);e.ie6fixtop&&e.ie6fixtop();if(t.title){if(!t.content)t.content=t.summary||t.title;setTimeout(function(){f.show(t);if(e.wizard)e.wizard.run("sidetool")},f.sliding?Math.max(0,f.sliding+600-i):0)}else{if(u){window.open(u)}else{alert("\u6587\u7ae0\u627e\u4e0d\u5230\u4e86\uff0c\u5148\u770b\u70b9\u522b\u7684\u5427")}e.route.brief()}f.docInfo=t}if(t.noapi){b="/doc.js";window.docCb=T}e.load.jsonp2({url:b,charset:"utf-8"},T)},show:function(t){var i=this;document.title="\u7f51\u6613\u8350\u65b0\u95fb - "+t.title;var n=t.publish_time||t.publishTime||+new Date;t.ctime=new Date(n).format("yyyy-MM-dd HH:mm:ss");t.up_times=t.up_times||t.upTimes||0;this.doms.$upcount.html(t.up_times)[e.spam.check(this.docid)?"addClass":"removeClass"]("ep-tool-jian-disable");if(t.content.indexOf("<p")==-1){t.content="<p>"+t.content.replace(/\u3000\u3000+/g,"<p>").replace(/<br\s*\/?>/gi,"<p>").replace(/\u3002 /gi,"\u3002<p>")}else{t.content=t.content.replace(/(<p.*?>)\u3000+/g,"$1").replace(/<\/?font.*?>/g,"").replace(/<p\s+style="(.*?)"/gi,function(e,t){if(t.length>20){return"<p "}return e});if(!/<(img|object|embed)/i.test(t.content)){t.content=t.content.replace(/(<br.*?>\s*)+/g,"<p>")}}var s=document.createElement("div");s.innerHTML=t.content;t.content=s.innerHTML;s=null;if(t.source)t.source=t.source.replace(/<.*?>/g,"");i.doms.$content.css({visibility:"hidden"});t.tie=i.tmpl.tie;if(!i.doms.epRight)i.doms.epRight=document.getElementById("epContentRight");if(t.photoset&&t.photoset.length){t.isPad=!!p;i.photoview(t)}else{i.article(t)}i.doms.endText=e("#endText")[0];var r=e(".j-tie-header");i.doms.$content.css({visibility:"visible"});e.ugcInfo(t,o.state.channel);l.addClass("commend-eploaded");e.ie6fix&&e.ie6fix();i.getPrevNext()},photoview:function(i){r.removeClass("article-nav");this.doms.$epclose.css({visibility:"visible"});for(var n=0,o=i.photoset.length;n<o;n++){var s=i.photoset[n];var a=s.width;var l=s.height||s.length;var c=a<l?"60x1000":"1000x60";s.simg="http://s.cimg.163.com/i/"+encodeURIComponent(s.url.replace(/http:\/\//,""))+"."+c+".auto.jpg"}t.photoFilter(i.photoset);var u=this.tmpl.photoview(i),d=this.doms.$content;d.html(u).addClass("commend-photoview-inner");if(i.photoset.length<=12)d.find(".tiny_views_page").hide();this.photoviewDestroy=t.photoview(d.find(".ne-photoset"),i);this.doms.photoviewside=d.find(".ne-photoset-sidebar")[0];var h=e(".photoview-post")[0];if(h){if(this.doms.epRight)h.insertBefore(this.doms.epRight,h.firstChild);this.doms.fixedParent=h}},article:function(t){var i=this;r.addClass("article-nav");i.doms.$epclose.css({visibility:"visible"});i.$body.removeClass("photoview-wide");var n=e.template.replace(i.tmpl.article,t);i.doms.$content.html(n).removeClass("commend-photoview-inner");if(i.doms.epRight){i.doms.fixedParent=e(".ep-content-bg")[0];i.doms.fixedParent.appendChild(i.doms.epRight)}},getPrevNext:function(){var e=this;if(n.cache.length==0){setTimeout(function(){e.getPrevNext()},600);return}var t=e.prevCursor(),i=n.cache[t];if(i){e.doms.$epprev.html(i.title)}t=e.nextCursor();i=n.cache[t];if(i){e.doms.$epnext.html(i.title)}},prevCursor:function(){var e=this,t=e.cursor;if(t===null){t=0}else{t--;if(t<0)t=n.cache.length-1}return t},prev:function(){var e=this;e.cursor=e.prevCursor();if(n&&n.cache[e.cursor]){o.detail(n.cache[e.cursor].docID,null,103)}},nextCursor:function(){var e=this,t=e.cursor;if(t===null){t=0}else{t++;if(t>n.cache.length-3){n.fetchMoreCards&&n.fetchMoreCards()}if(t>=n.cache.length)t=0}return t},next:function(e){var t=this;t.cursor=t.nextCursor();if(n&&n.cache[t.cursor]){o.detail(n.cache[t.cursor].docID,null,e||104)}},log:function(){if(this.timer&&e.stat){e.stat.counter("p",1);var t=Math.round((+new Date-this.timer)/100);e.stat.counter("l",this._loadTime||t);e.stat.counter("t",t);this.timer=null}},close:function(){this.log();this.unload();document.title="\u7f51\u6613\u8350\u65b0\u95fb";this.active=false;this.doms.$content.html("");this.$body.removeClass("photoview-wide");this.$body.removeClass("commend-showep");if(this.doms.rightbar)this.doms.rightbar.style.top="auto";document.body.scrollTop=this.sTop;document.documentElement.scrollTop=this.sTop;if(n.mainCache){n.cache=n.mainCache}if(typeof this.addCards=="function"){this.addCards();this.addCards=null}this.docInfo=null}};e.endpage=new g;function y(t){if(e.newstore&&e.newstore._existIds){return e.newstore._existIds[t]}return null}}(NE);!function(e){e.validHost=/j\.news\.163/.test(location.host);e(".third-group a").bind("click",function(e){var t=this.getAttribute("href");if(t){e.preventDefault();var i=500;var n=600;var o=(window.screen.height-30-i)/2;var s=(window.screen.width-10-n)/2;window.open(t,"loginWin","height="+i+",width="+n+",top="+o+",left="+s)}});function t(){var t=this;this.info={uid:"",login:false};var i=e("#user-rightbar-login .ntes-loginframe-tips");window.loginSuccess=function(e,n,o,s){if(e){t.postLogin({userLogin:e,userName:o,userMail:o,originalPhotourl:s})}else{i.html("\u7b2c\u4e09\u65b9\u767b\u5f55\u5f02\u5e38");i.css({height:25})}}}t.prototype={getUid:function(){this.info.thirdparty=false;if(e.cookie.get("S_INFO")){var t=e.cookie.get("P_INFO");if(/(\S+?)\|/.test(t)){this.info.uid=RegExp.$1}}else if(e.cookie.get("S_OINFO")){t=e.cookie.get("P_OINFO");if(/(\S+?)\|/.test(t)){this.info.uid=RegExp.$1;this.info.thirdparty=true}}this.info.userName=this.info.uid.replace(/\@.*/,"")},postLogin:function(t){if(!t)return;var i=this,n=i.info;this.getUid();for(var o in t){if(t[o])n[o]=t[o]}if(n.uid){n.login=true;e(".ne-login-bg").removeClass("ne-login-bg-active");e("#js_N_navHighlight").removeClass("ntes-nav-loginframe-pop-fixed-wrapper");e("#js_N_navHighlight .ntes-nav-loginframe-pop").hide();var s=n.userName;e("#user-rightbar-login form").hide();e("#user-rightbar-login .user-main").show();var r=t.userMail;if(!e.validHost)return;var a=e.cookie.get("avatar").split("|");e.load.ajax({url:"/api/user/getCurUserinfo",charset:"utf-8",dataType:"json"},function(o){if(!o.is_login){return}if(i.info.thirdparty){if(e.navBar)e.navBar.login(t);e("#js_N_navLoginBefore").remove();e("#js_N_NavLoginAfter").show();e("#js_N_logined_warp .ntes-nav-select-arr").remove();e("#js_login_suggest_wrap").remove();e("#js_N_navLogout").attr("href","/oauth/logout/")}var r=o.screenname||s;e("#js_N_navUsername").html(r);var a=o.originalPhotourl,l=window.profile_passport||o.passport||this.uid;if(a.indexOf("nos-yx.netease.com")>-1){a+="?imageView&thumbnail=132x999"}else{a="http://s.cimg.163.com/i/"+encodeURIComponent(a.replace(/http:\/\//,""))+".132x998.auto.jpg"}e("#portrait").html('<img src="'+a+'" />');n.nickname=r;n.avatar=a;var c=e("#user-rightbar-login")[0];if(c){e(".user-name a",c).html(r);e(".avatar",c).html('<img onerror="this.style.display=\'none\'" src="'+a+'" />');e(".commend-form img").each(function(){e(this).attr("src",a)});e("#recNum").html(o.recNum||0);e("#shareNum").html(o.shareNum||0);e("#user-rightbar-login a").attr("href","/home/")}})}else{if(e.wizard)e.wizard.run("login")}}};e.auroraLogin=new t}(NE);!function(e){function t(){var t=this;t.unfoldClassName="ntes-nav-select-unfold",t.menus=e(".js_N_navSelect"),t.init(),t.prevIndex=0}t.prototype={init:function(){var t=this;e.each(t.menus,function(i,n){var o=e(n),s={},r=o.addEvent("mouseover",function(){t.timerList&&t.prevIndex===i?(clearTimeout(t.timerList),t.timerList=void 0):t.timerList=setTimeout(function(){t.unfoldMenu(i),t.timerList=void 0},100)}),a=o.addEvent("mouseout",function(){t.timerList&&t.prevIndex===i?(clearTimeout(t.timerList),t.timerList=void 0):t.timerList=setTimeout(function(){t.foldMenu(),t.timerList=void 0},100)}),l=function(){var i=e(this);-1===i.className.indexOf(t.unfoldClassName)?i.addCss(t.unfoldClassName):i.removeCss(t.unfoldClassName)};o.addEvent("click",l)})},unfoldMenu:function(t){var i=this;e(i.menus[i.prevIndex]).removeCss(i.unfoldClassName),e(i.menus[t]).addCss(i.unfoldClassName),i.prevIndex=t},foldMenu:function(){var t=this;e(t.menus[t.prevIndex]).removeCss(t.unfoldClassName)}};var i={bind:function(e,t){var i,n,o,s,r;i=e.split(" ");if(!(this.hasOwnProperty("_callbacks")&&this._callbacks)){this._callbacks={}}for(s=0,r=i.length;s<r;s++){n=i[s];(o=this._callbacks)[n]||(o[n]=[]);this._callbacks[n].push(t)}return this},trigger:function(){var e,t,i,n,o,s,r;e=1<=arguments.length?[].slice.call(arguments,0):[];i=e.shift();n=this.hasOwnProperty("_callbacks")&&((r=this._callbacks)!=null?r[i]:void 0);if(!n){return}for(o=0,s=n.length;o<s;o++){t=n[o];if(t.apply(this,e)===false){break}}},unbind:function(e,t){var i,n,o,s,r,a,l,c,u,d;if(arguments.length===0){this._callbacks={};return this}if(!e){return this}n=e.split(" ");for(a=0,c=n.length;a<c;a++){r=n[a];s=(d=this._callbacks)!=null?d[r]:void 0;if(!s){continue}if(!t){delete this._callbacks[r];continue}for(o=l=0,u=s.length;l<u;o=++l){i=s[o];if(!(i===t)){continue}s=s.slice();s.splice(o,1);this._callbacks[r]=s;break}}return this},core:{Constant:{Path:{DEFAULT_MAIL_PATH:"http://email.163.com#from=163nav_icon"},Domain:{DOMAIN:["126.com","yeah.net","163.com","188.com","vip.163.com","vip.126.com"],API:["mail.126.com","mail.yeah.net","mail.163.com","mail.188.com","vip.163.com","vip.126.com"]},PRODUCTS:{reg:{name:"\u901a\u884c\u8bc1",url:"http://reg.163.com/Main.jsp?username=pInfo"},"163.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://entry.mail.163.com/coremail/fcg/ntesdoor2?verifycookie=1&lightweight=1&df=163navi"},"126.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://entry.mail.126.com/cgi/ntesdoor?verifycookie=1&lightweight=1&style=-1&df=163navi"},"vip.126.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.vip.126.com/enterMail.m"},"yeah.net":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://entry.yeah.net/cgi/ntesdoor?verifycookie=1&lightweight=1&style=-1&def=163navi"},"188.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.mail.188.com/servlet/enter"},"vip.163.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.vip.163.com/enterMail.m?enterVip=true-----------"},blog:{name:"\u6211\u7684\u535a\u5ba2",url:"http://blog.163.com/passportIn.do?entry=163"},photo:{name:"\u6211\u7684\u76f8\u518c",url:"http://photo.163.com/?username=pInfo"},yuehui:{name:"\u6211\u7684\u540c\u57ce\u7ea6\u4f1a",url:"http://yuehui.163.com/"},t:{name:"\u6211\u7684\u5fae\u535a",url:"http://t.163.com/"},ht:{name:"\u6211\u7684\u82b1\u7530",url:"http://love.163.com?keyfrom=163site.mynavi"},note:{name:"\u6211\u7684\u4e91\u7b14\u8bb0",url:"http://note.youdao.com/web?entry=163.com"},caipiaoyys:{name:"\u6211\u7684\u5f69\u7968",url:"http://caipiao.163.com/#from=www_top_entry"},cx:{name:"\u6211\u7684\u8f66\u9669",url:"http://baoxian.163.com/car/#from=www_top_entry"},baoxian:{name:"\u6211\u7684\u4fdd\u9669",url:"http://baoxian.163.com/#from=www_top_entry"},shop:{name:"\u7f51\u6613\u5546\u57ce",url:"http://mall.163.com/#from=www_top_entry"}}}},base:{},utils:{},data:{},ui:{}};i.utils.Suggestion=function(){function e(){var e=document.getElementById("js_passportUserNameList"),t=i.getXY(n.usernameInputElement).x,o=i.getXY(n.usernameInputElement).y;e.style.left=t+"px",e.style.top=o+n.usernameInputElement.offsetHeight+"px"}function t(e){var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t.firstChild),t=null}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.replaceAll=function(e,t){return this.replace(RegExp(e,"gm"),t)};var i={getXY:function(e){for(var t=0,i=0;e!=document.body&&null!=e;)i+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return{x:i,y:t}}},n={usernameInputElement:!1,usernameInputElementX:!1,usernameInputElementY:!1,usernameInputHeight:!1,usernameListElement:!1,currentSelectIndex:-1,hasShow:!1,domainSelectElmentString:'<div id = "js_passportUserNameList" class="ntes-domain-selector"  style="display: none;"><div class="ntes-domain-selector-main"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="ntes-domain-selector-title">\u8bf7\u9009\u62e9\u6216\u7ee7\u7eed\u8f93\u5165...</td></tr><tr><td><td /></tr></tbody></table></div><iframe src="javascript:\'\';"  style=" z-index:1008;width:100%;height:0px;display:block  " frameborder="0"></iframe></div><div style="display: none;"></div><div id="passport_111"></div>',domainSelectElement:!1,domainArray:["163.com","126.com","yeah.net","vip.163.com","vip.126.com","popo.163.com","188.com","vip.188.com","qq.com","yahoo.com","sina.com"],resizeFunc:function(){var e=document.getElementById("js_passportUserNameList"),t=i.getXY(n.usernameInputElement).x,o=i.getXY(n.usernameInputElement).y;e.style.left=t+"px",e.style.top=o+n.usernameInputElement.offsetHeight+"px"},bind:function(e){this.usernameInputElement=e;var t=i.getXY(this.usernameInputElement);this.usernameInputElementX=t.x,this.usernameInputElementY=t.y,this.handle()},handle:function(){t(this.domainSelectElmentString),this.domainSelectElement=document.getElementById("js_passportUserNameList"),this.usernameListElement=this.domainSelectElement.firstChild.firstChild.rows[1].firstChild,this.currentSelectIndex=0;if(this.usernameInputElement){this.usernameInputElement.onblur=function(e){return n.preventEvent(e),setTimeout(function(){n.doSelect()},200),!1}}try{this.usernameInputElement.addEventListener("keypress",this.keypressProc,!1),this.usernameInputElement.addEventListener("keyup",this.keyupProc,!1)}catch(i){try{this.usernameInputElement.attachEvent("onkeydown",this.checkKeyDown),this.usernameInputElement.attachEvent("onkeypress",this.keypressProc),this.usernameInputElement.attachEvent("onkeyup",this.keyupProc)}catch(i){}}e(),navigator.userAgent.indexOf("MSIE")>0?window.attachEvent("onresize",e):window.onresize=e},preventEvent:function(e){try{e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}catch(e){}},checkKeyDown:function(e){this.currentSelectIndex=0;var t=e.keyCode;return 38==t||40==t?(n.preventEvent(e),n.clearFocus(),38==t?n.upSelectIndex():n.downSelectIndex(),n.setFocus(),!1):void 0},keyupProc:function(e){this.currentSelectIndex=0;var t=e.keyCode;n.changeUsernameSelect(),13==t&&n.doSelect();var i;return(i=navigator.userAgent.indexOf("Safari"))>0&&(38==t||40==t)&&(n.preventEvent(e),n.clearFocus(),38==t?n.upSelectIndex():n.downSelectIndex(),n.setFocus()),!1},keypressProc:function(e){this.currentSelectIndex=0;var t=e.keyCode;13==t?n.preventEvent(e):38==t||40==t?(n.preventEvent(e),n.clearFocus(),38==t?n.upSelectIndex():n.downSelectIndex(),n.setFocus()):(108==t||110==t||111==t||115==t)&&setTimeout(function(){n.changeUsernameSelect()},20)},clearFocus:function(){var e=this.currentSelectIndex;try{var t=this.findTdElement(e);t.style.backgroundColor="white"}catch(i){}},findTdElement:function(e){try{for(var t=this.usernameListElement.firstChild.rows,i=0;t.length>i;++i)if(t[i].firstChild.idx==e)return t[i].firstChild}catch(n){}return!1},upSelectIndex:function(){var e=this.currentSelectIndex;if(null!=this.usernameListElement.firstChild){var t,i=this.usernameListElement.firstChild.rows;for(t=0;i.length>t&&i[t].firstChild.idx!=e;++t);this.currentSelectIndex=0==t?i.length-1:i[t-1].firstChild.idx}},downSelectIndex:function(){var e=this.currentSelectIndex;if(null!=this.usernameListElement.firstChild){for(var t=this.usernameListElement.firstChild.rows,i=0;t.length>i&&t[i].firstChild.idx!=e;++i);this.currentSelectIndex=i>=t.length-1?t[0].firstChild.idx:t[i+1].firstChild.idx}},setFocus:function(){var e=this.currentSelectIndex;try{var t=this.findTdElement(e);t.style.backgroundColor="#D5F1FF"}catch(i){}},changeUsernameSelect:function(){var t=this.usernameInputElement.value;if(t=t.replaceAll("<",""),""==t.trim())this.domainSelectElement.style.display="none",this.hasShow=!1;else{var i,o="",s="";0>(i=t.indexOf("@"))?(o=t,s=""):(o=t.substr(0,i),s=t.substr(i+1,t.length));var r=[];if(""==s)for(var a=0;this.domainArray.length>a;++a)r.push(o+"@"+this.domainArray[a]);else for(var a=0;this.domainArray.length>a;++a)0==this.domainArray[a].indexOf(s)&&r.push(o+"@"+this.domainArray[a]);if(r.length>0){e(),this.domainSelectElement.style.display="block",this.hasShow=!0;var l=document.createElement("TABLE");l.cellSpacing=0,l.cellPadding=3;var c=document.createElement("TBODY");l.appendChild(c);for(var a=0;r.length>a;++a){var u=document.createElement("TR"),d=document.createElement("TD");d.nowrap="true",d.align="left",d.innerHTML=r[a],d.idx=a,d.onmouseover=function(){n.clearFocus(),n.currentSelectIndex=this.idx,n.setFocus(),this.style.cursor="hand"},d.onmouseout=function(){},d.onclick=function(e){return n.doSelect(),n.preventEvent(e),!1},u.appendChild(d),c.appendChild(u)}this.usernameListElement.innerHTML="",this.usernameListElement.appendChild(l);for(var h=0,f=0;r.length>f;++f)r[f].length>h&&(h=r[f].length);h=10*h,185>h&&(h=185),l.style.width=h+"px",this.domainSelectElement.style.width=l.style.width,this.setFocus()}else this.domainSelectElement.style.display="none",this.hasShow=!1,this.currentSelectIndex=-1}},doSelect:function(){if(this.domainSelectElement.style.display="none",this.hasShow=!1,""!=this.usernameInputElement.value.trim()){var e=this.findTdElement(this.currentSelectIndex);e&&(this.usernameInputElement.value=e.innerHTML,this.usernameInputElement.value=this.usernameInputElement.value.replaceAll("<",""))}}};return{getInstance:function(){return n}}};i.utils.Login=function(t){try{document.domain="163.com"}catch(n){}var o={listenFrame:!0,loginAction:"https://reg.163.com/logins.jsp",loginRedirect:"http://reg.163.com/redirect.jsp",successAction:"",failedAction:"",success:{},failed:{},errorMsg:{412:"\u60a8\u5c1d\u8bd5\u6b21\u6570\u592a\u591a,\u8bf7\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u8bd5",414:"\u60a8\u7684IP\u767b\u5f55\u5931\u8d25\u6b21\u6570\u8fc7\u591a,\u8bf7\u7a0d\u540e\u518d\u8bd5",415:"\u60a8\u4eca\u5929\u767b\u5f55\u9519\u8bef\u6b21\u6570\u592a\u591a,\u8bf7\u660e\u5929\u518d\u8bd5",416:"\u60a8\u7684IP\u4eca\u5929\u767b\u5f55\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",417:"\u60a8\u7684IP\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",418:"\u60a8\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a,\u8bf7\u660e\u5929\u518d\u8bd5",419:"\u60a8\u7684\u767b\u5f55\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5",420:"\u7528\u6237\u540d\u4e0d\u5b58\u5728",422:"\u5e10\u53f7\u88ab\u9501\u5b9a\uff0c\u8bf7\u60a8\u89e3\u9501\u540e\u518d\u767b\u5f55",424:"\u8be5\u9753\u53f7\u670d\u52a1\u5df2\u5230\u671f\uff0c\u8bf7\u60a8\u7eed\u8d39",425:"\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5728\u6fc0\u6d3b\u6709\u6548\u671f\u4ee5\u5185",426:"\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5df2\u7ecf\u8fc7\u4e86\u6fc0\u6d3b\u6709\u6548\u671f\u9650",427:"\u8d85\u65f6\uff0c\u5df2\u8d85\u8fc75\u5206\u949f\u6709\u6548\u671f",428:"\u9700\u8981\u8fdb\u5165\u4e2d\u95f4\u63d0\u9192\u9875\u9762",460:"\u5bc6\u7801\u4e0d\u6b63\u786e",500:"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",503:"\u7cfb\u7edf\u7ef4\u62a4\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",1e3:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d"},commit:function(e){e&&(!this.frame&&this.createElements(),this.username.value=e.username,this.password.value=e.password,this.type.value=e.type,this.product.value=e.product,this.savelogin.value=e.savelogin,this.url.value=this.successAction,this.url2.value=this.failedAction,this.noRedirect.value=1,this.form.submit())},verifyLogin:function(){if(this.verifyCookie&&this.verifyCookie())for(var e in this.success)"function"==typeof this.success[e]&&this.success[e].call(this,arguments[0]);else for(var e in this.failed)"function"==typeof this.failed[e]&&(arguments[0]&&(arguments[0].errorMsg=this.errorMsg[this.errorMsg[arguments[0].errorType]?arguments[0].errorType:1e3]),this.failed[e].call(this,arguments[0]))},getSearches:function(e){e=e||window.location.search;for(var t=e.substring(1),i=t.split("&"),n={},o=0;i.length>o;o++){var s=i[o].split("=");s[0]&&(n[s[0]]=s[1]||null)}return n},createElements:function(){this.frame=this.createFrame(),this.form=this.createForm(),this.username=this.createInput("username"),this.password=this.createInput("password"),this.type=this.createInput("type"),this.product=this.createInput("product"),this.savelogin=this.createInput("savelogin"),this.url=this.createInput("url"),this.url2=this.createInput("url2"),this.noRedirect=this.createInput("noRedirect"),this.form.appendChild(this.username),this.form.appendChild(this.password),this.form.appendChild(this.type),this.form.appendChild(this.product),this.form.appendChild(this.savelogin),this.form.appendChild(this.url),this.form.appendChild(this.url2),this.form.appendChild(this.noRedirect),document.body.appendChild(this.form),document.body.appendChild(this.frame)},createInput:function(e){var t=this.toElement("<input/>");return t.setAttribute("name",e),t},toElement:function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var i=e.firstChild;return e.removeChild(i),i}}(),createFrame:function(){var e,t=this,i="login_util_frame",n=0;return e=t.toElement('<iframe src="javascript:false;" name="'+i+'" />'),e.setAttribute("id",i),e.setAttribute("border","no"),e.style.display="none",e.onload=e.onreadystatechange=function(){t.listenFrame&&(this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||((n||this.contentWindow.location.search)&&t.verifyLogin(t.getSearches(this.contentWindow.location.search)),n++))},e},createForm:function(){var e,t=this;return e=t.toElement('<form method="post"></form>'),e.setAttribute("id","login_util_form"),e.setAttribute("action",this.loginAction),e.setAttribute("target",this.frame.name),e.style.display="none",e}};o.verifyCookie=function(){var t=e.cookie.get("S_INFO"),i=e.cookie.get("P_INFO");return t&&"2"!=i[2]},o.successAction="http://www.163.com/special/0077450P/login_frame.html",o.failedAction="http://www.163.com/special/0077450P/login_frame.html",o.success.userProduct=function(e){s.loginSuccess(e)},o.failed.userProduct=function(e){s.loginFailed(e)};var s=NE.extend({logined:!1,mailReg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,trimReg:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nameTmp:"",passTmp:"",passportLoaded:!1},t);s.nameField=s.fieldEl[0];s.passField=s.fieldEl[1];s.saveField=s.fieldEl[2];if(s.tipEl[0])s.tipText=s.tipEl[0].innerHTML;if(s.passField)s.passField.type="password";if(s.nameField){var r=i.utils.Suggestion().getInstance();r.bind(s.nameField)}return s.filter={"163.com":{read:1,name:"163",url:"http://entry.mail.163.com/coremail/fcg/ntesdoor2?verifycookie=1&lightweight=1"},"126.com":{read:1,name:"126",url:"http://entry.mail.126.com/cgi/ntesdoor?verifycookie=1&lightweight=1&style=-1"},"yeah.net":{read:1,name:"yeah",url:"http://entry.yeah.net/cgi/ntesdoor?verifycookie=1&lightweight=1&style=-1"},"188.com":{read:0,name:"188",url:"http://reg.mail.188.com/servlet/enter"},"vip.126.com":{read:0,name:"vip",url:"http://reg.vip.126.com/enterMail.m"},"vip.163.com":{read:0,name:"vip",url:"http://reg.vip.163.com/enterMail.m?enterVip=true-----------"}},s.trim=function(e){return e?(e+"").replace(s.trimReg,""):""},s.verifyFields=function(e,t){var i=s.nameField,n=s.passField;return 0==e.length?(s.addClass(i.parentNode,"tips-error"),this.loginFailed(),i.focus(),!1):0==t.length?(s.addClass(n.parentNode,"tips-error"),n.focus(),this.loginFailed(),!1):!0},s.submit=function(){var e,t=s.trim(s.nameField.value),i=s.trim(s.passField.value),n=s.saveField.checked?1:0;s.nameTmp=t,s.passTmp=i,s.verifyFields(t,i)&&(e={username:t,password:i,savelogin:n,product:"163",type:1},o.commit(e))},s.loginSuccess=function(){s.logined=!0,i.trigger("LOGIN_SUCCESS")},s.loginFailed=function(e){if(s.logined=!1,i.trigger("LOGIN_FAIL"),s.showError(e&&e.errorMsg?e.errorMsg:s.tipText),e)switch(parseInt(e.errorType)){case 420:setTimeout(function(){s.nameField.focus()},1e3);break;case 428:window.open(e.url?[unescape(e.url),"url="+location.href].join("&"):o.loginRedirect,"_self");break;case 460:setTimeout(function(){s.passField.focus()},1e3);break;default:}},s.showError=function(e){if(e)s.tipEl[0].innerHTML=e;s.tipEl[0].style.height=e?"25px":0},s.hasClass=function(e,t){var i="*"+e.className.replace(/\s+/gi,"*")+"*";return-1!=i.indexOf("*"+t+"*")},s.addClass=function(e,t){if(!s.hasClass(e,t)){var i=e.className+" "+t;e.className=s.trim(i)}},s.removeClass=function(e,t){if(s.hasClass(e,t)){var i="*"+e.className.replace(/\s+/gi,"*")+"*";i=i.replace(RegExp("\\*"+t+"\\*","ig")," ").replace(/\*/gi," "),e.className=s.trim(i)}},s.submitEl.addEvent("click",function(){s.submit()}),s.formEl&&s.formEl.addEvent("keydown",function(e){if(13==e.keyCode&&!o.verifyCookie()){if(s.passField.value==""){setTimeout(function(){s.passField.focus()},250)}else{s.submit()}}}),e.event.addEvent(s.fieldEl,"keyup",function(){var e=s.trim(s.nameField.value),t=s.trim(s.passField.value);(s.nameTmp!=e||s.passTmp!=t)&&(s.removeClass(this.parentNode,"tips-error"),s.showError(s.tipText))})};i.utils.ChangeCookie=function(){var t=document.createElement("div"),i="",n="163",o="",s="http://reg.163.com/chgcookie.jsp?",r="http://www.163.com/special/0077450P/login_frame.html",a='<iframe src="javascript:false;" name="changeCookie" frameborder="0" style="width:0;height:0;display:none;"></iframe>',l=function(e){try{document.body.removeChild(e)}catch(t){}},c=function(c){var u=null;t.innerHTML=a,o=e.cookie.get("USERTRACK"),i=(e.cookie.get("P_INFO")+"").split("|")[0],document.body.appendChild(u=t.firstChild),u.onload=u.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){e.cookie.get("S_INFO")&&c&&c(),l(u),u=null},400)},u.src=s+["username="+i,"product="+n,"userip="+o,"retUrl="+r,"loginUrl="+r].join("&")};return{invoke:function(t){e.ready(function(){c(t)})}}};i.data.UserInfo=function(){var t=i.utils.ChangeCookie(),n="",o="",s=n;var r={};return{refresh:function(){n=e.cookie.get("P_INFO")+"";o=e.cookie.get("S_INFO")+"";var a=n.split("|");var l=o.split("|");var c=a[0]||"";r={userName:c.split("@")[0],userMail:c,userDomain:c?c.split("@")[1]:"",userIp:e.cookie.get("USERTRACK")+"",userLogin:!(!c||!o&&1!=a[2]),userProduct:a[7]||""};if(r.userLogin&&!o){t.invoke()}if(n!=s||!n){i.trigger("DATA_CHANGED",r);s=n}},getUserInfo:function(){return r},getPInfo:function(){return n},getSInfo:function(){return o}}};i.ui.NavBar=function(){var n=e("#js_N_navHighlight"),o=e("#js_N_navLoginBefore"),s=e("#js_N_NavLoginAfter"),r=e("#js_N_navUsername"),a=e("#js_N_navLogout"),l=e("#js_N_logined_warp"),c=e("#js_logined_suggest"),u=e("#js_login_suggest_wrap"),d=i.core.Constant,h=d.PRODUCTS,f=["blog","photo","ht","yuehui","t","note","caipiaoyys","cx","baoxian","shop"],p=null,m=null,v=null,g="http://reg.163.com/Logout.jsp",y=function(){w(),p=new t},w=function(){var e=!1},b=function(e){if(m=e,!m)return C(),void 0;var t=m.userName,i=m.userDomain,n=m.userMail,l=/&df=163navi/i,c=h[i]?h[i].url:d.Path.DEFAULT_MAIL_PATH;c=c.replace(l,"&df=163nav_icon");r.innerHTML=12>t.length?n:t.substr(0,12)+"...@"+i;a.href=g+"?username="+t+"&url="+location.href.replace(/(163\.com)\/.*/,"$1");T(m.userProduct);o.style.display="none";s.style.display="block"},T=function(e){for(var t=e?~e.indexOf(",")?e.split(","):e.split("&"):[],i=0,n=t.length>10?10:t.length,o="",s=["reg"],r=[];n>i;i++)o=t[i],!!h[o]&&s.push(o);for(1==s.length&&(s=s.concat(f)),~d.Domain.DOMAIN.indexOf(m.userDomain)&&s.splice(1,0,m.userDomain);s.length;)o=s[0],r.push("<li><a href='"+h[o].url+"'><span>\u8fdb\u5165"+h[o].name+"</span></a></li>"),s.shift();c.innerHTML=r.join("").replace(/pInfo/g,m.userMail)},C=function(){r.innerHTML="",c.innerHTML="",a.href="javascript: void(0)",o.style.display="block",s.style.display="none",m=null},x=function(e,t){t>0?(e.innerHTML='<span class="ntes-nav-msg-num">'+(100>t?t:"99+")+"</span>",e.style.display="block"):(e.innerHTML="",e.style.display="none")};y();return{login:function(e){b(e)},logout:function(){C()}}};i.ui.Toggle=function(){var t=e("#js_N_navHighlight"),i=e("#js_loginframe_username"),n=e.util,o=(n.extend,250),s=function(e){return e&&(e.style.display="none"),e},r=function(e){return e&&(e.style.display="block"),e},a=e("#js_passportUserNameList"),l=e("#js_N_navHighlight .ntes-nav-login-title"),c=e("#js_N_navHighlight .ntes-nav-loginframe-pop"),u="none"!=e.style.getCurrentStyle(c,"display")?!0:!1,d=e(document.body),h=null,f={shake:"ue-shake"},p="",m=function(){t.addCss("ntes-nav-login-normal"),l.addEvent("click",v),l.addEvent("mouseover",w),l.addEvent("mouseout",b),c.addEvent("mouseover",T),d.addEvent("click",C),a=a?a.get(0):null},v=function(){return"none"!=e.style.getCurrentStyle(c,"display")?x():k(),!1},g=function(){h&&(clearTimeout(h),h=null)},y=function(e){h=setTimeout(function(){e&&e()},o)},w=function(){g(),k()},b=function(){g(),y(function(){x()})},T=function(){g()},C=function(e){if(u){for(var t=e.target||e.srcElement,i=c.get(0),n=l.get(0);t;){if(t==i||t==n||t==a)return;t=t.parentNode}return x(),!1}},x=function(){s(c.get(0)),u=!1,t.addCss("ntes-nav-login-normal"),t.removeCss("ntes-nav-login-active"),c.removeCss("ue-animation"),p&&c.removeCss(p)},k=function(){r(c.get(0)),u=!0,t.addCss("ntes-nav-login-active"),t.removeCss("ntes-nav-login-normal"),c.addCss("ue-animation")},_=function(e){var t=f[e]||"";p&&c.removeCss(p),t&&c.addCss(t),p=t,p&&setTimeout(function(){c.removeCss(p)},1e3)},E=function(t){if(t){i.value=t;var n=e("#user-rightbar-login input")[0];if(n){n.value=t}}};return m(),{show:function(){k()},hide:function(){x()},success:function(){x()},fail:function(){_("shake")},setUserName:function(e){E(e)}}};e.ready(function(){var t={formEl:e("#js_N_login_wrap"),fieldEl:e("#js_N_login_wrap input"),submitEl:e("#js_N_login_wrap .ntes-loginframe-btn"),tipEl:e("#js_N_login_wrap .ntes-loginframe-tips")};var n={formEl:e("#user-rightbar-login"),fieldEl:e("#user-rightbar-login input"),submitEl:e("#user-rightbar-login .btn-submit"),tipEl:e("#user-rightbar-login .ntes-loginframe-tips")};var o=i.data.UserInfo(),s=i.utils.Login(t),r=i.utils.Login(n),a=e.navBar=i.ui.NavBar(),l=i.ui.Toggle(),c=function(){o.refresh(),l.success()},u=function(){o.refresh(),l.fail()};i.bind("DATA_CHANGED",function(e){if(e.userLogin)a.login(e);else{a.logout();e.userMail&&l.setUserName(e.userMail)}NE.auroraLogin.postLogin(e)});i.bind("LOGIN_SUCCESS",c);i.bind("LOGIN_FAIL",u);i.bind("LOGIN_SUCCESS",c);i.bind("LOGIN_FAIL",u);o.refresh()})}(NTES);function imgerr(e){e.onerror=null;e.style.display="none";var t=e.getAttribute("src")+"?";var i=new Image;i.onload=function(){e.setAttribute("src",t);e.style.display="block";i.onload=null;i=null};setTimeout(function(){i.src=t},6e3)}!function(e){"use strict";var t=window.jNews=window.jNews||{};var i=t.isPad;var n=500;var o=180;var s=e.apihost;var r=e("body");var a;var l=e("#mode-switch");var c=e("#news-list");var u=e("#banner-hint");var d=e(".commend-epbody-inner");var h=e(".rightbar")[0];var f=e.spam;var p,m;var v=$(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]);var g=navigator.userAgent.toLowerCase();var y={ie6:/msie 6/.test(g),css3:M()};function w(){this.tmpl={card:e.template.parse(e("#card").html())};this._notLikes={}}w.prototype={init:function(t){if(e.stat){if(this.info){this.log()}else{f.getUid();e.stat.log("S",f.uid+(f.utype?"|"+f.utype:""))}}H.state.channel=t;this.info={channel:t,offset:0,limit:10};this.stime=null;this.zeroLoads=0;this.firstLoadTime=null;this.fetching=false;this.cache=this.mainCache=[];this._existIds={}},log:function(){if(this.info&&this.info.channel){if(e.endpage&&e.endpage.active){e.endpage.log()}e.stat.log("C",this.info.channel,this.info.offset,this.firstLoadTime)}},_getById:function(e,t){if(this.cache){var i=this.cache.length;for(var n=0;n<i;n++){if(this.cache[n].docID==e){if(n>i-3){F.fetchMoreCards()}return t=="json"?this.cache[n]:n
}}}return null},getInfoById:function(e){return this._getById(e,"json")||{}},getCursorById:function(e){return this._getById(e)},deleteById:function(e){delete this._existIds[e];for(var t=0,i=this.cache.length;t<i;t++){if(this.cache[t].docID==e){this.cache.splice(t,1);break}}},fetchMoreCards:function(e,t){var i=this;if(this.fetching)return;this.fetching=true;var n=500-(+new Date-(this._lastFetchTime||0));setTimeout(function(){i._fetchMoreCards(e,t)},n>0?n:0)},_fetchMoreCards:function(i,n){var o=this;var a=this.info.channel;var l=s+(a==99?"/demorec.s?":"/newshot.s?");if(!this.stime)this.stime=+new Date;f.getUid();l+="deviceid="+e.cookie.get("_ntes_nuid");if(f.uid){l+="&urs="+f.uid}if(a!=99){l+="&channel="+a}if(n){var u=a==99?0:this.info.offset;var d=5;l+="&limit="+d+"&offset="+u+"&time="+F.stime;F.stime=+new Date;if(a!=99){this.info.offset+=d}}else{l+=e.template.replace("&offset={offset}&limit={limit}",this.info);this.info.offset+=this.info.limit}if(!o.inited){l+="&hash="+location.href.replace(/.*?#/,"").replace(/.*?brief.*?(#|$|\?)/,"")+"&refer="+escape(document.referrer);o.inited=true}function h(e){if(a!=o.info.channel)return;if(o.firstLoadTime==null)o.firstLoadTime=Math.round((+new Date-o.stime)/100);setTimeout(function(){c.removeClass("waterfall-loading")},280);if(e.length){o.genCardHtml(e);for(var t=0;t<e.length;t++){if(F._notLikes[e[t].docID]){e.splice(t,1);t--}}if(e.length){o.cache=o.mainCache=n?e.concat(o.cache):o.cache.concat(e);var s=function(){if(a!=o.info.channel)return;R.addCards(e,n);if(typeof i=="function"){i(e)}};if(O&&O.active){if(O.addCards)O.addCards();O.addCards=s}else{s()}}else{if(!n){o.zeroLoads++;if(o.zeroLoads>3){r.addClass("body-loadend")}}}}else{if(n){if(typeof i=="function"){i(e)}}else{r.addClass("body-loadend")}}o.fetching=false;o._lastFetchTime=+new Date}c.addClass("waterfall-loading");if(t.noapi){l="/newshot.js";window.fetchCb=h}e.load.jsonp2({url:l,charset:"utf-8"},h)},genCardHtml:function(i){var n=this.info.channel;for(var o=0;o<i.length;o++){var s=i[o];if(!t.noapi&&this._existIds[s.docID]){i.splice(o,1);o--;continue}s.up_times=s.up_times||s.upTimes||0;s.doc_durl="#detail/"+n+"/"+s.docID;s.doc_url=s.url_163||s.doc_durl;s.pic_url=s.pic_url||s.picUrl||"";s.recom_type=(n==99?s.recom_type:s.hot)||0;s.tcount=s.tcount||0;if(s.ugc){var r=s.ugc.split(/,/);var a=(r[2]||"").replace(/\..*/,"")||"news";var l="http://comment."+e.validChannel(a)+".163.com/"+r[0]+"/"+r[1]+".html#mainjnewscomment";s.commenturl='href="'+l+'"'}if(s.zhoubian){s.recom_type=3;s.city_hint='data-hint="'+s.zhoubian+'"'}else if(s.recom_type==3){s.city_hint='data-hint="\u672c\u5e02"'}s.channelname=s.channel||"";if(s.url_163&&s.url_163.indexOf("/66/")>-1||s.tag=="picset"){s.channelname="\u56fe\u96c6"}if(s.url_163&&/docs\/(\d+)\//.test(s.url_163)){s.channel=RegExp.$1}if(!s.summary||/^\s*$/.test(s.summary)){s.noabstract=" noabstract";s.summary="&nbsp;"}else{if(s.channel==11){s.summary=s.summary.replace(/LOFTER\uff1a.*/,"").replace(/\?/g," ")}s.summary=s.summary.replace(/\?\?+/g," ")}s.summary=s.summary.replace(/<.*?>/g,"");s.card_type="nopic";if(s.pic_url&&s.pic_url!="[]"){s.card_type=this.getPicType(s)}if(s.card_type=="nopic"){s.pic_url=""}s.html=this.tmpl.card(s)}},getPicType:function(e){var t,i=parseInt(e.channel);if(this.info.channel==99)t=i;if(!t)t=this.info.channel;var s=t==8||t==9||t==11||t==66;var r;var a=e.pic_url,l;if(a){if(typeof a=="string"){a=tryEval(a)}else{a=[a]}if(a&&a[0]){var c=T(a);if(typeof c=="string"){r="pic";e.pic_url=c}else if(c&&c.url&&c.url.indexOf("http://")==0){if(i==66&&a.length>3){if(R.channel!=66||Math.random()<.5){if(b(e,a,Math.random()<.5?3:4))return"photoset2"}}var u=parseInt(c.width);var d=parseInt(c.height);if(/\.gif$/.test(c.url))s=true;else if(u<o)s=false;l=u/d;e.pic_url=c.url;e.pic_ratio=l;e.pic_height=Math.ceil(430/l);if(u>50&&l<4){if(s){r="pic"}else if(u){if(u>=430){r=l>1.15?"pic":"spic"}else{r="spic"}if(r=="spic"){e.zoomType=l>1?"height":"width";if(e.zoomType=="width"){var h=132/l;if(h>210){var f=(132-h)/2;e.zoomType='style="margin-top:'+f+'px" '+e.zoomType}}}}}if(r){var p=r=="pic"?430:l>1?0:132;var m=r=="spic"&&l>1?132:0;e.pic_ourl=c.url;e.pic_url=A(c.url,p,m);e.longpic=132/l>100?" longpic":"";if(e.pic_height>n)e.pic_height=n}}if(!e.pic_height)e.pic_height=240}}return r||"nopic"},sideList:function(){var t=this.cache=[];e("a",h).each(function(){var e=this;var i=e.getAttribute("docid");if(i){t.push({docID:i,channel:F.info.channel,title:e.innerHTML.replace(/<.*?>/g,""),url_163:e.getAttribute("href")})}})}};function b(e,t,i){var n=t.length,o;var s={3:[[155,210],[155,210],[116,210]],4:[[145,210],[145,210],[136,104],[136,104]]};var r=[],a={};var l=0;for(var c=0;c<t.length;c++){o=t[c];if(a[o.url])continue;a[o.url]=1;var u=parseInt(o.width);var d=parseInt(o.height);o.ratio=u/d;if(d<210||o.ratio>4)continue;if(o.ratio>1)r.push(o);else r.unshift(o);if(++l==4)break}if(l<3)return false;i=Math.min(l,i);e.photoset=[];for(var c=0;c<i;c++){o=r[c];if(s[i][c][0]/s[i][c][1]>o.ratio){s[i][c][1]=1e4}else{s[i][c][0]=1e4}e.photoset.push({url:A(o.url,s[i][c][0],s[i][c][1],true),ratio:o.ratio,cls:"photoset"+i+"-"+c})}e.pic_height=i==4?210:210;e.pic_url=e.photoset[0].url;e.longpic=132/e.photoset[0].ratio>100?" longpic":"";return true}function T(e){var t;for(var i=0,n=e.length;i<n;i++){var o=e[i].width,s=e[i].height;if(o>430&&s&&o/s>1.15)return e[i]}return t||e[0]}function C(t){if(!t)return;this.cls={compact:"waterfall1",loose:"waterfall2",hover:"hover",sharehover:"share-hover"};this.doms={root:t,$root:e(t)};this.state={top:t.offsetTop};var n=this.cls.hover;var o=this.cls.sharehover;D(this.doms.root,"btn-share",{mouseover:function(){if(this.tmHover){clearTimeout(this.tmHover);this.tmHover=null}e(this).addClass(o)},mouseout:function(t){var i=this;this.tmHover=setTimeout(function(){e(i).removeClass(o)},50)}});D(this.doms.root,"card",{mouseover:function(){if(this.tmHover){clearTimeout(this.tmHover);this.tmHover=null}e(this).addClass(n)},mouseout:function(t){var i=this;this.tmHover=setTimeout(function(){e(i).removeClass(n)},50)}});D(this.doms.root,"cardtitle",{click:function(t){var i=t.target||t.srcElement;var n=this.parentNode;while(i&&i!=this){if(i.tagName.toLowerCase()=="a"){var o=e(".intera",n).attr("docid");var s=i.getAttribute("href");if(o){t.preventDefault&&t.preventDefault();H.detail(o,s)}break}i=i.parentNode}}});if(i){D(this.doms.root,"btn-share",{touchstart:function(t){if(t.target.tagName&&t.target.tagName.toLowerCase()=="i"){e(this).toggleClass(o)}}});D(this.doms.root,"intera",{touchstart:function(e){if(i==this)return;var t=this.getAttribute("docid");if(!t)return;var i=e.target||e.srcElement;var n=i;while(n&&n!=this){var o=n.getAttribute("data-action");if(o=="not_like"){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();O.actions.exec.call(O,t,o,i);return}n=n.parentNode}}})}D(this.doms.root,"intera",{click:function(t){if(n==this)return;var i=this.getAttribute("docid");if(!i)return;var n=t.target||t.srcElement;var o=n;while(o.parentNode!=this){o=o.parentNode}if(e.classList.contains(o,"btn-commend")){if(!e.classList.contains(o,"btn-disable")){if(o.locked)return;o.locked=1;var s=e(".btn-count",o);s.addClass("btn-jump-out");setTimeout(function(){s.incnum();s[0].offsetTop;s.removeClass("btn-jump-out")},y.css3?500:0);setTimeout(function(){e.classList.add(o,"btn-disable");o.setAttribute("title","\u5df2\u63a8\u8350")},y.css3?1200:0);O.actions.ding(i,function(e){if(!e){alert("\u63a8\u8350\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");s.incnum(-1);return}if(!e.success){alert(e.msg);s.incnum(-1)}})}}else{var r=n;while(r&&r!=this){var a=r.getAttribute("data-action");if(a){t.preventDefault&&t.preventDefault();O.actions.exec.call(O,i,a,n);return}r=r.parentNode}}}})}C.prototype={init:function(t,i){var n=this;if(typeof t=="undefined"){t=H.state.channel}n._maxScroll=0;if(n.channel==t){R.refresh(H.state.type);return}n.channel=t;if(p){p=false;c.removeClass("waterfall-refresh")}c[0].style.cssText="";n.doms.left=null;n.doms.right=null;n.doms.bot=null;n.doms.root.innerHTML="";e.activeMenu(t);var o=document.body.scrollTop||document.documentElement.scrollTop;var s=o>45?46:0;document.body.scrollTop=s;document.documentElement.scrollTop=s;r.removeClass("body-loadend");if(t==100)t=1;F.init(t);n.state.cursor=0;n.state.loaded=0;F.fetchMoreCards(function(e){n.state.loaded=Math.min(F.cache.length,5);if(H.state.type=="list"){n.compact();n.doms.bot=n.doms.cards[n.state.loaded]}else{n.loose()}if(typeof i=="function")i()});N=+new Date;e.bannerHint.close()},addCards:function(t,i){var n=this;var o,s,r="";for(o=0,s=t.length;o<s;o++){r+=t[o].html}if(s){var a=document.createElement("div"),l=this.doms.root;a.innerHTML=r;var u=a.children;e(".intera",a).each(function(){n.checkSpam(this)});var d,h=document.createDocumentFragment();o=0;while(d=u[0]){if(i){d.style.display="inline-block";c.addClass("waterfall-newer")}h.appendChild(d);F._existIds[t[o++].docID]=d}if(i){l.insertBefore(h,l.firstChild)}else{l.appendChild(h)}h=null;a=null;this.doms.cards=e(".card",l);if(i){this.state.cursor+=s;this.reFloat();setTimeout(function(){e.bannerHint.show("\u521a\u521a\u4e3a\u60a8\u63a8\u8350\u4e86"+s+"\u6761\u65b0\u95fb\u3002")},0)}}},removeCard:function(t,i){if(!i)i=e(".intera",t).attr("docid");F.deleteById(i);var n=parseInt(e.classList.getStyle(t,"marginBottom"));var o=t.offsetHeight+n;var s=[];function r(e,t){var i=t=="card-left"?1:0;var n,o;while(e){if(e.nodeType==1){var s=e.className;if(s.indexOf(t)!=-1){if(!n){i-=e.offsetTop+e.offsetHeight;n=true}}else{if(!o){i+=e.offsetTop+e.offsetHeight;o=true}}if(o&&n)break}e=e.previousSibling}return i}function a(e,i){if(!e)return null;var o=r(e.previousSibling,i);var a,l;while(e){if(e.nodeType==1){var u=e.className;if(u.indexOf("card-visible")==-1)break;if(u.indexOf(i)!=-1){if(a&&e!=t){c[0].insertBefore(e,a)}if(e!=t){o-=n+e.offsetHeight;s.push(e)}}else if(!a){a=e}if(a&&o<=0)break}e=e.nextSibling}return e}var l=t.previousSibling,u;if(!this.state.compact){u=/card-left/.test(t.className)?"card-left":"card-right";var d=a(t,u);c[0].removeChild(t);if(d)a(d.nextSibling,u)}else{c[0].removeChild(t)}this.state.cursor--;this.doms.cards=e(".card",this.doms.root);R.reFloat();s=[];var h=l?l.nextSibling:c[0].firstChild;while(h){if(h.nodeType==1){var f=h.className;if(f.indexOf("card-visible")==-1||s.length>6){break}if(this.state.compact||f.indexOf(u)!=-1){s.push(h)}}h=h.nextSibling}if(v){for(var p=0,m=s.length;p<m;p++){e.classList.add(s[p],"waterfall-noanim");s[p].style[v]="translate3d(0, "+o+"px, 0)";s[p].offsetTop;e.classList.remove(s[p],"waterfall-noanim");s[p].style[v]="translate3d(0, 0, 0)"}}setTimeout(function(){R.loadMore()},200)},checkSpam:function(t){var i=t.getAttribute("docid");if(f.check(i)){e(">.btn-commend",t).addClass("btn-disable").attr("title","\u5df2\u63a8\u8350")}},checkSpamAll:function(){var t=this;e(".intera",this.doms.root).each(function(){t.checkSpam(this)})},toggle:function(){this.state.compact?this.loose():this.compact()},reset:function(){this.state.cursor=0;this.doms.left=null;this.doms.right=null;this.doms.cards.removeClass("card-visible");this.doms.cards.hide()},refresh:function(e){if(e=="list"){this.compact()}else{this.loose()}},compact:function(){if(typeof this.state.compact=="boolean"&&this.state.compact&&this.state.cursor>0)return;this.state.compact=true;l.addClass("mode-switch2");this.reset();this.doms.$root.addClass(this.cls.compact).removeClass(this.cls.loose);this.firstLoad()},loose:function(){var e=this;if(typeof e.state.compact=="boolean"&&!e.state.compact&&e.state.cursor>0)return;l.removeClass("mode-switch2");e.state.compact=false;e.reset();e.doms.$root.removeClass(e.cls.compact).addClass(e.cls.loose);e.firstLoad()},firstLoad:function(){var t=this;t.doms.$root.addClass("waterfall-init");setTimeout(function(){t.doms.$root.removeClass("waterfall-init")},1e3);for(var i=0;i<t.state.loaded;i++){t.loadCard();t.showCard();t.state.cursor++}t.loadMore();if(e.wizard)setTimeout(function(){e.wizard.run("notlike")},200)},notEnough:function(){if(!c[0].offsetHeight){return false}var e=document.documentElement.clientHeight||window.innerHeight;var t=(document.body.scrollTop||document.documentElement.scrollTop)+e;if(this.state.compact){var i=this.doms.bot;return!i||i.offsetTop+i.offsetHeight<t}else{var n=this.doms.left;var o=this.doms.right;return this.state.cursor<3||!n&&!o||n&&n.offsetTop+n.offsetHeight+60<t||o&&o.offsetTop+o.offsetHeight+60<t}},preload:function(e){var t=this;if(r.hasClass("body-loadend"))return;F.fetchMoreCards(function(i){setTimeout(function(){t.loadMore()},500);if(typeof e=="function")e()})},loadMore:function(e){var t=this;t._maxScroll=document.body.scrollTop||document.documentElement.scrollTop;if(t.state.cursor>F.cache.length-3){t.preload()}if(!t.state.cursor||t.state.cursor>=F.cache.length){return}if(!e&&!t.notEnough()){return}t.freeze=1;var i=0;var n=t.state.cursor;for(var o=0;o<=2;o++){if(t.state.cursor>=F.cache.length)break;t.loadCard();t.state.cursor++;i++}setTimeout(function(){t.showMore(n,i)},50)},loadCard:function(e){var t=this;if(typeof e=="undefined")e=t.state.cursor;var i=t.doms.cards[e];if(i){i.style.display="inline-block"}},showMore:function(e,t){var i;for(var n=0;n<t;n++){i=e+n;if(i>=F.cache.length)break;this.showCard(i)}this.loadMore();this.freeze=0},showCard:function(t){if(typeof t=="undefined")t=this.state.cursor;var i=this.doms.cards[t];var n=e(i);if(this.state.compact){this.doms.bot=i}else{var o;if(!this.doms.left){o="left"}else if(!this.doms.right){o="right"}else{var s=this.doms.left.offsetTop+this.doms.left.offsetHeight;var r=this.doms.right.offsetTop+this.doms.right.offsetHeight;if(s==r&&/card-(left|right)/.test(i.className)){o=RegExp.$1}else{o=s>r?"right":"left"}}var a=o=="left"?"right":"left";n.removeClass("card-"+a);n.addClass("card-"+o);this.doms[o]=i}i.offsetHeight;n.addClass("card-visible");if(this.state.cursor>this.state.loaded)this.state.loaded=this.state.cursor},reFloat:function(e){e=e||0;if(!this.state.compact){if(!e){this.doms.left=null;this.doms.right=null}else{for(var t=0;t<e;t++){var i=this.doms.cards[t];if(i){if(/card-left/.test(i.className)){this.doms.left=i}else{this.doms.right=i}}}}}for(t=e;t<this.state.cursor;t++){this.showCard(t)}setTimeout(function(){c.removeClass("waterfall-newer")},600)}};function x(){var t=document.body.scrollTop||document.documentElement.scrollTop;if(t<54){if(u.hasClass("show-hint")){c.animate({paddingTop:62},400,"easeOut")}else{e.bannerHint.clickable(true)}}else{e.bannerHint.clickable(false)}}function k(){var t=document.body.scrollTop||document.documentElement.scrollTop,i=e.endpage,n;if(i){if(!i.active){if(e.bannerHint.throttle){clearTimeout(e.bannerHint.throttle)}else{setTimeout(function(){x()},150)}e.bannerHint.throttle=setTimeout(function(){x();e.bannerHint.throttle=null},150)}}var o=document.documentElement.clientWidth||window.innerWidth;var s=document.documentElement.clientHeight||window.innerHeight;var l;if(h)l=h.offsetTop+h.offsetHeight-s+200;if(!l)l=0;if(a&&a[0]){var c=50;var u=t>c?"show":"hide";if(a._state!=u){a[u]();a._state=u}if(y.ie6&&t>450){a.css({top:t+document.documentElement.clientHeight-250})}}if(l&&o>1240){if(!r._oRight&&t>l){r._oRight=true;r.addClass("over_rightbar")}else if(r._oRight&&t<l){r._oRight=false;r.removeClass("over_rightbar")}}if(!i.active){if(R.freeze){if(y.winTm)clearTimeout(y.winTm);y.winTm=setTimeout(k,500)}else{if(t>=R._maxScroll){if(!R.scrollTimeout){R.scrollTimeout=setTimeout(function(){R.loadMore();R.scrollTimeout=null},150)}}}}}function _(){if(R)R._maxScroll=0;var e=document.documentElement.clientHeight||window.innerHeight;var n=document.documentElement.clientWidth||window.innerWidth;if(!i){if(n>=740){R.reFloat()}}t.$listarea.css({minHeight:Math.max(h?h.offsetHeight:0,e)});if(y.ie6){d.css({height:Math.max(h?h.offsetHeight-60:0,e)})}else{d.css({minHeight:Math.max(e,1e3)})}}function E(){l.bind(i?"touchstart":"click",function(e){var t=e.target||e.srcElement;e.preventDefault&&e.preventDefault();if(/mode-(card|list)/.test(t.className)){H.brief(null,RegExp.$1)}_()})}function I(){a.find(".gotop_back").bind("click",function(){if(!p){p=true;setTimeout(function(){p=false},500)}document.body.scrollTop=0;document.documentElement.scrollTop=0});var t;e(window).bind("scroll",k).bind("resize",function(){if(t)return;t=setTimeout(function(){_();k();t=null},80)});_()}var j,S,N=+new Date;function L(){var e=+new Date-N;if(e>5e3){N=+new Date;if(j){clearTimeout(j)}c.addClass("waterfall-refresh");c.animate({paddingTop:88,"background-position":"center 20px"},400,"easeOut");j=setTimeout(function(){j=null;p=true;F.fetchMoreCards(function(e){p=false;m=true;setTimeout(function(){m=false},800);c.removeClass("waterfall-refresh");c[0].style.cssText="padding-top:88px";c.animate({paddingTop:33},400,"easeOut");N=+new Date},true)},300)}else if(e>400){if(S){clearTimeout(S)}c.animate({paddingTop:88},400,"easeOut");S=setTimeout(function(){c.animate({paddingTop:33},400,"easeOut")},120)}}function M(){var e=document.createElement("div"),t="Khtml O Moz Webkit".split(" "),i=t.length;var n="transition";if(n in e.style)return true;if("-ms-"+n in e.style)return true;n=n.replace(/^[a-z]/,function(e){return e.toUpperCase()});while(i--){if(t[i]+n in e.style){return true}}return false}function $(e){var t="";var i=document.documentElement;for(var n=0;n<e.length;n++){if(e[n]in i.style){t=e[n]}}return t}function A(e,t,i){t=t||1e4;i=i||1e4;if(e.indexOf("http://")==0&&/\.(jpg|png)/.test(e)){var n=/^(http:\/\/s\.cimg\.163\.com.*?)\d+x\d+\.auto\.jpg/;if(n.test(e)){e=e.replace(n,"$1")}else{e="http://s.cimg.163.com/i/"+encodeURIComponent(e.replace(/http:\/\//,""))+"."}e+=t+"x"+i+".auto.jpg"}return e}function D(t,n,o){var s=e(t);for(var r in o){if(i&&/mouse(over|out)/.test(r))continue;a(r,o[r])}function a(e,t){s.bind(e,function(e){var i=l(e);if(i){t.call(i,e)}})}function l(i){var o=i.target||i.srcElement;while(o&&o!=t){if(e.classList.contains(o,n)){return o}o=o.parentNode}return null}}function P(){var e=this;this.minInter=15e3;this.clickHint="\u6709\u672a\u8bfb\u63a8\u8350\uff0c\u70b9\u51fb\u67e5\u770b";u.bind("click",function(){e.close();if(!e.activeHint){L()}})}P.prototype={show:function(t){var i=this;this.activeHint=t;t=t||this.clickHint;c=e("#news-list");var n=document.body.scrollTop||document.documentElement.scrollTop;if(n<56){c.animate({paddingTop:62},400,"easeOut")}u.show().html(t);u[0].offsetTop;u.addClass("show-hint");if(u.hideTimeout)clearTimeout(u.hideTimeout);if(this.activeHint){u.hideTimeout=setTimeout(function(){u.removeClass("show-hint");c.animate({paddingTop:33},400,"easeOut");u.hideTimeout=setTimeout(function(){u.hide();u.hideTimeout=null;i.autoHint()},500)},2e3)}},close:function(){if(u.hasClass("show-hint")){u.removeClass("show-hint").hide();c.animate({paddingTop:33},400,"easeOut")}this.autoHint()},clickable:function(t){if(t){if(O&&O.active)return;if(F&&F.fetching)return;if(e.wizard&&e.wizard.active)return;var i=+new Date-N;var n=this.minInter;if(F&&F.info&&F.info.channel!=99)n=4*n;if(i>n){var o=document.body.scrollTop||document.documentElement.scrollTop;if(o<54)this.show()}}else{if(!this.activeHint){this.close()}}},autoHint:function(){var e=this;var t=this.minInter;if(F&&F.info&&F.info.channel!=99)t=4*t;setTimeout(function(){e.clickable(true)},t)}};e.bannerHint=new P;var H=e.route=new e.Route({channel:99,type:"card"});var F=e.newstore=new w;var O=e.endpage.init(H,F);var R=e.wf=new C(c[0]);var B=window.localStorage;H.define({brief:/^brief\/(\d+)\/(\S+)/,detail:/^detail\/(\d+)\/(\S+)/});H.brief=function(e,t){H.state.docid=null;if(typeof e=="string"||typeof e=="number"){H.state.channel=e}if(B){if(typeof t=="undefined"){t=B.getItem("jnewsmode")}else{B.setItem("jnewsmode",t)}}if(t=="card"||t=="list"){H.state.type=t}if(O&&O.active)O.close();var i=false;if(R){i=R.channel<0;R.init()}if(i){H.stat()}else{H.save("brief/"+this.state.channel+"/"+this.state.type)}};H.detail=function(e,t,i,n){if(t&&H.state.docid===t)return;if(typeof e=="string"||typeof e=="number"){if(e.toString().length>3){n=i;i=t;t=e}else{H.state.channel=e}}e=H.state.channel;H.state.docid=t;if(t&&O){if(!n&&/\?(\d+)$/.test(location.hash)){n=RegExp.$1}O.open(t,i,n);var o=F.getInfoById(t)||{};if(typeof i=="string"&&i.indexOf("/66/")>-1)e="66";H.save("detail/"+e+"/"+t,o.url_163||i);if(R&&typeof R.channel=="undefined"){R.init()}}};H.redirect();e.initSpam(function(){R.checkSpamAll()});e.ready(function(){a=e("#go2top");E();I();if(h){e(".recent-item",h).bind("mouseover",function(){e.classList.add(this,"recent-item-hover")}).bind("mouseout",function(){e.classList.remove(this,"recent-item-hover")});e(h).bind("click",function(e){var t=e.target||e.srcElement;if(t.tagName.toLowerCase()=="a"){var i=t.getAttribute("docid");if(i){e.preventDefault&&e.preventDefault();F&&F.sideList();H.detail(i,t.getAttribute("href"),t.getAttribute("srctype"))}}})}e("#mainlinks").bind(i?"touchstart":"click",function(e){var t=e.target||e.srcElement;var i=t.tagName;if(i&&i.toLowerCase()=="a"){e.preventDefault&&e.preventDefault();var n=t.getAttribute("channel");if(!O.active&&R.channel==n){R.channel=-1}if(n!=R.channel)O.addCards=null;H.brief(n)}})})}(NE);